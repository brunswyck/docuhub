

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>python &mdash; Patrick&#39;s Docs alpha documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/dark_mode_css/general.css" type="text/css" />
  <link rel="stylesheet" href="_static/dark_mode_css/dark.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/dark_mode_js/default_dark.js"></script>
        <script src="_static/dark_mode_js/theme_switcher.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="techtalks" href="techtalk/main.html" />
    <link rel="prev" title="Links" href="links.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Patrick's Docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ansible.html">ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="apidoc/modules.html">becode</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash.html">bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">GIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html">Links</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#library">library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#toolkit">toolkit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#first-collection">first collection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conda">conda</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install">install</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environments">environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#managing-environments">managing environments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#backup-environment">backup environment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#packages">packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#search">search</a></li>
<li class="toctree-l4"><a class="reference internal" href="#backup-used-packages">backup used packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-required-packages">install required packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pip">pip</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#package-mgmt">package mgmt</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#backup-required-packages">backup required packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">install required packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtualenvwrapper">virtualenvwrapper</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documenting">documenting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sphinx">sphinx</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setup-sphinx">setup sphinx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pip3-requirements">pip3 requirements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fundamentals">fundamentals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modularity">modularity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#main-function-cli-arguments">main function &amp; cli arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docstrings">docstrings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#objects">objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#function-default-values-for-arguments">function default values for arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#collections">collections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tuple">tuple</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string">string</a></li>
<li class="toctree-l4"><a class="reference internal" href="#range">range</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list">list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shallow-copies">shallow copies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-repetition">list repetition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#more-on-list">more on list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#growing-lists">growing lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reversing-and-sorting-lists">reversing and sorting lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dictionary">dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set">set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#collection-protocols">collection protocols</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#handling-exceptions">handling exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exception-and-control-flow">exception and control flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#handling-raised-exceptions">handling raised exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programmer-errors">programmer errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#re-raising-exceptions">re-raising exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exceptions-as-apis">exceptions as APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clean-up-actions">clean-up actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#platform-specific-code">platform-specific code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#comprehensions-iterables-and-generators">Comprehensions, iterables and generators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#list-comprehensions">list comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-comprehensions">set comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dictionary-comprehensions">dictionary comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filtering-predicates">filtering predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iteration-protocols">iteration protocols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generators">generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stateful-generators">stateful generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generator-comprehensions">generator comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-itertools">using itertools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary-comprehensions-generators">summary comprehensions generators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#classes">classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#summary-classes">summary classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#recursion">recursion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files-and-resource-management">files and resource management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#zip-files">zip files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#json">json</a></li>
<li class="toctree-l4"><a class="reference internal" href="#csv">csv</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xml">xml</a></li>
<li class="toctree-l4"><a class="reference internal" href="#concatenate-files">concatenate files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dask">dask</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#oop">OOP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#theory">theory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#static-methods">static methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-methods">class methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inheritance">inheritance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#private-vars">private vars</a></li>
<li class="toctree-l4"><a class="reference internal" href="#property">&#64;property</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scoping-rules">scoping rules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#practice">practice</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-classes">using classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#guess-a-number">guess a number</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#validation">validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#non-regex-ip-validation">non regex ip validation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#regex">regex</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#searching">searching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#substitution">substitution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#substitution-by-function">substitution by function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limit-number-of-replacements">limit number of replacements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#utility-functions">utility functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#re-escape">re.escape</a></li>
<li class="toctree-l3"><a class="reference internal" href="#re-compile">re.compile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#regex-oject-attributes">regex oject attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#match-object">match object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#match-object-is-truthy">match object is truthy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-object-methods">match object methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-object-attributes">match object attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lookaround">lookaround</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#positive-lookahead">positive lookahead</a></li>
<li class="toctree-l4"><a class="reference internal" href="#negative-lookahead">negative lookahead</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lookbehind">lookbehind</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#positive-lookbehind">positive lookbehind</a></li>
<li class="toctree-l4"><a class="reference internal" href="#negative-lookbehind">negative lookbehind</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scraping">scraping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#beautiful-soup">beautiful soup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setup-bs4">setup bs4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#find-html-elements">find html elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apply-regex-on-element-string">apply regex on element string</a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-requests">HTTP requests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#selenium">selenium</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#handy-libraries">handy libraries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scraping-training">scraping training</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#inquisitive-with-bs4-selenium">inquisitive with bs4 &amp; selenium</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#threading">threading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#non-blocking">non-blocking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#first-example">first example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#thread-synchronization">thread synchronization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lock">lock</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#parsing">parsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parsing-cli-options">parsing cli options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#code-with-cli-parsing">code with cli parsing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="techtalk/main.html">techtalks</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Patrick's Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>python</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/python.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python">
<h1>python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h1>
<div class="section" id="library">
<h2>library<a class="headerlink" href="#library" title="Permalink to this headline">¶</a></h2>
<div class="section" id="toolkit">
<h3>toolkit<a class="headerlink" href="#toolkit" title="Permalink to this headline">¶</a></h3>
<div class="section" id="first-collection">
<h4>first collection<a class="headerlink" href="#first-collection" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">contextlib</span>
<span class="kn">import</span> <span class="nn">os</span>


<span class="k">def</span> <span class="nf">file_exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">compress_to_bz2_file</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">compression_lvl</span><span class="o">=</span><span class="mi">9</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">bz2</span>
    <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">compression_lvl</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">tar_bz2_contents</span> <span class="o">=</span> <span class="n">bz2</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">compresslevel</span><span class="o">=</span><span class="n">compression_lvl</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;compression level has to be between 1 and 9&quot;</span><span class="p">)</span>


<span class="c1"># concatenate_files_in_list(text_files_list, final_file, &#39;latin-1&#39;, True)</span>
<span class="k">def</span> <span class="nf">concatenate_files_in_list</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">encode_in</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">is_small</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">use_shutil</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="c1"># don&#39;t forget to specify target folder when opening files!</span>
    <span class="c1"># todo: check if file was created already</span>
    <span class="n">encoding_format</span> <span class="o">=</span> <span class="n">encode_in</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;target file -&gt; </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">readmode</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;rb&#39;</span> <span class="k">if</span> <span class="n">use_shutil</span> <span class="k">else</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">writemode</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;wb&#39;</span> <span class="k">if</span> <span class="n">use_shutil</span> <span class="k">else</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">writemode</span><span class="p">)</span> <span class="k">as</span> <span class="n">finaltext</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;currently appending file: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">readmode</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding_format</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_currently_opened</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">use_shutil</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">shutil</span>
                    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">finaltext</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">is_small</span><span class="p">:</span>
                    <span class="n">finaltext</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_currently_opened</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_small</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_currently_opened</span><span class="p">:</span>
                        <span class="n">finaltext</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">add_files_from_folder_to_list</span><span class="p">(</span><span class="n">filetype</span><span class="p">,</span> <span class="n">folder_target</span><span class="o">=</span><span class="s1">&#39;./&#39;</span><span class="p">):</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">set_folder</span><span class="p">(</span><span class="n">folder_target</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;getting files from </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2"> of type </span><span class="si">{</span><span class="n">filetype</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
    <span class="n">all_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.txt&#39;</span><span class="p">):</span>
                <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">filename</span><span class="p">)</span>
                <span class="n">all_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">full_path</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;something went wrong&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">all_files</span>


<span class="k">def</span> <span class="nf">set_folder</span><span class="p">(</span><span class="n">folder_dir</span><span class="p">):</span>
    <span class="n">isdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">folder_dir</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">isdir</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;folder you&#39;re trying to set is invalid -&gt; </span><span class="si">{</span><span class="n">folder_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">absolute_path</span> <span class="o">=</span> <span class="n">isdir</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">absolute_path</span>


<span class="k">def</span> <span class="nf">test_files_in_list</span><span class="p">(</span><span class="n">file_list</span><span class="p">:</span> <span class="p">[]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;testing files in list... &quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Path</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;oops: </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> doesn&#39;t seem to exist&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="conda">
<h2>conda<a class="headerlink" href="#conda" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install">
<h3>install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h3>
<p>download anaconda from <a class="reference external" href="https://www.anaconda.com/products/individual#Downloads">https://www.anaconda.com/products/individual#Downloads</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">repo</span><span class="o">.</span><span class="n">anaconda</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">Anaconda3</span><span class="o">-</span><span class="mf">2021.05</span><span class="o">-</span><span class="n">Linux</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>try anaconda navigator</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">anaconda</span><span class="o">-</span><span class="n">navigator</span>
</pre></div>
</div>
<p>more info: <a class="reference external" href="https://docs.anaconda.com/anaconda/navigator/">https://docs.anaconda.com/anaconda/navigator/</a></p>
</div>
<div class="section" id="environments">
<h3>environments<a class="headerlink" href="#environments" title="Permalink to this headline">¶</a></h3>
<div class="section" id="managing-environments">
<h4>managing environments<a class="headerlink" href="#managing-environments" title="Permalink to this headline">¶</a></h4>
<p>conda <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">env mgmt</a> documentation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda-env list
# conda environments:
#
base                  *  /home/dadude/anaconda3
helloworld               /home/dadude/anaconda3/envs/helloworld
</pre></div>
</div>
</div>
<div class="section" id="backup-environment">
<h4>backup environment<a class="headerlink" href="#backup-environment" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">export</span> <span class="o">--</span><span class="n">from</span><span class="o">-</span><span class="n">history</span> <span class="o">-</span><span class="n">n</span> <span class="n">helloworld</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">builds</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">v</span> <span class="s2">&quot;prefix&quot;</span> <span class="o">&gt;</span> <span class="n">backup_env</span><span class="o">.</span><span class="n">yml</span>

<span class="n">cat</span> <span class="n">backup_env</span><span class="o">.</span><span class="n">yml</span>
<span class="n">name</span><span class="p">:</span> <span class="n">helloworld</span>
<span class="n">channels</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">defaults</span>
<span class="n">dependencies</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">sphinx</span>
  <span class="o">-</span> <span class="n">argcomplete</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="packages">
<h3>packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h3>
<div class="section" id="search">
<h4>search<a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">search</span> <span class="n">scipy</span>
</pre></div>
</div>
</div>
<div class="section" id="backup-used-packages">
<h4>backup used packages<a class="headerlink" href="#backup-used-packages" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="nb">list</span> <span class="o">--</span><span class="n">export</span> <span class="o">&gt;</span> <span class="n">conda_reqs</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="section" id="install-required-packages">
<h4>install required packages<a class="headerlink" href="#install-required-packages" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">envname</span> <span class="o">--</span><span class="n">file</span> <span class="n">conda_reqs</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="pip">
<h2>pip<a class="headerlink" href="#pip" title="Permalink to this headline">¶</a></h2>
<div class="section" id="package-mgmt">
<h3>package mgmt<a class="headerlink" href="#package-mgmt" title="Permalink to this headline">¶</a></h3>
<div class="section" id="backup-required-packages">
<h4>backup required packages<a class="headerlink" href="#backup-required-packages" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">freeze</span> <span class="o">&gt;</span> <span class="n">pip_requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h4>install required packages<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">envname</span>
<span class="n">source</span> <span class="n">env</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">pip_requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="section" id="virtualenvwrapper">
<h4>virtualenvwrapper<a class="headerlink" href="#virtualenvwrapper" title="Permalink to this headline">¶</a></h4>
<p>documentation <a class="reference external" href="https://virtualenvwrapper.readthedocs.io/en/latest/command_ref.html">virtualenvwrapper</a></p>
<p>install
.. code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">virtualenvwrapper</span>
</pre></div>
</div>
<p>add to bashrc once virtualenvwrapper is installed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#Virtualenvwrapper settings:
export WORKON_HOME=$HOME/venv
VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
source /usr/share/virtualenvwrapper/virtualenvwrapper.sh

(base) dadude@dahost ~/gits/docuhub (main)$ source ~/.bashrc
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/premkproject
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/postmkproject
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/initialize
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/premkvirtualenv
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/postmkvirtualenv
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/prermvirtualenv
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/postrmvirtualenv
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/predeactivate
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/postdeactivate
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/preactivate
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/postactivate
virtualenvwrapper.user_scripts creating /home/dadude/.venvs/get_env_details
</pre></div>
</div>
<p>workon will work now</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(base) dadude@dahost ~/gits/docuhub (main)$ workon
code
deleteme
desktop
docu
docuhub
jupyter
networking
otp_client
portfolio
pytest
testing_mocks

(docu) (helloworld) dadude@dahost ~/gits/docuhub (main)$ workon docuhub
(docuhub) (helloworld) dadude@dahost ~/gits/docuhub (main)$
</pre></div>
</div>
<div class="section" id="virtualenvwrapper-commands">
<h5>virtualenvwrapper commands<a class="headerlink" href="#virtualenvwrapper-commands" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkvirtualenv</span> <span class="n">new_venv_name</span>
<span class="n">lsvirtualenv</span>
<span class="n">rmvirtualenv</span> <span class="n">name_of_your_env</span>
<span class="n">cpvirtualenv</span> <span class="n">old_virtual_env</span> <span class="n">new_virtual_env</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="documenting">
<h2>documenting<a class="headerlink" href="#documenting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sphinx">
<h3>sphinx<a class="headerlink" href="#sphinx" title="Permalink to this headline">¶</a></h3>
<div class="section" id="setup-sphinx">
<h4>setup sphinx<a class="headerlink" href="#setup-sphinx" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[ ! -d &quot;$HOME/reqfiles&quot; ] &amp;&amp; mkdir $HOME/reqfiles &amp;&amp; echo -e &quot;rstcheck\nSphinx\nsphinx-autobuild\nsphinx-rtd-theme\nsphinx-rtd-dark-mode&quot; &gt; $HOME/sphinx_reqs.txt

python3 -m venv sphinx
source ~/venv/sphinx/bin/activate

python3 -m pip install --upgrade pip

#(sphinx) (base) dadude@dahost:~/venv$
pip3 install -r ~/reqfiles/sphinx_reqs.txt


cd ~/gits;git clone git@github.com:brunswyck/docuhub.git;cd ~/gits/docuhub
</pre></div>
</div>
</div>
<div class="section" id="pip3-requirements">
<h4>pip3 requirements<a class="headerlink" href="#pip3-requirements" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docutils</span>
<span class="n">rstcheck</span>
<span class="n">Sphinx</span>
<span class="n">sphinx</span><span class="o">-</span><span class="n">autobuild</span>
<span class="n">sphinx</span><span class="o">-</span><span class="n">rtd</span><span class="o">-</span><span class="n">theme</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="fundamentals">
<h2>fundamentals<a class="headerlink" href="#fundamentals" title="Permalink to this headline">¶</a></h2>
<div class="section" id="modularity">
<h3>modularity<a class="headerlink" href="#modularity" title="Permalink to this headline">¶</a></h3>
<div class="section" id="main-function-cli-arguments">
<h4>main function &amp; cli arguments<a class="headerlink" href="#main-function-cli-arguments" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="c1"># the module is being executed directly not imported</span>
    <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># the 0th arg is the module/script filename</span>
</pre></div>
</div>
<p>more on command-line parsing module: <a class="reference external" href="https://docs.python.org/3/howto/argparse.html">https://docs.python.org/3/howto/argparse.html</a>
an alternative is docopt: <a class="reference external" href="https://github.com/docopt/docopt">https://github.com/docopt/docopt</a></p>
</div>
<div class="section" id="docstrings">
<h4>docstrings<a class="headerlink" href="#docstrings" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_funtion</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Print items one per line</span>

<span class="sd">    Args:</span>
<span class="sd">        An iterable series of printable items</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="module-docstrings">
<h5>module docstrings<a class="headerlink" href="#module-docstrings" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; retrieve and print items from a list</span>

<span class="sd">Usage:</span>

<span class="sd">    python3 list.py &lt;list&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">sys</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when you now call help on the module you’ll get a lot of information</p>
</div>
</div>
</div>
<div class="section" id="objects">
<h4>objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># id() returns a unique identifier for an object</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">300</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">4298473345</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1500</span>
<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">4298222345</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">4298473345</span> <span class="c1"># same as a</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="kc">True</span>
<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="function-default-values-for-arguments">
<h4>function default values for arguments<a class="headerlink" href="#function-default-values-for-arguments" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">banner</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">):</span> <span class="c1"># place after args without defaults</span>
 <span class="n">line</span> <span class="o">=</span> <span class="n">border</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
 <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
 <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
 <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="n">banner</span><span class="p">(</span><span class="s2">&quot;Norwegian Blue&quot;</span><span class="p">)</span>
<span class="n">banner</span><span class="p">(</span><span class="s2">&quot;Sun, Moon and Stars&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span>
<span class="n">banner</span><span class="p">(</span><span class="s2">&quot;Sun, Moon and Stars&quot;</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>
<span class="n">banner</span><span class="p">(</span><span class="n">border</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello from Earth&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>always use immutable objects like ints and strings as default values eg you dont want a function time to always show the time of first function call</p>
</div>
</div>
</div>
<div class="section" id="collections">
<h3>collections<a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h3>
<div class="section" id="tuple">
<h4>tuple<a class="headerlink" href="#tuple" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">k</span> <span class="o">=</span> <span class="p">(</span><span class="mi">391</span><span class="p">,)</span> <span class="c1"># use the trailing comma, otherwise it will be an int</span>

<span class="k">def</span> <span class="nf">minmax</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">items</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="c1"># tuples are useful for multiple return values</span>

<span class="n">minmax</span><span class="p">([</span><span class="mi">83</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">86</span><span class="p">])</span>

<span class="c1"># tuple unpacking allows us to destructure into named references</span>
<span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">minmax</span><span class="p">([</span><span class="mi">83</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">86</span><span class="p">])</span>
<span class="n">lower</span>
<span class="mi">31</span>
<span class="n">upper</span>
<span class="mi">86</span>
<span class="c1"># idiomatic python swap</span>
<span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;jelly&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;bean&#39;</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>
<span class="n">a</span>
<span class="s1">&#39;bean&#39;</span>
<span class="c1"># use the tuple() constructor to create tuples from other iterable objects</span>
<span class="nb">tuple</span><span class="p">([</span><span class="mi">561</span><span class="p">,</span> <span class="mi">1105</span><span class="p">,</span> <span class="mi">1219</span><span class="p">,</span> <span class="mi">2466</span><span class="p">])</span>
<span class="p">(</span><span class="mi">561</span><span class="p">,</span> <span class="mi">1105</span><span class="p">,</span> <span class="mi">1219</span><span class="p">,</span> <span class="mi">2466</span><span class="p">)</span>
<span class="nb">tuple</span><span class="p">(</span><span class="s2">&quot;Patrick&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="mi">5</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>
<span class="kc">True</span>
<span class="mi">4</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="string">
<h4>string<a class="headerlink" href="#string" title="Permalink to this headline">¶</a></h4>
<div class="section" id="format">
<h5>format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Alan Turing&quot;</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">person</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="s2">&quot;mathematician&quot;</span><span class="p">]</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Hello, my name is </span><span class="si">{}</span><span class="s2"> and I am </span><span class="si">{}</span><span class="s2"> years old and I am a </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">person</span><span class="p">)</span>
<span class="c1"># Hello, my name is Alan Turing and I am 42 years old an I am a mathematician</span>
<span class="n">typeAge</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TestNotebook</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;Alan Turing&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_person</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">person</span><span class="p">,[</span><span class="s2">&quot;Alan Turing&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="s2">&quot;mathematician&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="s2">&quot;Hello, my name is Alan Turing and I am 42 years old and I am a mathematician.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">typeAge</span><span class="p">,</span><span class="nb">type</span><span class="p">(</span><span class="nb">int</span><span class="p">()))</span>


<span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">exit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;New&quot;</span> <span class="o">+</span> <span class="s2">&quot;found&quot;</span> <span class="o">+</span> <span class="s2">&quot;land&quot;</span>
<span class="s1">&#39;Newfoundland&#39;</span>
<span class="c1"># use join</span>
<span class="n">colors</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;#45ff12&#39;</span><span class="p">,</span> <span class="s1">&#39;#2323fa&#39;</span><span class="p">,</span> <span class="s1">&#39;#1234a2&#39;</span><span class="p">,</span> <span class="s1">&#39;#4313ff&#39;</span><span class="p">])</span>
<span class="s1">&#39;#45ff12;#2323fa;#1234a2;#4313ff&#39;</span>
<span class="c1"># split them up again</span>
<span class="n">colors</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;#45ff12&#39;</span><span class="p">,</span> <span class="s1">&#39;#2323fa&#39;</span><span class="p">,</span> <span class="s1">&#39;#1234a2&#39;</span><span class="p">,</span> <span class="s1">&#39;#4313ff&#39;</span><span class="p">]</span>
<span class="c1"># using the empty string as a seperator to join</span>
<span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="s1">&#39;way&#39;</span><span class="p">,</span> <span class="s1">&#39;man&#39;</span><span class="p">])</span>
<span class="s1">&#39;highwayman&#39;</span>
<span class="c1"># partion() divides a string -&gt; prefix,seperator,suffix</span>
<span class="s2">&quot;unforgetable&quot;</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;forget&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;un&#39;</span><span class="p">,</span> <span class="s1">&#39;forget&#39;</span><span class="p">,</span> <span class="s1">&#39;able&#39;</span><span class="p">)</span>
<span class="c1"># usage with tuples</span>
<span class="n">departure</span><span class="p">,</span> <span class="n">seperator</span><span class="p">,</span> <span class="n">arrival</span> <span class="o">=</span> <span class="s2">&quot;London:Edinburgh&quot;</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
<span class="n">arrival</span>
<span class="n">Edinburgh</span>
<span class="c1"># underscore dummy value</span>
<span class="n">origin</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">destination</span> <span class="o">=</span> <span class="s2">&quot;Seattle-Boston&quot;</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="c1"># use format() to insert values into strings</span>
<span class="s2">&quot;The age of </span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;patrick&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
<span class="s2">&quot;The age of </span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2">. </span><span class="si">{0}</span><span class="s2">&#39;s birthday is on </span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;Patrick&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="s1">&#39;June 1&#39;</span><span class="p">)</span>
<span class="c1"># they can be ommitted when in the exact order and used only once</span>
<span class="s2">&quot;The age of </span><span class="si">{}</span><span class="s2"> is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;patrick&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
<span class="c1"># use named fields</span>
<span class="s2">&quot;Current position </span><span class="si">{latitude}</span><span class="s2"> </span><span class="si">{longitude}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;60N&quot;</span><span class="p">,</span>
                                                 <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;5E&quot;</span><span class="p">)</span>
<span class="s1">&#39;Current position 60N 5E&#39;</span>
<span class="c1"># access values through keys or indexes with []</span>
<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mf">65.2</span><span class="p">,</span> <span class="mf">23.1</span><span class="p">,</span> <span class="mf">82.2</span><span class="p">)</span>
<span class="s2">&quot;Galactic position x=</span><span class="si">{pos[0]}</span><span class="s2"> y={pos[1] z=</span><span class="si">{pos[2]}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">)</span>
<span class="s1">&#39;Galactic position x=65.2 y=23.1 z=82.2&#39;</span>
<span class="c1"># replacement field mini-language provides many value n alignment formatting options</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="s2">&quot;Math constants: pi=</span><span class="si">{m.pi:.3f}</span><span class="s2">, e=</span><span class="si">{m.e:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">math</span><span class="p">)</span>
<span class="s1">&#39;Math constants: pi=3.142, e=2.718&#39;</span>
<span class="n">help</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="range">
<h4>range<a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># stop is not included</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="c1"># with step argument</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="c1"># avoid range for iterating over lists</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="c1"># not</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c1"># prefer enumerate() for counters</span>
<span class="c1"># enumerate() yields (index, value) tuples</span>
<span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">333</span><span class="p">,</span> <span class="mi">8888</span><span class="p">,</span> <span class="mi">144444</span><span class="p">,</span> <span class="mi">2012011</span><span class="p">]</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">333</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8888</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">144444</span><span class="p">)</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2012011</span><span class="p">)</span>
<span class="c1"># improvement with tuple unpacking</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;i = </span><span class="si">{}</span><span class="s2">, v = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">333</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">8888</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">144444</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">2012011</span>
</pre></div>
</div>
</div>
<div class="section" id="list">
<h4>list<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># SHALLOW copying a list (contain same object references as the source list!!)</span>
<span class="n">copy_list</span> <span class="o">=</span> <span class="n">sequence</span><span class="p">[:]</span> <span class="c1"># full slice</span>
<span class="n">copy_list</span> <span class="o">=</span> <span class="n">other_list</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1"># use copy method</span>
<span class="n">copy_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">some_other_list</span><span class="p">)</span> <span class="c1"># use the list constructor</span>
</pre></div>
</div>
</div>
<div class="section" id="shallow-copies">
<h4>shallow copies<a class="headerlink" href="#shallow-copies" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span> <span class="c1"># create a shallow copy</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="c1"># create new list in a at 0</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># b still references to the old list object b4 a created a new one</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># just appending to the list in a also affects the list for b</span>
<span class="n">b</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="c1"># they both still refer to the same object</span>
</pre></div>
</div>
</div>
<div class="section" id="list-repetition">
<h4>list repetition<a class="headerlink" href="#list-repetition" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># repeat lists using the * operator</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">]</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">c</span> <span class="o">*</span> <span class="mi">4</span>
<span class="n">d</span>
<span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">]</span> <span class="c1"># this method is often used to zero a list of fixed length</span>
<span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">constant</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">9</span> <span class="c1"># same principle as with list copying so beware, repetition = shallow</span>
<span class="c1"># repetition repeats the reference without copying the value</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">s</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
<span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="c1"># because all innerlists refer to same object they are all modified</span>
<span class="n">s</span>
<span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="section" id="more-on-list">
<h4>more on list<a class="headerlink" href="#more-on-list" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">w</span> <span class="o">=</span> <span class="s2">&quot;the quick brown fox jumps over the lazy dog&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;quick&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">,</span> <span class="s1">&#39;jumps&#39;</span><span class="p">,</span> <span class="s1">&#39;over&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;lazy&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">]</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;fox&#39;</span><span class="p">)</span>
<span class="n">i</span>
<span class="mi">3</span>
<span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="s1">&#39;fox&#39;</span>
<span class="n">w</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;unicorn&#39;</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="s1">&#39;unicorn&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span>
<span class="n">w</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;the&#39;</span><span class="p">)</span>
<span class="mi">2</span>
<span class="c1"># just test membership</span>
<span class="mi">37</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">53</span><span class="p">]</span>
<span class="kc">True</span>
<span class="mi">78</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">53</span><span class="p">]</span>
<span class="kc">True</span>
<span class="n">u</span> <span class="o">=</span> <span class="s2">&quot;jackdaws love my big sphinx of quartz&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="n">u</span>
<span class="p">[</span><span class="s1">&#39;jackdaws&#39;</span><span class="p">,</span> <span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;big&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;quartz&#39;</span><span class="p">]</span>
<span class="k">del</span> <span class="n">u</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;jackdaws&#39;</span><span class="p">,</span> <span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;quartz&#39;</span><span class="p">]</span>
<span class="c1"># remove elements by value rather than position</span>
<span class="n">u</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;jackdaws&#39;</span><span class="p">)</span>
<span class="n">u</span>
<span class="p">[</span><span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;quartz&#39;</span><span class="p">]</span>
<span class="c1"># the equivalent to remove using the index:</span>
<span class="k">del</span> <span class="n">u</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;quartz&#39;</span><span class="p">)]</span>
<span class="n">u</span>
<span class="p">[</span><span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">]</span>
<span class="n">u</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;pyramid&#39;</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="nb">list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span>

<span class="c1"># insertion seq.insert(index, item)</span>
<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;I accidentally the whole universe&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">)</span>
<span class="n">a</span>
<span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;accidentally&#39;</span><span class="p">,</span> <span class="s1">&#39;destroyed&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;whole&#39;</span><span class="p">,</span> <span class="s1">&#39;universe&#39;</span><span class="p">]</span>
<span class="c1"># use join method on a space seperator</span>
<span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="s1">&#39;I accidentally destroyed the whole universe&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="growing-lists">
<h4>growing lists<a class="headerlink" href="#growing-lists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># concatenate lists</span>
<span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span>
<span class="n">k</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>
<span class="c1"># using assignment operator</span>
<span class="n">k</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="c1"># or use the extend method</span>
<span class="n">k</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">76</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">199</span><span class="p">])</span>
<span class="n">k</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">199</span><span class="p">]</span>
<span class="c1"># these techniques work with any iterable series on the righthand side</span>
</pre></div>
</div>
</div>
<div class="section" id="reversing-and-sorting-lists">
<h4>reversing and sorting lists<a class="headerlink" href="#reversing-and-sorting-lists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">1211</span><span class="p">,</span> <span class="mi">112111</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span>
<span class="go">[112111, 1211, 21, 11, 1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">149</span><span class="p">,</span> <span class="mi">3299</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">67</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">[5, 7, 13, 17, 29, 41, 67, 71, 149, 3299]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">[3299, 149, 71, 67, 41, 29, 17, 13, 7, 5]</span>
<span class="go"># key argument to sort() method accepts a function for producing a sort key from an item</span>
<span class="go"># e.g. sort words in order of length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;not perplexing do handwriting family where I illegibly know doctors&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span>
<span class="go">[&#39;not&#39;, &#39;perplexing&#39;, &#39;do&#39;, &#39;handwriting&#39;, &#39;family&#39;, &#39;where&#39;, &#39;I&#39;, &#39;illegibly&#39;, &#39;know&#39;, &#39;doctors&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span>
<span class="go">[&#39;I&#39;, &#39;do&#39;, &#39;not&#39;, &#39;know&#39;, &#39;where&#39;, &#39;family&#39;, &#39;doctors&#39;, &#39;illegibly&#39;, &#39;perplexing&#39;, &#39;handwriting&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
<span class="go">&#39;I do not know where family doctors illegibly perplexing handwriting&#39;</span>
<span class="go"># sorted() built-in function sorts any iterable series and returns a list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">[1, 2, 4, 9]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[4, 9, 2, 1]</span>
<span class="go"># reversed() built-in function reverses any iterable series</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span>
<span class="go">&lt;list_reverseiterator object at 0x7ffa18086e48&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="go">[0, 1, 3, 9]</span>
<span class="go"># reversed returns an iterator so you need to convert it to a list (explained later)</span>
<span class="go"># these two sort methods will work on any finite iterable source object</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary">
<h4>dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># key objects must be immutable! e.g. Str, numbers and tuples NOT lists!</span>
<span class="c1"># value objects can be mutable</span>
<span class="c1"># the order in dictionaries are random, don&#39;t rely on it</span>
<span class="c1"># dict() constructor accepts:</span>
<span class="c1"># iterable series of key-vlaue 2-tuples</span>
<span class="c1"># keyword arguments - requires keys are valid Python identifiers</span>
<span class="c1"># a mapping such as another dict</span>
<span class="n">names_and_ages</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">48</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Charlie&#39;</span><span class="p">,</span> <span class="mi">28</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Daniel&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">names_and_ages</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
<span class="p">{</span><span class="s1">&#39;Charlie&#39;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span> <span class="s1">&#39;Daniel&#39;</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="s1">&#39;Alice&#39;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">:</span> <span class="mi">48</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phonetic</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;alfa&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;bravo&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="s1">&#39;echo&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;foxtrot&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phonetic</span>
<span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;bravo&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;alfa&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;foxtrot&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s1">&#39;echo&#39;</span><span class="p">}</span>
<span class="c1"># copying dictionaries is also shallow</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">e</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># Extend a dictionary with update()</span>
<span class="n">f</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{key}</span><span class="s2"> = &gt; </span><span class="si">{value}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
<span class="c1"># if you want to iterate only over the values use values()</span>
<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># there is no efficient way to get the key corresponding to a value!!</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="c1"># iterable view onto keys - not often needed</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="c1"># adding to a dictionary and using prettyprint</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;H&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span>
<span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;H&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span>
<span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
 <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
 <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
 <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
 <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
 <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
 <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="set">
<h4>set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h4>
<p>set is an unordered collection of unique, immutable objects
looks like a dict but each item is a single object</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>empty {} create a dict so for empty set use the set() constructor</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="n">e</span>
<span class="nb">set</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">262144</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span> <span class="c1"># order is arbitrary</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">4096</span>
<span class="mi">64</span>
<span class="mi">2</span>
<span class="mi">65536</span>
<span class="mi">4</span>
<span class="mi">262144</span>
<span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="c1"># duplicates are discarded!</span>
<span class="c1"># so often used to remove duplicates - not order preserving</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">4096</span>
<span class="mi">64</span>
<span class="mi">2</span>
<span class="mi">65536</span>
<span class="mi">4</span>
<span class="mi">262144</span>
<span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span> <span class="ow">in</span> <span class="n">s</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">555</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="mi">2</span>
<span class="c1"># discard doesn&#39;t throw an error if item not present and so always succeeds</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">k</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># shallow copies</span>
<span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">n</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>

<span class="c1"># set algebra showcase</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Joshua&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">can_smell_hidrogencyanide</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">taste_ptc</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span> <span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Lola&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Josjua&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ab_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Lola&#39;</span><span class="p">}</span>
<span class="c1"># find people with blond hair, blue eyes or both -&gt; use union method</span>
<span class="c1"># is commutative</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span> <span class="o">==</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># find people with blond hair AND blue eyes -&gt; use intersection method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span> <span class="o">==</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># find people with blond hair who don&#39;t have blue eyes -&gt; use difference method</span>
<span class="c1"># non-commutative because people who have blue eyes but not blond hair is not the same</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Mia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span> <span class="o">==</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="kc">False</span>
<span class="c1"># exclusively blond hair OR blue_eyes but not both -&gt; symmetric_difference() method</span>
<span class="c1"># commutative</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span> <span class="o">==</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># 3 predicates to tell us about the relationship between sets</span>
<span class="c1"># check is one set is a subset of a set -&gt; issubset() method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">can_smell_hidrogencyanide</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># test if people who can taste ptc can also taste hydrogencyanide -&gt; use issuperset() method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">taste_ptc</span><span class="o">.</span><span class="n">issuperset</span><span class="p">(</span><span class="n">can_smell_hidrogencyanide</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># test that sets have no members in common -&gt; isdisjoint() method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a_blood</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">o_blood</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="collection-protocols">
<h4>collection protocols<a class="headerlink" href="#collection-protocols" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Protocol</p></th>
<th class="head"><p>Implementing Collections</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Container</p></td>
<td><p>str, list, range, tuple, set, bytes, dict</p></td>
</tr>
<tr class="row-odd"><td><p>Sized</p></td>
<td><p>str, list, range, tuple, set, bytes, dict</p></td>
</tr>
<tr class="row-even"><td><p>Iterable</p></td>
<td><p>str, list, range, tuple, set, bytes, dict</p></td>
</tr>
<tr class="row-odd"><td><p>Sequence</p></td>
<td><p>str, list, range, tuple, set, bytes</p></td>
</tr>
<tr class="row-even"><td><p>Mutable Sequence</p></td>
<td><p>list</p></td>
</tr>
<tr class="row-odd"><td><p>Mutable Set</p></td>
<td><p>set</p></td>
</tr>
<tr class="row-even"><td><p>Mutable Mapping</p></td>
<td><p>dict</p></td>
</tr>
</tbody>
</table>
<dl>
<dt>Protocols</dt><dd><ul class="simple">
<li><p>To implement a protocol, objects must support certain operations.</p></li>
<li><p>Most collections implement container , sized and iterable.</p></li>
<li><p>All except dict are sequences.</p></li>
</ul>
</dd>
<dt>Container Protocol</dt><dd><ul class="simple">
<li><p>Membership testing using in and not in</p></li>
</ul>
</dd>
<dt>Sized Protocol</dt><dd><ul class="simple">
<li><p>Determine number of elements with len(s)</p></li>
</ul>
</dd>
<dt>Iterable Protocol</dt><dd><ul>
<li><p>Can produce and iterator with iter(s)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
<p>Sequence Protocol</p>
<blockquote>
<div><ul class="simple">
<li><p>Retrieve elements by index
<cite>item = seq[index]</cite></p></li>
<li><p>Find items by value
<cite>index = seq.index(item)</cite></p></li>
<li><p>Count items
<cite>num = seq.count(item)</cite></p></li>
<li><p>Produce a reversed sequence
<cite>r = reversed(seq)</cite></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Collections Summary
- Tuples are immutable sequence types
- Literal syntax: optional parentheses around a comma separated list
- Single element tuples must use trailing comma</p></li>
<li><p>Tuple unpacking - return values and idiomatic swap
- Strings are immutable sequence types of Unicode codepoints
- String concatenation is most efficiently performed with join() on an empty separator
- The partition() method is a useful and elegant string parsing tool.
- The format() method provides a powerful way of replacing placeholders with values.</p></li>
<li><p>Ranges represent integer sequences with regular intervals
- Ranges are arithmetic progressions
- The enumerate() function is often a superior alternative to range()</p></li>
<li><p>Lists are heterogeneous mutable sequence types
- Negative indexes work backwards from the end.
- Slicing allows us to copy all or part of a list.
- The full slice is a common idiom for copying lists, although the copy() method and list() constructor are less obscure.
- List (and other collection) copies are shallow.
- List repetition is shallow.</p></li>
<li><p>Dictionaries map immutable keys to mutable values
- Iteration and membership testing is done with respect to the keys.
- Order is arbitrary
- The keys(), values() and items() methods provide views onto different aspects of a dictionary, allowing convenient iteration.</p></li>
<li><p>Sets store an unordered collection of unique elements
- Sets support powerful and expressive set algebra operations and predicates.</p></li>
<li><p>Protocols such as iterable, sequence and container characterise the collections.</p></li>
</ul>
</div>
</div>
<div class="section" id="handling-exceptions">
<h3>handling exceptions<a class="headerlink" href="#handling-exceptions" title="Permalink to this headline">¶</a></h3>
<p><strong>Raise</strong> an exception to interrupt program flow
<strong>Handle</strong> an exception to resume control
<strong>Unhandled exceptions</strong> will terminate the program
<strong>exception objects</strong> contain information about the exceptional event</p>
<div class="section" id="exception-and-control-flow">
<h4>exception and control flow<a class="headerlink" href="#exception-and-control-flow" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;A module for demonstrating exceptions.&#39;&#39;&#39;</span>

<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert to an integer.&#39;&#39;&#39;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># int contstructor will raise an exception upon entering a string</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="c1"># type of exception object</span>
<span class="c1"># ValueError: invalid literal for int() with base 10: &#39;somestring&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-raised-exceptions">
<h4>handling raised exceptions<a class="headerlink" href="#handling-raised-exceptions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span> <span class="c1"># try block contains code that can raise an exception</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># print(&quot;Conversion succeeded! x = &quot;, x) #  the print won&#39;t execute when the exception is raised</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span> <span class="c1"># except block performs error handling in the event an exception is raised</span>
        <span class="c1"># print(&quot;conversion failed!&quot;)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<p>Trying to convert a list with numbers will raise another exception
<cite>convert([4, 5, 6])</cite>
TypeError: int() argument must be a string, a bytes-like object or a number, not ‘list’</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the except statement excepts a tuple of exception types</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion succeeded! x =&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion failed!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div>
<div class="section" id="programmer-errors">
<h4>programmer errors<a class="headerlink" href="#programmer-errors" title="Permalink to this headline">¶</a></h4>
<p>IndentationError, SyntaxError and NameError are programmer errors and should be corrected during development</p>
<p>you can use pass when you have an empty except block</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<p>when you want to interrogate the exception object for more detail use as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion error: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="re-raising-exceptions">
<h4>re-raising exceptions<a class="headerlink" href="#re-raising-exceptions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion error: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">raise</span> <span class="c1"># instead of returning an unpythonic error code emit the error msg and reraise the exception object</span>


<span class="k">def</span> <span class="nf">string_log</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">log</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="exceptions-as-apis">
<h4>exceptions as APIs<a class="headerlink" href="#exceptions-as-apis" title="Permalink to this headline">¶</a></h4>
<p>Callers need to know what exceptions to expect and when</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Compute square roots using the method of Heron of Alexandria.</span>

<span class="sd">    Args:</span>
<span class="sd">        x: The number for which the square root is to be computed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The square root of x.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If x is negative.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot compute square root of negative number </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="n">guess</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">guess</span> <span class="o">*</span> <span class="n">guess</span> <span class="o">!=</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">guess</span> <span class="o">=</span> <span class="p">(</span><span class="n">guess</span> <span class="o">+</span> <span class="n">x</span> <span class="o">/</span> <span class="n">guess</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">guess</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is never printed.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Program execution continues normally here.&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it’s usually not worth checking types, this can limit your functions unnecessarily</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it’s Easier to Ask Forgiveness than Permission (example 2)</p>
</div>
<p>example1</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">p</span> <span class="o">=</span> <span class="s1">&#39;/path/to/datafile.dat&#39;</span>
<span class="c1"># only check for existence, what if file is garbage, what if path refers to dir instead of file</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">process_file</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No such file as </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
</pre></div>
</div>
<p>example2</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="s1">&#39;/path/to/datafile.dat&#39;</span>

<span class="c1"># no checks in advance</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">process_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Could not process file because </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</pre></div>
</div>
<p>Error codes require interspersed, local handling
Error codes are silent by default
Exceptions allow centralized, non-local handling
Exceptions require explicit handling</p>
<p>so we work with exceptions in python</p>
</div>
<div class="section" id="clean-up-actions">
<h4>clean-up actions<a class="headerlink" href="#clean-up-actions" title="Permalink to this headline">¶</a></h4>
<p>try…finally lets you clean up whether an exception occurs or not</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">make_at</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">):</span>
    <span class="n">original_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span> <span class="c1"># if this fails then</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">original_path</span><span class="p">)</span> <span class="c1"># this won&#39;t happen</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>finally-block is executed no matter how the try-block exits</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">make_at</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">):</span>
    <span class="n">original_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">original_path</span><span class="p">)</span> <span class="c1"># runs even if OSError is thrown and handled</span>
</pre></div>
</div>
</div>
<div class="section" id="platform-specific-code">
<h4>platform-specific code<a class="headerlink" href="#platform-specific-code" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;keypress - A module for detecting a single keypress.&quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">msvcrt</span>

    <span class="k">def</span> <span class="nf">getkey</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Wait for a keypress and return a single character string.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">msvcrt</span><span class="o">.</span><span class="n">getch</span><span class="p">()</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span> <span class="c1"># when importing the windos module fails, the error is silenced explicitely, if this fails it will not be silenced</span>

    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="kn">import</span> <span class="nn">tty</span>
    <span class="kn">import</span> <span class="nn">termios</span>

    <span class="k">def</span> <span class="nf">getkey</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Wait for a keypress and return a single character string.&quot;&quot;&quot;</span>
        <span class="n">fd</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">fileno</span><span class="p">()</span>
        <span class="n">original_attributes</span> <span class="o">=</span> <span class="n">termios</span><span class="o">.</span><span class="n">tcgetattr</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tty</span><span class="o">.</span><span class="n">setraw</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">termios</span><span class="o">.</span><span class="n">tcsetattr</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">termios</span><span class="o">.</span><span class="n">TCSADRAIN</span><span class="p">,</span> <span class="n">original_attributes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ch</span>

    <span class="c1"># If either of the Unix-specific tty or termios are not found,</span>
    <span class="c1"># we allow the ImportError to propagate from here</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="comprehensions-iterables-and-generators">
<h3>Comprehensions, iterables and generators<a class="headerlink" href="#comprehensions-iterables-and-generators" title="Permalink to this headline">¶</a></h3>
<div class="section" id="list-comprehensions">
<h4>list comprehensions<a class="headerlink" href="#list-comprehensions" title="Permalink to this headline">¶</a></h4>
<p>[ expr(item) for item in iterable ]
for each item in the iterable object on the right evaluate the expression on the left</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;Why&#39;</span><span class="p">,</span> <span class="s1">&#39;sometimes&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;have&#39;</span><span class="p">,</span> <span class="s1">&#39;believed&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span> <span class="s1">&#39;many&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span> <span class="s1">&#39;six&#39;</span><span class="p">,</span> <span class="s1">&#39;possible&#39;</span><span class="p">,</span> <span class="s1">&#39;things&#39;</span><span class="p">,</span> <span class="s1">&#39;before&#39;</span><span class="p">,</span> <span class="s1">&#39;breakfast&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">factorial</span>
<span class="n">f</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">]</span>
<span class="n">f</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="c1">#&lt;class &#39;list&#39;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="set-comprehensions">
<h4>set comprehensions<a class="headerlink" href="#set-comprehensions" title="Permalink to this headline">¶</a></h4>
<p>{ expr(item) for item in iterable }</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary-comprehensions">
<h4>dictionary comprehensions<a class="headerlink" href="#dictionary-comprehensions" title="Permalink to this headline">¶</a></h4>
<p>{ key_expr:value_expr for item in iterable }</p>
<p>If we want both the keys and the values we should use the items() method and then use tuple unpacking country, capital</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">country_to_capital</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;United Kingdom&#39;</span><span class="p">:</span> <span class="s1">&#39;London&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Brazil&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazilia&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Morocco&#39;</span><span class="p">:</span> <span class="s1">&#39;Rabat&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Sweden&#39;</span><span class="p">:</span> <span class="s1">&#39;Stockholm&#39;</span><span class="p">}</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="n">capital_to_country</span> <span class="o">=</span> <span class="p">{</span> <span class="n">capital</span><span class="p">:</span> <span class="n">country</span> <span class="k">for</span> <span class="n">country</span><span class="p">,</span> <span class="n">capital</span> <span class="ow">in</span> <span class="n">country_to_capital</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<span class="n">pp</span><span class="p">(</span><span class="n">capital_to_country</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Brazilia&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span>
 <span class="s1">&#39;London&#39;</span><span class="p">:</span> <span class="s1">&#39;United Kingdom&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Rabat&#39;</span><span class="p">:</span> <span class="s1">&#39;Morocco&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Stockholm&#39;</span><span class="p">:</span> <span class="s1">&#39;Sweden&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>duplicates: later keys overwrite earlier keys</p>
</div>
<p>e.g. only key  that begins with first letter x[0] store that word, duplicates will be gone</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hi&quot;</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;foxtrot&quot;</span><span class="p">,</span> <span class="s2">&quot;hotel&quot;</span><span class="p">]</span>
<span class="p">{</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">words</span> <span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="s1">&#39;hotel&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;foxtrot&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering-predicates">
<h4>filtering predicates<a class="headerlink" href="#filtering-predicates" title="Permalink to this headline">¶</a></h4>
<p>there is an optional filtering clause</p>
<p>[ expr(item) for item in iterable if predicate(item) ]</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">97</span><span class="p">]</span>

<span class="c1"># numbers with only 3 divisors</span>

<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="n">prime_square_divisors</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">:(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
<span class="n">pp</span><span class="p">(</span><span class="n">prime_square_divisors</span><span class="p">)</span>
<span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
 <span class="mi">9</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
 <span class="mi">25</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>
 <span class="mi">49</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">49</span><span class="p">),</span>
 <span class="mi">121</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">121</span><span class="p">),</span>
 <span class="mi">169</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">169</span><span class="p">),</span>
 <span class="mi">289</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">289</span><span class="p">),</span>
 <span class="mi">361</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">361</span><span class="p">),</span>
 <span class="mi">529</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">529</span><span class="p">),</span>
 <span class="mi">841</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">841</span><span class="p">),</span>
 <span class="mi">961</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">961</span><span class="p">),</span>
 <span class="mi">1369</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">1369</span><span class="p">),</span>
 <span class="mi">1681</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">1681</span><span class="p">),</span>
 <span class="mi">1849</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">1849</span><span class="p">),</span>
 <span class="mi">2209</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">2209</span><span class="p">),</span>
 <span class="mi">2809</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">2809</span><span class="p">),</span>
 <span class="mi">3481</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">3481</span><span class="p">),</span>
 <span class="mi">3721</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">3721</span><span class="p">),</span>
 <span class="mi">4489</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">4489</span><span class="p">),</span>
 <span class="mi">5041</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">5041</span><span class="p">),</span>
 <span class="mi">5329</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">5329</span><span class="p">),</span>
 <span class="mi">6241</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">6241</span><span class="p">),</span>
 <span class="mi">6889</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">6889</span><span class="p">),</span>
 <span class="mi">7921</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">7921</span><span class="p">),</span>
 <span class="mi">9409</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">9409</span><span class="p">)}</span>
</pre></div>
</div>
</div>
<div class="section" id="iteration-protocols">
<h4>iteration protocols<a class="headerlink" href="#iteration-protocols" title="Permalink to this headline">¶</a></h4>
<p><strong>iterable protocol</strong>
iterable objects can be passed to the built-in <cite>iter()</cite> function to get an iterator</p>
<p>iterator = iter(iterable)
<strong>iterator protocol</strong>
Iterator objects can be passed to the built-in <cite>next()</cite> function to fetch the next item.
item = next(iterator)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="s1">&#39;Autumn&#39;</span><span class="p">,</span> <span class="s1">&#39;Winter&#39;</span><span class="p">]</span>
<span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Spring&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Summer&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Autumn&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Winter&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="c1">#  StopIteration</span>


<span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;iterable is empty&quot;</span><span class="p">)</span>

<span class="n">first</span><span class="p">([</span><span class="s2">&quot;1st&quot;</span><span class="p">,</span> <span class="s2">&quot;2nd&quot;</span><span class="p">,</span> <span class="s2">&quot;3rd&quot;</span><span class="p">])</span>
<span class="s1">&#39;1st&#39;</span>
<span class="n">first</span><span class="p">([</span><span class="s2">&quot;1st&quot;</span><span class="p">,</span> <span class="s2">&quot;2nd&quot;</span><span class="p">,</span> <span class="s2">&quot;3rd&quot;</span><span class="p">])</span>
<span class="s1">&#39;1st&#39;</span>
<span class="n">first</span><span class="p">(</span><span class="nb">set</span><span class="p">())</span>
<span class="c1">#Traceback (most recent call last):</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 4, in first</span>
<span class="c1">#StopIteration</span>
<span class="c1">#</span>
<span class="c1">#During handling of the above exception, another exception occurred:</span>
<span class="c1">#</span>
<span class="c1">#Traceback (most recent call last):</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 6, in first</span>
<span class="c1">#ValueError: iterable is empty</span>
</pre></div>
</div>
</div>
<div class="section" id="generators">
<h4>generators<a class="headerlink" href="#generators" title="Permalink to this headline">¶</a></h4>
<dl class="simple">
<dt>specify iterable sequences</dt><dd><ul class="simple">
<li><p>all generators are iterators</p></li>
</ul>
</dd>
<dt>are lazily evaluated</dt><dd><ul class="simple">
<li><p>they only computate the next value on demand</p></li>
</ul>
</dd>
<dt>can model infinite sequences</dt><dd><ul class="simple">
<li><p>such as data streams from a sensor with no definite end</p></li>
</ul>
</dd>
<dt>are composable into pipelines</dt><dd><ul class="simple">
<li><p>for natural stream processing</p></li>
</ul>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen123</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="k">yield</span> <span class="mi">3</span>
    <span class="c1"># return</span>
    <span class="c1"># implicit return at the end</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">gen123</span><span class="p">()</span>
<span class="n">g</span>
<span class="c1"># &lt;generator object gen123 at 0x7f3f662e8fc0&gt;</span>
<span class="c1"># pass the generator to the function</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">1</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">2</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">3</span>
<span class="c1"># now StopIteration exception</span>
<span class="c1">#</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="c1">#   StopIteration</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">gen123</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="c1"># remember each call to function creates a new generator object</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">gen123</span><span class="p">()</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">gen123</span><span class="p">()</span>
<span class="n">h</span>
<span class="c1">#generator object gen123 at 0x7f3f66302048&gt;</span>
<span class="n">i</span>
<span class="c1">#generator object gen123 at 0x7f3f663020a0&gt;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen246</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;about to yield 2&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;about to yield 4&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">4</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;about to yield 6&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">6</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">gen246</span><span class="p">()</span> <span class="c1"># generator = created and returned but non of the code has yet been executed</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="s2">&quot;about to yield 2&quot;</span>
<span class="mi">2</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="c1"># generator resumes at the point we left off</span>
<span class="s2">&quot;about to yield 4&quot;</span>
<span class="mi">2</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="s2">&quot;about to yield 6&quot;</span>
<span class="mi">6</span>
</pre></div>
</div>
</div>
<div class="section" id="stateful-generators">
<h4>stateful generators<a class="headerlink" href="#stateful-generators" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Generators resume execution</p></li>
<li><p>Can maintain state in local variables</p></li>
<li><p>Complex control flow</p></li>
<li><p>Lazy evaluation</p></li>
</ul>
<p>take generator</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">take</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Take items from the front of an iterable.</span>

<span class="sd">    Args:</span>
<span class="sd">        count: maximum number of items to retrieve</span>
<span class="sd">        iterable: the source series</span>

<span class="sd">    Yields:</span>
<span class="sd">         at most &#39;count&#39; items from &#39;iterable&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="n">count</span><span class="p">:</span>
            <span class="k">return</span> <span class="c1"># end sequence when we reach specified count</span>
            <span class="c1"># return raises StopIteration which is caught internally by the for loop in run_take()</span>
        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># how many items have been yielded so far</span>
        <span class="k">yield</span> <span class="n">item</span> <span class="c1"># contains a generator bc it has at least one yield statement</span>


<span class="k">def</span> <span class="nf">run_take</span><span class="p">():</span> <span class="c1"># generators are lazy and only generate values on request</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>  <span class="c1"># take(count, iterable) # return raises StopIteration which is caught by</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
        <span class="n">run_take</span><span class="p">()</span>
</pre></div>
</div>
<p>distinct generator</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2nd generator</span>
<span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return unique items by eliminating duplicates</span>

<span class="sd">    Args:</span>
<span class="sd">        iterable: source series</span>

<span class="sd">    Yields:</span>
<span class="sd">        Unique elements in order from &#39;iterable&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">continue</span> <span class="c1"># finishes current iteration of the loop an begins next iteration immediately!</span>
            <span class="c1"># execution will be transferred back to the for statement to begin next iteration</span>
        <span class="k">yield</span> <span class="n">item</span>
        <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="c1"># next call from for loop in run_distinct() will resume here with remembered</span>
        <span class="c1"># item 5 just yielded</span>
        <span class="c1"># and then moves up to beginning of for loop again where item is reassigned to second value 7</span>

<span class="k">def</span> <span class="nf">run_distinct</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">distinct</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">run_distinct</span><span class="p">()</span>
</pre></div>
</div>
<p>both combined in pipeline</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">take</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="n">count</span><span class="p">:</span>
            <span class="k">return</span> <span class="c1"># end sequence when we reach specified count</span>
            <span class="c1"># return raises StopIteration which is caught internally by the for loop in run_take()</span>
        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># how many items have been yielded so far</span>
        <span class="k">yield</span> <span class="n">item</span> <span class="c1"># contains a generator bc it has at least one yield statement</span>


<span class="k">def</span> <span class="nf">run_take</span><span class="p">():</span> <span class="c1"># generators are lazy and only generate values on request</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>  <span class="c1"># take(count, iterable) # return raises StopIteration which is caught by</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c1"># 2nd generator</span>
<span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">continue</span> <span class="c1"># finishes current iteration of the loop an begins next iteration immediately!</span>
            <span class="c1"># execution will be transferred back to the for statement to begin next iteration</span>
        <span class="k">yield</span> <span class="n">item</span>
        <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="c1"># next call from for loop in run_distinct() will resume here with first item 5</span>
        <span class="c1"># and then moves up to beginning of for loop again with second item 7</span>

<span class="k">def</span> <span class="nf">run_distinct</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">distinct</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">run_pipeline</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">distinct</span><span class="p">(</span><span class="n">items</span><span class="p">)):</span> <span class="c1"># distinct must run first to produce the iterator object argument for take</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">run_pipeline</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="laziness-and-infinite">
<h5>laziness and infinite<a class="headerlink" href="#laziness-and-infinite" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Just in Time Computation</p></li>
<li><p>Infinite (or large) sequences
• sensor readings
• mathematical series
• massive files</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lucas</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span> <span class="c1"># infinite while loop</span>
        <span class="k">yield</span> <span class="n">b</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lucas</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># this will run forever until you pc runs out of memory but demonstrates nicely</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generator-comprehensions">
<h4>generator comprehensions<a class="headerlink" href="#generator-comprehensions" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>similar syntax to list comprehensions</p></li>
<li><p>create a generator object</p></li>
<li><p>concise</p></li>
<li><p>lazy evaluation</p></li>
</ul>
<p>(expr(item) for item in iterable)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">million_squares</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000001</span><span class="p">))</span> <span class="c1"># creates a generator object</span>
<span class="nb">list</span><span class="p">(</span><span class="n">million_squares</span><span class="p">)</span> <span class="c1"># force evaluation of the generator by using it to create a list</span>
<span class="nb">list</span><span class="p">(</span><span class="n">million_squares</span><span class="p">)</span>
<span class="p">[]</span> <span class="c1"># repeating it = empty, generators are single use objects!</span>
<span class="c1"># each time we call a generator function, we create a generator object</span>
<span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000001</span><span class="p">))</span> <span class="c1"># sum of first 10mil squares, using a list comprehencsion would take 400MB!</span>
<span class="mi">333333833333500000</span>

<span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000001</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">17</span><span class="p">)</span> <span class="c1"># with optional if condition</span>
<span class="mi">313726019609411764</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>we didn’t have to use extra parentheses to put a generator comprehension wihtin sum(), this improves readability</p>
</div>
</div>
<div class="section" id="using-itertools">
<h4>using itertools<a class="headerlink" href="#using-itertools" title="Permalink to this headline">¶</a></h4>
<p>list of iteration tools in python: <a class="reference external" href="https://docs.python.org/3/library/itertools.html">https://docs.python.org/3/library/itertools.html</a></p>
<p>using islice and count</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span><span class="p">,</span> <span class="n">count</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>


<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># do this thousand_primes = islice(all_primes, 1000) but how to generate all primes</span>
<span class="c1"># ranges must always be finite, we need an open ended version of range and that is what count() does</span>
<span class="c1"># thousand_primes = islice((x for x in count() if is_prime(x)), 1000) # with islice() like with lists</span>

<span class="nb">sum</span><span class="p">(</span><span class="n">islice</span><span class="p">((</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">count</span><span class="p">()</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="mi">1000</span><span class="p">))</span>
<span class="mi">3682913</span>
</pre></div>
</div>
<p>using any(or) and all(and) for iterable series of bool values</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">any</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="kc">True</span>
<span class="nb">all</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="kc">False</span>

<span class="c1"># Are there any prime numbers between 1328 and 1361?</span>
<span class="nb">any</span><span class="p">(</span><span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1328</span><span class="p">,</span> <span class="mi">1361</span><span class="p">))</span>
<span class="kc">False</span>

<span class="c1"># title() converts first character to uppercase</span>
<span class="c1"># check if all city names have capital letters</span>
<span class="nb">all</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;London&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;Sydney&#39;</span><span class="p">])</span>
<span class="kc">True</span>

<span class="c1"># syncronize iterations over 2 iterable series</span>
<span class="c1"># eg two  series of temperature data</span>
<span class="n">sunday</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="n">monday</span> <span class="o">=</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>
<span class="c1"># bind them in pairs of corresponding readings</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
<span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
<span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
<span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
<span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>

<span class="c1"># zip yields tuples when iterated</span>
<span class="c1"># we can take advantage of this with tuple unpacking in the for loop</span>
<span class="k">for</span> <span class="n">sun</span><span class="p">,</span> <span class="n">mon</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;average =&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">sun</span> <span class="o">+</span> <span class="n">mon</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">average</span> <span class="o">=</span> <span class="mf">12.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">14.0</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">14.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">14.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">16.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">20.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">21.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">22.0</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">22.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">21.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">19.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">17.5</span>

<span class="n">tuesday</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>

<span class="k">for</span> <span class="n">temps</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">,</span> <span class="n">tuesday</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;min=</span><span class="si">{:4.1f}</span><span class="s2">, max=</span><span class="si">{:4.1f}</span><span class="s2">, average=</span><span class="si">{:4.1f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">temps</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">temps</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">temps</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">temps</span><span class="p">)))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">min= 2.0, max=13.0, average= 9.0</span>
<span class="sd">min= 2.0, max=14.0, average=10.0</span>
<span class="sd">min= 3.0, max=15.0, average=10.7</span>
<span class="sd">min= 7.0, max=15.0, average=12.0</span>
<span class="sd">min= 9.0, max=17.0, average=14.0</span>
<span class="sd">min=10.0, max=21.0, average=17.0</span>
<span class="sd">min= 9.0, max=22.0, average=17.3</span>
<span class="sd">min= 8.0, max=22.0, average=17.3</span>
<span class="sd">min= 8.0, max=23.0, average=17.7</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># now we want one long temperature series for sunday monday and thuesday</span>
<span class="c1"># we can then lazily concatenate iterables using itertools chain</span>
<span class="c1"># this is different from simply concatenating 3 lists into a new list</span>
<span class="c1"># we have no memory impact of data duplication</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="n">temperatures</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">,</span> <span class="n">tuesday</span><span class="p">)</span>

<span class="nb">all</span><span class="p">(</span><span class="n">t</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">temperatures</span><span class="p">)</span>
<span class="n">temperatures</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">,</span> <span class="n">tuesday</span><span class="p">)</span>
<span class="kc">True</span>

<span class="c1"># following shows generator functions, generator expressions, predicate functions and for loops</span>
<span class="k">def</span> <span class="nf">lucas</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span> <span class="c1"># infinite while loop</span>
        <span class="k">yield</span> <span class="n">b</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">lucas</span><span class="p">()</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">7</span>
<span class="mi">11</span>
<span class="mi">29</span>
<span class="mi">47</span>
<span class="mi">199</span>
<span class="mi">521</span>
<span class="mi">2207</span>
<span class="mi">3571</span>
<span class="mi">9349</span>
<span class="mi">3010349</span>
<span class="mi">54018521</span>
<span class="mi">370248451</span>
<span class="mi">6643838879</span>
<span class="mi">119218851371</span>
<span class="mi">5600748293801</span>
<span class="mi">688846502588399</span>
<span class="mi">32361122672259149</span>


<span class="sd">&quot;&quot;&quot; itertools.chain(*iterables)</span>
<span class="sd">Make an iterator that returns elements from the first iterable until it is exhausted, then proceeds to the next iterable, until all of the iterables are exhausted. Used for treating consecutive sequences as a single sequence</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.python.org/3/library/itertools.html#itertools.chain">https://docs.python.org/3/library/itertools.html#itertools.chain</a></p>
</div>
<div class="section" id="summary-comprehensions-generators">
<h4>summary comprehensions generators<a class="headerlink" href="#summary-comprehensions-generators" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Comprehensions
- Comprehensions are a concise syntax for describing lists, sets and dictionaries.
- Comprehensions operate on an iterable source object and apply an optional predicate filter and a mandatory expression, both of which are usually in terms of the current item.
- Iterables are objects over which we can iterate item by item.
- We retrieve an iterator from an iterable object using the built-in iter() function.
- Iterators produce items one-by-one-from the underlying iterable series each time they are passed to the built-in next() function</p></li>
<li><p>Generators
- Generator functions allow us to describe series using imperative code.
- Generator functions contain at least one use of the yield keyword.
- Generators are iterators. When advanced with next() the generator starts or resumes execution up to and including the next yield.
- Each call to a generator function creates a new generator object.
- Generators can maintain explicit state in local variables between iterations.
- Generators are lazy, and so can model infinite series of data.
- Generator expressions have a similar syntactic form to list comprehensions and allow for a more declarative and concise way of creating generator objects.</p></li>
</ul>
<p>list of iteration tools in python: <a class="reference external" href="https://docs.python.org/3/library/itertools.html">https://docs.python.org/3/library/itertools.html</a></p>
</div>
</div>
<div class="section" id="classes">
<h3>classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>self: the first argument to all instance methods
__init__() instance method for initializing new objects</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>__init__() is an initializer, not a constructor, self is similar to this. __init__() is to configure an object that already exists by the time it is called</p>
</div>
<p>why self._number?</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>avoid name clash with number()</p></li>
<li><p>implementation details of objects start with _</p></li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>using objects of different types through a common interface = polymorphism</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Model for aircraft flights.&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">Flight</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A flight with a particular passenger aircraft.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">aircraft</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">isalpha</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No airline code in &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">isupper</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid airline code &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span> <span class="o">&lt;=</span> <span class="mi">9999</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid route number &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span> <span class="o">=</span> <span class="n">aircraft</span>

        <span class="n">rows</span><span class="p">,</span> <span class="n">seats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span> <span class="p">{</span><span class="n">letter</span><span class="p">:</span><span class="kc">None</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">seats</span><span class="p">}</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">rows</span> <span class="p">]</span>

    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span>

    <span class="k">def</span> <span class="nf">airline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">aircraft_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">allocate_seat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">passenger</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allocate a seat to a passenger.</span>

<span class="sd">        Args:</span>
<span class="sd">            seat: A seat designator such as &#39;12C&#39; or &#39;21F&#39;.</span>
<span class="sd">            passenger: The passenger name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the seat is unavailable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rows</span><span class="p">,</span> <span class="n">seat_letters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>

        <span class="n">letter</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">letter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seat_letters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat letter </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">letter</span><span class="p">))</span>

        <span class="n">row_text</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row_text</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat row </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_text</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid row number </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Seat </span><span class="si">{}</span><span class="s2"> is already occupied.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">seat</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="o">=</span> <span class="n">passenger</span>

    <span class="k">def</span> <span class="nf">_parse_seat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse a seat designator into a valid row and letter.</span>

<span class="sd">        Args:</span>
<span class="sd">            seat: A seat designator such as 12F</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple containing an integer and a string for row and seat.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">row_numbers</span><span class="p">,</span> <span class="n">seat_letters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>

        <span class="n">letter</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">letter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seat_letters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat letter </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">letter</span><span class="p">))</span>

        <span class="n">row_text</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row_text</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat row </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_text</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">row_numbers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid row number </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">row</span><span class="p">,</span> <span class="n">letter</span>

    <span class="k">def</span> <span class="nf">allocate_seat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">passenger</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allocate a seat to a passenger.</span>

<span class="sd">        Args:</span>
<span class="sd">            seat: A seat designator such as &#39;12C&#39; or &#39;21F&#39;.</span>
<span class="sd">            passenger: The passenger name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the seat is unavailable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">row</span><span class="p">,</span> <span class="n">letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_seat</span><span class="p">(</span><span class="n">seat</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Seat </span><span class="si">{}</span><span class="s2"> already occupied&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">seat</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="o">=</span> <span class="n">passenger</span>

    <span class="k">def</span> <span class="nf">relocate_passenger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_seat</span><span class="p">,</span> <span class="n">to_seat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Relocate a passenger to a different seat.</span>

<span class="sd">        Args:</span>
<span class="sd">            from_seat: The existing seat designator for the</span>
<span class="sd">                       passenger to be moved.</span>

<span class="sd">            to_seat: The new seat designator.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">from_row</span><span class="p">,</span> <span class="n">from_letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_seat</span><span class="p">(</span><span class="n">from_seat</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">from_row</span><span class="p">][</span><span class="n">from_letter</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No passenger to relocate in seat </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">from_seat</span><span class="p">))</span>

        <span class="n">to_row</span><span class="p">,</span> <span class="n">to_letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_seat</span><span class="p">(</span><span class="n">to_seat</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">to_row</span><span class="p">][</span><span class="n">to_letter</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Seat </span><span class="si">{}</span><span class="s2"> already occupied&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">to_seat</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">to_row</span><span class="p">][</span><span class="n">to_letter</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">from_row</span><span class="p">][</span><span class="n">from_letter</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">from_row</span><span class="p">][</span><span class="n">from_letter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">num_available_seats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_boarding_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card_printer</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">passenger</span><span class="p">,</span> <span class="n">seat</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_passenger_seats</span><span class="p">()):</span>
            <span class="n">card_printer</span><span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">aircraft_model</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_passenger_seats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterable series of passenger seating allocations.&quot;&quot;&quot;</span>
        <span class="n">row_numbers</span><span class="p">,</span> <span class="n">seat_letters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">row_numbers</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">seat_letters</span><span class="p">:</span>
                <span class="n">passenger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">passenger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">letter</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Aircraft</span><span class="p">:</span>
      <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registration</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_registration</span> <span class="o">=</span> <span class="n">registration</span>

      <span class="k">def</span> <span class="nf">registration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registration</span>

      <span class="k">def</span> <span class="nf">num_seats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="n">rows</span><span class="p">,</span> <span class="n">row_seats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>
          <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">row_seats</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">AirbusA319</span><span class="p">(</span><span class="n">Aircraft</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="k">return</span> <span class="s2">&quot;Airbus A319&quot;</span>

      <span class="k">def</span> <span class="nf">seating_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="k">return</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span> <span class="s2">&quot;ABCDEF&quot;</span>


<span class="k">class</span> <span class="nc">Boeing777</span><span class="p">(</span><span class="n">Aircraft</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Boeing 777&quot;</span>

    <span class="k">def</span> <span class="nf">seating_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># For simplicity&#39;s sake, we ignore complex</span>
        <span class="c1"># seating arrangement for first-class</span>
        <span class="k">return</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">56</span><span class="p">),</span> <span class="s2">&quot;ABCDEGHJK&quot;</span>


<span class="k">def</span> <span class="nf">make_flights</span><span class="p">():</span>
      <span class="n">f</span> <span class="o">=</span> <span class="n">Flight</span><span class="p">(</span><span class="s2">&quot;BA758&quot;</span><span class="p">,</span> <span class="n">AirbusA319</span><span class="p">(</span><span class="s2">&quot;G-EUPT&quot;</span><span class="p">))</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;12A&#39;</span><span class="p">,</span> <span class="s1">&#39;Guido van Rossum&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;15F&#39;</span><span class="p">,</span> <span class="s1">&#39;Bjarne Stroustrup&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;15E&#39;</span><span class="p">,</span> <span class="s1">&#39;Anders Hejlsberg&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;1C&#39;</span><span class="p">,</span> <span class="s1">&#39;John McCarthy&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;1D&#39;</span><span class="p">,</span> <span class="s1">&#39;Richard Hickey&#39;</span><span class="p">)</span>

      <span class="n">g</span> <span class="o">=</span> <span class="n">Flight</span><span class="p">(</span><span class="s2">&quot;AF72&quot;</span><span class="p">,</span> <span class="n">Boeing777</span><span class="p">(</span><span class="s2">&quot;F-GSPS&quot;</span><span class="p">))</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;55K&#39;</span><span class="p">,</span> <span class="s1">&#39;Larry Wall&#39;</span><span class="p">)</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;33G&#39;</span><span class="p">,</span> <span class="s1">&#39;Yukihiro Matsumoto&#39;</span><span class="p">)</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;4B&#39;</span><span class="p">,</span> <span class="s1">&#39;Brian Kernighan&#39;</span><span class="p">)</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;4A&#39;</span><span class="p">,</span> <span class="s1">&#39;Dennis Ritchie&#39;</span><span class="p">)</span>

      <span class="k">return</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span>


<span class="k">def</span> <span class="nf">console_card_printer</span><span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">flight_number</span><span class="p">,</span> <span class="n">aircraft</span><span class="p">):</span>
      <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;| Name: </span><span class="si">{0}</span><span class="s2">&quot;</span>     \
               <span class="s2">&quot;  Flight: </span><span class="si">{1}</span><span class="s2">&quot;</span>   \
               <span class="s2">&quot;  Seat: </span><span class="si">{2}</span><span class="s2">&quot;</span>     \
               <span class="s2">&quot;  Aircraft: </span><span class="si">{3}</span><span class="s2">&quot;</span> \
               <span class="s2">&quot; |&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="n">flight_number</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">aircraft</span><span class="p">)</span>
      <span class="n">banner</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span>
      <span class="n">border</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span>
      <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">banner</span><span class="p">,</span> <span class="n">border</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">border</span><span class="p">,</span> <span class="n">banner</span><span class="p">]</span>
      <span class="n">card</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="summary-classes">
<h4>summary classes<a class="headerlink" href="#summary-classes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>All types in Python have a ‘class’</p></li>
<li><p>Classes define the structure and behavior of an object</p></li>
<li><p>Class is determined when object is created
- normally fixed for the lifetime</p></li>
<li><p>Classes are the key support for Object-Oriented Programming in Python</p></li>
<li><p>Classes defined using the class keyword followed by CamelCase name</p></li>
<li><p>Class instances created by calling the class as if it were a function</p></li>
<li><p>Instance methods are functions defined inside the class
- Should accept an object instance called self as the first parameter</p></li>
<li><p>Methods are called using instance.method()
- Syntactic sugar for passing self instance to method</p></li>
<li><p>The optional __init__() method initialized new instances
- If present, the constructor calls __init__()
- __init__() is not the constructor</p></li>
<li><p>Arguments passed to the constructor are forwarded to the initializer</p></li>
<li><p>Instance attributes are created simply by assigning to them</p></li>
<li><p>Implementation details are denoted by a leading underscore
- There are no public, protected or private access modifiers in Python</p></li>
<li><p>Accessing implementation details can be very useful
- Especially during development and debugging</p></li>
<li><p>Class invariants should be established in the initializer
- If the invariants can’t be established raise exceptions to signal failure</p></li>
<li><p>Methods can have docstrings, just like regular functions</p></li>
<li><p>Classes can have docstrings</p></li>
<li><p>Even within an object method calls must be preceded with self</p></li>
<li><p>You can have as many classes and functions in a module as you wish
- Related classes and global functions are usually grouped together this way</p></li>
<li><p>Polymorphism in Python is achieved through duck typing</p></li>
<li><p>Polymorphism in Python does not use shared base classes or interfaces</p></li>
<li><p>Class inheritance is primarily useful for sharing implementation</p></li>
<li><p>All methods are inherited, including special methods like the initializer</p></li>
<li><p>Strings support slicing, because they implement the sequence protocol</p></li>
<li><p>Following the Law of Demeter can reduce coupling</p></li>
<li><p>We can nest comprehensions</p></li>
<li><p>It can sometimes be useful to discard the current item in a comprehension</p></li>
<li><p>When dealing with one-based collections it’s often easier just to waste one</p></li>
<li><p>list entry.</p></li>
<li><p>Don’t feel compelled to use classes when a simple function will suffice</p></li>
<li><p>Comprehensions or generator expression can be split over multiple lines</p></li>
<li><p>Statements can be split over multiple lines using backslash
- Use this feature sparingly and only when it improves readability</p></li>
<li><p>Use “Ask! Don’t tell.” to avoid tight coupling between objects</p></li>
</ul>
</div>
</div>
<div class="section" id="recursion">
<h3>recursion<a class="headerlink" href="#recursion" title="Permalink to this headline">¶</a></h3>
<p>Solve problems that can be broken up into sub-problems of the same type</p>
<ul class="simple">
<li><p>5! (5 factorial) is 5 * 4 * 3 * 2 * 1 (120)</p></li>
<li><p><cite>n! = n * (n-1)!</cite></p></li>
<li><p><strong>BASE CASE: 1! = 1</strong> -&gt; can be calculated without performing any more factorial function calls</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The base case acts as the exit condition of the recursion</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># base case</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1"># 120</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;fibonacci&quot;&quot;&quot;</span>
<span class="k">def</span> <span class="nf">fibo</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>  <span class="c1"># returns 0 &amp; 1&#39;s</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fibo</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibo</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>


<span class="n">number</span> <span class="o">=</span> <span class="mi">6</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fibo</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">power</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c1"># 8</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Recursion can also be indirect. One function can call a second, which calls the first, which calls the second, and so on. This can occur with any number of functions</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">is_odd</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">is_odd</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="n">is_even</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># not! else will also return True when odd</span>


<span class="n">is_even</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>  <span class="c1"># False</span>
<span class="n">is_even</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="c1"># True</span>
<span class="n">is_odd</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>  <span class="c1"># True</span>
</pre></div>
</div>
</div>
<div class="section" id="files-and-resource-management">
<h3>files and resource management<a class="headerlink" href="#files-and-resource-management" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>open(file, mode, encoding)</dt><dd><ul class="simple">
<li><p>file: path to file (required)</p></li>
<li><p>mode: read/write/append, binary/text</p></li>
<li><p>encoding: text encoding</p></li>
</ul>
</dd>
</dl>
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#open">https://docs.python.org/3/library/functions.html#open</a></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Character</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘r’</p></td>
<td><p>open for reading (default)</p></td>
</tr>
<tr class="row-odd"><td><p>‘w’</p></td>
<td><p>open for writing, truncating the file first</p></td>
</tr>
<tr class="row-even"><td><p>‘x’</p></td>
<td><p>open for exclusive creation, failing if the file already exists</p></td>
</tr>
<tr class="row-odd"><td><p>‘a’</p></td>
<td><p>open for writing, appending to the end of the file if it exists</p></td>
</tr>
<tr class="row-even"><td><p>‘b’</p></td>
<td><p>binary mode</p></td>
</tr>
<tr class="row-odd"><td><p>‘t’</p></td>
<td><p>text mode (default)</p></td>
</tr>
<tr class="row-even"><td><p>‘+’</p></td>
<td><p>open a disk file for updating (reading and writing)</p></td>
</tr>
<tr class="row-odd"><td><p>‘U’</p></td>
<td><p>universal newlines mode (deprecated)</p></td>
</tr>
</tbody>
</table>
<p>write() returns the number of codepoints, not the number of characters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rt&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="section" id="zip-files">
<h4>zip files<a class="headerlink" href="#zip-files" title="Permalink to this headline">¶</a></h4>
<div class="section" id="read-zip-as-panda-df">
<h5>read zip as panda df<a class="headerlink" href="#read-zip-as-panda-df" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># import required modules</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># read the dataset using the compression zip</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;test.zip&#39;</span><span class="p">,</span><span class="n">compression</span><span class="o">=</span><span class="s1">&#39;zip&#39;</span><span class="p">)</span>

<span class="c1"># display dataset</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>


<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># oppen zipped dataset</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="s2">&quot;test.zip&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">z</span><span class="p">:</span>
   <span class="c1"># open the csv file in the dataset</span>
   <span class="k">with</span> <span class="n">z</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>

      <span class="c1"># read the dataset</span>
      <span class="n">train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

      <span class="c1"># display dataset</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json">
<h4>json<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h4>
<div class="section" id="read">
<h5>read<a class="headerlink" href="#read" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Python program to read JSON</span>
<span class="c1"># from a file</span>

<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># Opening JSON file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;sample.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">openfile</span><span class="p">:</span>

    <span class="c1"># Reading from json file</span>
    <span class="n">json_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">openfile</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">json_object</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">json_object</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="write">
<h5>write<a class="headerlink" href="#write" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Python program to write JSON</span>
<span class="c1"># to a file</span>


<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># Data to be written</span>
<span class="n">dictionary</span> <span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;sathiyajith&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rollno&quot;</span> <span class="p">:</span> <span class="mi">56</span><span class="p">,</span>
    <span class="s2">&quot;cgpa&quot;</span> <span class="p">:</span> <span class="mf">8.6</span><span class="p">,</span>
    <span class="s2">&quot;phonenumber&quot;</span> <span class="p">:</span> <span class="s2">&quot;9976770500&quot;</span>
<span class="p">}</span>

<span class="c1"># Serializing json</span>
<span class="n">json_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>

<span class="c1"># Writing to sample.json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sample.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json_object</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sample.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="update">
<h5>update<a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Python program to update</span>
<span class="c1"># JSON</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># JSON data:</span>
<span class="n">x</span> <span class="o">=</span>  <span class="s1">&#39;{ &quot;organization&quot;:&quot;GeeksForGeeks&quot;,</span>
        <span class="s2">&quot;city&quot;</span><span class="p">:</span><span class="s2">&quot;Noida&quot;</span><span class="p">,</span>
        <span class="s2">&quot;country&quot;</span><span class="p">:</span><span class="s2">&quot;India&quot;</span><span class="p">}</span><span class="s1">&#39;</span>

<span class="c1"># python object to be appended</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pin&quot;</span><span class="p">:</span><span class="mi">110096</span><span class="p">}</span>

<span class="c1"># parsing JSON string:</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># appending the data</span>
<span class="n">z</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># the result is a JSON string:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>


<span class="c1"># Python program to update</span>
<span class="c1"># JSON</span>
<span class="kn">import</span> <span class="nn">json</span>


<span class="c1"># function to add to JSON</span>
<span class="k">def</span> <span class="nf">write_json</span><span class="p">(</span><span class="n">new_data</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;data.json&#39;</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s1">&#39;r+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
          <span class="c1"># First we load existing data into a dict.</span>
        <span class="n">file_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="c1"># Join new_dat3a with file_data</span>
        <span class="n">file_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_data</span><span class="p">)</span>
        <span class="c1"># Sets file&#39;s current position at offset.</span>
        <span class="n">file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># convert back to json.</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">file_data</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>

    <span class="c1"># python object to be appended</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;emp_name&quot;</span><span class="p">:</span><span class="s1">&#39;Nikhil&#39;</span><span class="p">,</span>
     <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;nikhil@geeksforgeeks.org&quot;</span><span class="p">,</span>
     <span class="s2">&quot;job_profile&quot;</span><span class="p">:</span> <span class="s2">&quot;Full Time&quot;</span>
    <span class="p">}</span>

<span class="n">write_json</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="csv">
<h4>csv<a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># importing the csv module</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="c1"># field names</span>
<span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Branch&#39;</span><span class="p">,</span> <span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;CGPA&#39;</span><span class="p">]</span>

<span class="c1"># data rows of csv file</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;Nikhil&#39;</span><span class="p">,</span> <span class="s1">&#39;COE&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;9.0&#39;</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Sanchit&#39;</span><span class="p">,</span> <span class="s1">&#39;COE&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;9.1&#39;</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Aditya&#39;</span><span class="p">,</span> <span class="s1">&#39;IT&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;9.3&#39;</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Sagar&#39;</span><span class="p">,</span> <span class="s1">&#39;SE&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;9.5&#39;</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Prateek&#39;</span><span class="p">,</span> <span class="s1">&#39;MCE&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;7.8&#39;</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Sahil&#39;</span><span class="p">,</span> <span class="s1">&#39;EP&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;9.1&#39;</span><span class="p">]]</span>

<span class="c1"># name of csv file</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;university_records.csv&quot;</span>

<span class="c1"># writing to csv file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
    <span class="c1"># creating a csv writer object</span>
    <span class="n">csvwriter</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>

    <span class="c1"># writing the fields</span>
    <span class="n">csvwriter</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>

    <span class="c1"># writing the data rows</span>
    <span class="n">csvwriter</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># importing the csv module</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="c1"># my data rows as dictionary objects</span>
<span class="n">mydict</span> <span class="o">=</span><span class="p">[{</span><span class="s1">&#39;branch&#39;</span><span class="p">:</span> <span class="s1">&#39;COE&#39;</span><span class="p">,</span> <span class="s1">&#39;cgpa&#39;</span><span class="p">:</span> <span class="s1">&#39;9.0&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Nikhil&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">},</span>
         <span class="p">{</span><span class="s1">&#39;branch&#39;</span><span class="p">:</span> <span class="s1">&#39;COE&#39;</span><span class="p">,</span> <span class="s1">&#39;cgpa&#39;</span><span class="p">:</span> <span class="s1">&#39;9.1&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Sanchit&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">},</span>
         <span class="p">{</span><span class="s1">&#39;branch&#39;</span><span class="p">:</span> <span class="s1">&#39;IT&#39;</span><span class="p">,</span> <span class="s1">&#39;cgpa&#39;</span><span class="p">:</span> <span class="s1">&#39;9.3&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Aditya&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">},</span>
         <span class="p">{</span><span class="s1">&#39;branch&#39;</span><span class="p">:</span> <span class="s1">&#39;SE&#39;</span><span class="p">,</span> <span class="s1">&#39;cgpa&#39;</span><span class="p">:</span> <span class="s1">&#39;9.5&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Sagar&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">},</span>
         <span class="p">{</span><span class="s1">&#39;branch&#39;</span><span class="p">:</span> <span class="s1">&#39;MCE&#39;</span><span class="p">,</span> <span class="s1">&#39;cgpa&#39;</span><span class="p">:</span> <span class="s1">&#39;7.8&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Prateek&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span><span class="p">},</span>
         <span class="p">{</span><span class="s1">&#39;branch&#39;</span><span class="p">:</span> <span class="s1">&#39;EP&#39;</span><span class="p">,</span> <span class="s1">&#39;cgpa&#39;</span><span class="p">:</span> <span class="s1">&#39;9.1&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Sahil&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">}]</span>

<span class="c1"># field names</span>
<span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;branch&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;cgpa&#39;</span><span class="p">]</span>

<span class="c1"># name of csv file</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;university_records.csv&quot;</span>

<span class="c1"># writing to csv file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
    <span class="c1"># creating a csv dict writer object</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">fieldnames</span> <span class="o">=</span> <span class="n">fields</span><span class="p">)</span>

    <span class="c1"># writing headers (field names)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>

    <span class="c1"># writing data rows</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">mydict</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In csv modules, an optional dialect parameter can be given which is used to define a set of parameters specific to a particular CSV format.
By default, csv module uses excel dialect which makes them compatible with excel spreadsheets.
You can define your own dialect using register_dialect method</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csv</span><span class="o">.</span><span class="n">register_dialect</span><span class="p">(</span>
    <span class="s1">&#39;mydialect&#39;</span><span class="p">,</span>
    <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>
    <span class="n">quotechar</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
    <span class="n">doublequote</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">skipinitialspace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">lineterminator</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">quoting</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_MINIMAL</span><span class="p">)</span>

<span class="n">csvreader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;mydialect&#39;</span><span class="p">)</span>
<span class="c1"># change params</span>
<span class="n">csvreader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">lineterminator</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="large-csv-files">
<h5>large csv files<a class="headerlink" href="#large-csv-files" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># time taken to read data</span>
<span class="n">s_time_chunk</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">chunk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;gender_voice_dataset.csv&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">e_time_chunk</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;With chunks: &quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">e_time_chunk</span><span class="o">-</span><span class="n">s_time_chunk</span><span class="p">),</span> <span class="s2">&quot;sec&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

<span class="c1"># data</span>
<span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="xml">
<h4>xml<a class="headerlink" href="#xml" title="Permalink to this headline">¶</a></h4>
<div class="section" id="load">
<h5>load<a class="headerlink" href="#load" title="Permalink to this headline">¶</a></h5>
<p>assets/data.xml</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;users&gt;</span>
    <span class="nt">&lt;user</span> <span class="na">data-id=</span><span class="s">&quot;101&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nom&gt;</span>Zorro<span class="nt">&lt;/nom&gt;</span>
        <span class="nt">&lt;metier&gt;</span>Danseur<span class="nt">&lt;/metier&gt;</span>
    <span class="nt">&lt;/user&gt;</span>
    <span class="nt">&lt;user</span> <span class="na">data-id=</span><span class="s">&quot;102&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nom&gt;</span>Hulk<span class="nt">&lt;/nom&gt;</span>
        <span class="nt">&lt;metier&gt;</span>Footballeur<span class="nt">&lt;/metier&gt;</span>
    <span class="nt">&lt;/user&gt;</span>
    <span class="nt">&lt;user</span> <span class="na">data-id=</span><span class="s">&quot;103&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nom&gt;</span>Zidane<span class="nt">&lt;/nom&gt;</span>
        <span class="nt">&lt;metier&gt;</span>Star<span class="nt">&lt;/metier&gt;</span>
    <span class="nt">&lt;/user&gt;</span>
    <span class="nt">&lt;user</span> <span class="na">data-id=</span><span class="s">&quot;104&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nom&gt;</span>Beans<span class="nt">&lt;/nom&gt;</span>
        <span class="nt">&lt;metier&gt;</span>Epicier<span class="nt">&lt;/metier&gt;</span>
    <span class="nt">&lt;/user&gt;</span>
    <span class="nt">&lt;user</span> <span class="na">data-id=</span><span class="s">&quot;105&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nom&gt;</span>Batman<span class="nt">&lt;/nom&gt;</span>
        <span class="nt">&lt;metier&gt;</span>Veterinaire<span class="nt">&lt;/metier&gt;</span>
    <span class="nt">&lt;/user&gt;</span>
    <span class="nt">&lt;user</span> <span class="na">data-id=</span><span class="s">&quot;106&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nom&gt;</span>Spiderman<span class="nt">&lt;/nom&gt;</span>
        <span class="nt">&lt;metier&gt;</span>Veterinaire<span class="nt">&lt;/metier&gt;</span>
    <span class="nt">&lt;/user&gt;</span>
<span class="nt">&lt;/users&gt;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;./assets/data.xml&quot;</span>
<span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="lxml">
<h5>lxml<a class="headerlink" href="#lxml" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># !conda install --yes --prefix {sys.prefix} lxml</span>
<span class="c1"># !{sys.executable} -m pip install numpy</span>
<span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>
<span class="c1"># I define my source document</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;assets/data.xml&#39;</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="c1"># so in tree.xpath(&quot;/users/user/name&quot;) there are the tags associated with our search</span>
<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/users/user/nom&quot;</span><span class="p">):</span>
    <span class="c1"># I want to display only the content (.text) of these tags /users/user/name</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Zorro</span>
<span class="sd">Hulk</span>
<span class="sd">Zidane</span>
<span class="sd">Beans</span>
<span class="sd">Batman</span>
<span class="sd">Spiderman</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/users/user/nom&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
<span class="c1"># &#39;Zorro&#39;</span>

<span class="c1"># You can display the attributes of the tags that store this information</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/users/user&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data-id&quot;</span><span class="p">))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">101</span>
<span class="sd">102</span>
<span class="sd">103</span>
<span class="sd">104</span>
<span class="sd">105</span>
<span class="sd">106</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># You can refine the display by proposing to display only users whose job is Veterinary</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/users/user[metier=&#39;Veterinaire&#39;]/nom&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># Batman</span>
<span class="c1"># Spiderman</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="concatenate-files">
<h4>concatenate files<a class="headerlink" href="#concatenate-files" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">concatenate_files_in_list</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">encode_in</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">is_small</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">use_shutil</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="c1"># don&#39;t forget to specify target folder when opening files!</span>
    <span class="n">encoding_format</span> <span class="o">=</span> <span class="n">encode_in</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;target file -&gt; </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">readmode</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;rb&#39;</span> <span class="k">if</span> <span class="n">use_shutil</span> <span class="k">else</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">writemode</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;wb&#39;</span> <span class="k">if</span> <span class="n">use_shutil</span> <span class="k">else</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">writemode</span><span class="p">)</span> <span class="k">as</span> <span class="n">finaltext</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;currently appending file: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">readmode</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding_format</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_currently_opened</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">use_shutil</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">shutil</span>
                    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">finaltext</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">is_small</span><span class="p">:</span>
                    <span class="n">finaltext</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_currently_opened</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_small</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_currently_opened</span><span class="p">:</span>
                        <span class="n">finaltext</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>


<span class="n">concatenate_files_in_list</span><span class="p">(</span><span class="n">text_files_list</span><span class="p">,</span> <span class="n">final_file</span><span class="p">,</span> <span class="s1">&#39;latin-1&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="dask">
<h4>dask<a class="headerlink" href="#dask" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://dask.org/">https://dask.org/</a></p>
<p>Dask is preferred over chunking as it uses multiple CPU cores or clusters of machines (Known as distributed computing). In addition to this, it also provides scaled NumPy, pandas, and sci-kit libraries to exploit parallelism</p>
<p><a class="reference external" href="https://docs.dask.org/en/latest/">https://docs.dask.org/en/latest/</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">dask</span> <span class="kn">import</span> <span class="n">dataframe</span> <span class="k">as</span> <span class="n">df1</span>

<span class="c1"># time taken to read data</span>
<span class="n">s_time_dask</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">dask_df</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;gender_voice_dataset.csv&#39;</span><span class="p">)</span>
<span class="n">e_time_dask</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Read with dask: &quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">e_time_dask</span><span class="o">-</span><span class="n">s_time_dask</span><span class="p">),</span> <span class="s2">&quot;seconds&quot;</span><span class="p">)</span>

<span class="c1"># data</span>
<span class="n">dask_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="oop">
<h2>OOP<a class="headerlink" href="#oop" title="Permalink to this headline">¶</a></h2>
<div class="section" id="theory">
<h3>theory<a class="headerlink" href="#theory" title="Permalink to this headline">¶</a></h3>
<div class="section" id="static-methods">
<h4>static methods<a class="headerlink" href="#static-methods" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;circle module: contains the Circle class.&quot;&quot;&quot;</span>
<span class="k">class</span> <span class="nc">Circle</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Circle class&quot;&quot;&quot;</span>
    <span class="n">all_circles</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># all circles that have been created</span>
    <span class="n">pi</span> <span class="o">=</span> <span class="mf">3.14159</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Circle with the given radius&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">r</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">all_circles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># when instance is initialized it adds itself to all_circles</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;determine the area of the Circle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">total_area</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Static method to total the areas of all Circles &quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">Circle</span><span class="o">.</span><span class="n">all_circles</span><span class="p">:</span>
            <span class="n">total</span> <span class="o">=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">total</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">circle</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">circle</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">circle</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">circle</span><span class="o">.</span><span class="n">Circle</span><span class="o">.</span><span class="n">total_area</span><span class="p">()</span>
<span class="mf">15.70795</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">circle</span><span class="o">.</span><span class="n">Circle</span><span class="o">.</span><span class="n">total_area</span><span class="p">()</span>
<span class="mf">31.415899999999997</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">circle</span><span class="o">.</span><span class="vm">__doc__</span>
<span class="s1">&#39;circle module: contains the Circle class.&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">circle</span><span class="o">.</span><span class="n">Circle</span><span class="o">.</span><span class="vm">__doc__</span>
<span class="s1">&#39;Circle class&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">circle</span><span class="o">.</span><span class="n">Circle</span><span class="o">.</span><span class="n">area</span><span class="o">.</span><span class="vm">__doc__</span>
<span class="s1">&#39;determine the area of the Circle&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="class-methods">
<h4>class methods<a class="headerlink" href="#class-methods" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>similar to static methods in that they can be invoked before an object of the class has been instantiated or by using an instance of the class.</p></li>
<li><p>Class methods are implicitly passed the class they belong to as their first parameter, so you can code em more simply</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;circle_cm module: contains the Circle class.&quot;&quot;&quot;</span>
<span class="k">class</span> <span class="nc">Circle</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Circle class&quot;&quot;&quot;</span>
    <span class="n">all_circles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pi</span> <span class="o">=</span> <span class="mf">3.14159</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Circle with the given radius&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">r</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">all_circles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;determine the area of the Circle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">total_area</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_circles</span><span class="p">:</span>  <span class="c1"># use cls instead of self.__class__</span>
            <span class="n">total</span> <span class="o">=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">total</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">circle_cm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">circle_cm</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">circle_cm</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">circle_cm</span><span class="o">.</span><span class="n">Circle</span><span class="o">.</span><span class="n">total_area</span><span class="p">()</span>
<span class="mf">15.70795</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">circle_cm</span><span class="o">.</span><span class="n">Circle</span><span class="o">.</span><span class="n">total_area</span><span class="p">()</span>
<span class="mf">31.415899999999997</span>
</pre></div>
</div>
</div>
<div class="section" id="inheritance">
<h4>inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Shape</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
<span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>  <span class="c1"># Square inherits from Shape</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># must call __init__ method of Shape</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side</span> <span class="o">=</span> <span class="n">side</span>
<span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>  <span class="c1"># Circle inherits from Shape</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>  <span class="c1"># must call __init__ method of Shape</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">r</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instead of using super, you could call Shape’s __init__ by explicitly naming the inherited class using <cite>Shape.__init__(self, x, y)</cite>, which would also call the Shape initialization function with the instance being initialized.
This technique wouldn’t be as flexible in the long run because it hardcodes the inherited class’s name, which could be a problem later if the design and the inheritance hierarchy change.</p>
</div>
<p>Inheritance also comes into effect when you attempt to use a method that isn’t defined in the base classes but is defined in the superclass.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="k">class</span> <span class="nc">Shape</span><span class="p">:</span>
      <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
      <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_x</span><span class="p">,</span> <span class="n">delta_y</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">delta_x</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">delta_y</span>

  <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">x</span>
  <span class="mi">3</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">y</span>
  <span class="mi">4</span>


<span class="n">In</span> <span class="n">the</span> <span class="nb">next</span> <span class="n">example</span><span class="p">,</span> <span class="n">a</span> <span class="k">class</span> <span class="nc">variable</span> <span class="n">z</span> <span class="ow">is</span> <span class="n">defined</span> <span class="k">for</span> <span class="n">the</span> <span class="n">superclass</span> <span class="n">P</span> <span class="ow">and</span> <span class="n">can</span> <span class="n">be</span> <span class="n">accessed</span> <span class="ow">in</span> <span class="n">three</span> <span class="n">ways</span><span class="p">:</span> <span class="n">through</span> <span class="n">the</span> <span class="n">instance</span> <span class="n">c</span><span class="p">,</span> <span class="n">through</span> <span class="n">the</span> <span class="n">derived</span> <span class="k">class</span> <span class="nc">C</span><span class="p">,</span> <span class="ow">or</span> <span class="n">directly</span> <span class="n">through</span> <span class="n">the</span> <span class="n">superclass</span> <span class="n">P</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">P</span><span class="p">:</span>
    <span class="n">z</span> <span class="o">=</span> <span class="s2">&quot;Hello&quot;</span>
    <span class="k">def</span> <span class="nf">set_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Class P&quot;</span>
    <span class="k">def</span> <span class="nf">print_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">set_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Class C&quot;</span>
    <span class="k">def</span> <span class="nf">print_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">set_p</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">print_p</span><span class="p">()</span>
<span class="n">Class</span> <span class="n">P</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">print_c</span><span class="p">()</span>
<span class="n">Class</span> <span class="n">P</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">set_c</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">print_c</span><span class="p">()</span>
<span class="n">Class</span> <span class="n">C</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">print_p</span><span class="p">()</span>
<span class="n">Class</span> <span class="n">C</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">;</span> <span class="n">C</span><span class="o">.</span><span class="n">z</span><span class="p">;</span> <span class="n">P</span><span class="o">.</span><span class="n">z</span>
<span class="s1">&#39;Hello&#39;</span>
<span class="s1">&#39;Hello&#39;</span>
<span class="s1">&#39;Hello&#39;</span>
</pre></div>
</div>
<div class="section" id="recap">
<h5>recap<a class="headerlink" href="#recap" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="n">pi</span> <span class="o">=</span> <span class="mf">3.14159</span>
    <span class="n">all_circles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">r</span>
        <span class="n">all_circles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">total_area</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">circle</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_circles</span><span class="p">:</span>
                 <span class="n">area</span> <span class="o">+=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">circle_area</span><span class="p">(</span><span class="n">circle</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">area</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">circle_area</span><span class="p">(</span><span class="n">radius</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Circle</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c1</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">c1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">c1</span><span class="o">.</span><span class="n">y</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">c2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">c2</span><span class="o">.</span><span class="n">y</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">c2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">c2</span><span class="o">.</span><span class="n">y</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">Circle</span><span class="o">.</span><span class="n">all_circles</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">Circle</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fa88835e9e8</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">Circle</span> <span class="nb">object</span> <span class="n">at</span>
     <span class="mh">0x7fa88835eb00</span><span class="o">&gt;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">]</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">Circle</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fa88835e9e8</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">Circle</span> <span class="nb">object</span> <span class="n">at</span>
     <span class="mh">0x7fa88835eb00</span><span class="o">&gt;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">Circle</span><span class="o">.</span><span class="n">total_area</span><span class="p">()</span>
<span class="mf">15.70795</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">.</span><span class="n">total_area</span><span class="p">()</span>
<span class="mf">15.70795</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">Circle</span><span class="o">.</span><span class="n">circle_area</span><span class="p">(</span><span class="n">c1</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
<span class="mf">3.14159</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c1</span><span class="o">.</span><span class="n">circle_area</span><span class="p">(</span><span class="n">c1</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
<span class="mf">3.14159</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="private-vars">
<h4>private vars<a class="headerlink" href="#private-vars" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Mine</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__y</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">def</span> <span class="nf">print_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__y</span><span class="p">)</span>

<span class="c1"># &gt;&gt;&gt; m = Mine()</span>
<span class="c1"># &gt;&gt;&gt; print(m.x)</span>
<span class="c1"># 2</span>
<span class="c1"># &gt;&gt;&gt; print(m.__y)</span>
<span class="c1"># Traceback (innermost last):</span>
<span class="c1">#   File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span>
<span class="c1"># AttributeError: &#39;Mine&#39; object has no attribute &#39;__y&#39;</span>
<span class="c1"># &gt;&gt;&gt; m.print_y()</span>
<span class="c1"># 3</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>to provide privacy it mangles the name of private variables and private methods when the code is compiled to bytecode. What specifically happens is that _classname is prepended to the variable name:</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">[&#39;_Mine__y&#39;, &#39;x&#39;, ...]</span>
</pre></div>
</div>
</div>
<div class="section" id="property">
<h4>&#64;property<a class="headerlink" href="#property" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Temperature</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temp_fahr</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_temp_fahr</span> <span class="o">-</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">/</span> <span class="mi">9</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Without a setter, such a property is read-only. To change the property, you need to add a setter:</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@temp</span><span class="o">.</span><span class="n">setter</span>
<span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_temp</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_temp_fahr</span> <span class="o">=</span> <span class="n">new_temp</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">/</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">32</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">Temperature</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">_temp_fahr</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">temp</span>
<span class="o">-</span><span class="mf">17.77777777777778</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">temp</span> <span class="o">=</span> <span class="mi">34</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">_temp_fahr</span>
<span class="mf">93.2</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">temp</span>
<span class="mf">34.0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The 0 in _temp_fahr is converted to centigrade before it’s returned 1. The 34 is converted back to Fahrenheit by the setter</p>
</div>
</div>
<div class="section" id="scoping-rules">
<h4>scoping rules<a class="headerlink" href="#scoping-rules" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>When you’re in a method of a class, you have direct access to the local namespace (parameters and variables declared in the method),</p></li>
<li><p>the global namespace (functions and variables declared at the module level),</p></li>
<li><p>and the built-in namespace (built-in functions and built-in exceptions). These three namespaces are searched in the following order: local, global, and built-in</p></li>
</ul>
<img alt="_images/direct_ns.jpg" src="_images/direct_ns.jpg" />
<dl class="simple">
<dt>You also have access through the <strong>self</strong> variable to:</dt><dd><ul class="simple">
<li><p>the <strong>instance’s namespace</strong> (instance variables, private instance variables, and superclass instance variables),</p></li>
<li><p>its <strong>class’s namespace</strong> (methods, class variables, private methods, and private class variables), and</p></li>
<li><p>its <strong>superclass’s namespace</strong> (superclass methods and superclass class variables).</p></li>
</ul>
</dd>
</dl>
<p>These three namespaces are searched in the order instance, class, and then superclass</p>
<img alt="_images/self_ns.jpg" src="_images/self_ns.jpg" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Private superclass instance</strong> variables, <strong>private superclass methods</strong>, and <strong>private superclass class</strong> variables can’t be accessed by using self. A class is able to hide these names from its children.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;cs module: class scope demonstration module.&quot;&quot;&quot;</span>
<span class="n">mv</span> <span class="o">=</span><span class="s2">&quot;module variable: mv&quot;</span>

<span class="k">def</span> <span class="nf">mf</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;module function (can be used like a class method in other languages): mf()&quot;</span>

<span class="k">class</span> <span class="nc">SC</span><span class="p">:</span>
    <span class="n">scv</span> <span class="o">=</span> <span class="s2">&quot;superclass class variable: self.scv&quot;</span>
    <span class="n">__pscv</span> <span class="o">=</span> <span class="s2">&quot;private superclass class variable: no access&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">siv</span> <span class="o">=</span> <span class="s2">&quot;superclass instance variable: self.siv (but use SC.siv for assignment)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__psiv</span> <span class="o">=</span> <span class="s2">&quot;private superclass instance variable: &quot;</span><span class="n">no</span> <span class="n">access</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">sm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;superclass method: self.sm()&quot;</span>

    <span class="k">def</span> <span class="nf">__spm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;superclass private method: no access&quot;</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">SC</span><span class="p">):</span>
    <span class="n">cv</span> <span class="o">=</span> <span class="s2">&quot;class variable: self.cv (but use C.cv for assignment)&quot;</span>
    <span class="n">__pcv</span> <span class="o">=</span> <span class="s2">&quot;class private variable: self.__pcv (but use C.__pcv for assignment)&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">SC</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__piv</span> <span class="o">=</span> <span class="s2">&quot;private instance variable: self.__piv&quot;</span>

    <span class="k">def</span> <span class="nf">m2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;method: self.m2()&quot;</span>

    <span class="k">def</span> <span class="nf">__pm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;private method: self.__pm()&quot;</span>

    <span class="k">def</span> <span class="nf">m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="s2">&quot;parameter: p&quot;</span><span class="p">):</span>
        <span class="n">lv</span> <span class="o">=</span> <span class="s2">&quot;local variable: lv&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iv</span> <span class="o">=</span> <span class="s2">&quot;instance variable: self.xi&quot;</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Access local, global and built-in namespaces directly&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;local namespace:&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>  <span class="c1"># parameter</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">lv</span><span class="p">)</span>  <span class="c1"># local var</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;global namespace:&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">mv</span><span class="p">)</span> <span class="c1"># module var</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">mf</span><span class="p">())</span>  <span class="c1"># module func</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Access instance, class, and superclass namespaces through &#39;self&#39;&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Instance namespace:&quot;</span><span class="p">,</span><span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iv</span><span class="p">)</span>  <span class="c1"># instance var</span>

        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__piv</span><span class="p">)</span>  <span class="c1"># private instance var</span>

        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">siv</span><span class="p">)</span>  <span class="c1"># superclass instance var</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Class namespace:&quot;</span><span class="p">,</span><span class="nb">dir</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cv</span><span class="p">)</span>  <span class="c1"># class var</span>

        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m2</span><span class="p">())</span>  <span class="c1"># method</span>

        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__pcv</span><span class="p">)</span>  <span class="c1"># private class var</span>

        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__pm</span><span class="p">())</span>  <span class="c1"># private method</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Superclass namespace:&quot;</span><span class="p">,</span><span class="nb">dir</span><span class="p">(</span><span class="n">SC</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sm</span><span class="p">())</span>  <span class="c1"># superclass method</span>

        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scv</span><span class="p">)</span>  <span class="c1"># superclass var through instance</span>
</pre></div>
</div>
<p>class C’s method m’s local namespace contains the parameters self (which is the instance variable) and p along with the local variable lv (all of which can be accessed directly):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">m</span><span class="p">()</span>
<span class="go">Access local, global and built-in namespaces directly</span>
<span class="go">local namespace: [&#39;lv&#39;, &#39;p&#39;, &#39;self&#39;]</span>
<span class="go">parameter: p</span>
<span class="go">local variable: lv</span>
</pre></div>
</div>
<p>method m’s global namespace contains the module variable mv and the module function mf (which, you can use to provide a class method functionality).
There are also the classes defined in the module (the class C and the superclass SC). All these classes can be directly accessed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">global</span> <span class="n">namespace</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;mf&#39;</span><span class="p">,</span> <span class="s1">&#39;__builtins__&#39;</span><span class="p">,</span> <span class="s1">&#39;__file__&#39;</span><span class="p">,</span> <span class="s1">&#39;__package__&#39;</span><span class="p">,</span>
  <span class="s1">&#39;mv&#39;</span><span class="p">,</span> <span class="s1">&#39;SC&#39;</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">]</span>
<span class="n">module</span> <span class="n">variable</span><span class="p">:</span> <span class="n">mv</span>
<span class="n">module</span> <span class="n">function</span> <span class="p">(</span><span class="n">can</span> <span class="n">be</span> <span class="n">used</span> <span class="n">like</span> <span class="n">a</span> <span class="k">class</span> <span class="nc">method</span> <span class="ow">in</span> <span class="n">other</span> <span class="n">languages</span><span class="p">):</span> <span class="n">mf</span><span class="p">()</span>
</pre></div>
</div>
<p>“</p>
</div>
</div>
</div>
<div class="section" id="practice">
<h2>practice<a class="headerlink" href="#practice" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-classes">
<h3>using classes<a class="headerlink" href="#using-classes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="guess-a-number">
<h4>guess a number<a class="headerlink" href="#guess-a-number" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GuessNumber</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">number_to_guess</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lower</span> <span class="o">=</span> <span class="n">lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upper</span> <span class="o">=</span> <span class="n">upper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bingo</span> <span class="o">=</span> <span class="n">number_to_guess</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_in_range</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_positive</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guess_the_number</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">ask_for_int</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;enter an integer number between </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lower</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">upper</span><span class="si">}</span><span class="s2">: &quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">is_number_in_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_to_check</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lower</span> <span class="o">&lt;=</span> <span class="n">number_to_check</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper</span>

    <span class="k">def</span> <span class="nf">is_number_positive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_to_check</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">number_to_check</span> <span class="o">&gt;=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">validate_int_input</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">validated</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># keep looping until user inputs a valid integer within range</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">validated</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask_for_int</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_number_in_range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_number_positive</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span><span class="p">):</span>
                    <span class="n">validated</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">validated</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;not an integer man, you playin&#39; me?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span>

    <span class="k">def</span> <span class="nf">guess_the_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bingo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_int_input</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bingo</span><span class="p">:</span>
                <span class="c1"># todo: add count in message</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bingooo, you guessed the number.. Wo00ot!?!&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bingo</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nnnaah, low&#39;s the way to gow&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">users_guess</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bingo</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nnnaah, live life bigger bruh&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># initialize GuessNumber instance</span>
    <span class="n">guessing1</span> <span class="o">=</span> <span class="n">GuessNumber</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>


<span class="kn">import</span> <span class="nn">unittest</span>


<span class="k">class</span> <span class="nc">TestGuessNumber</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_ask_for_int</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="s2">&quot;55&quot;</span>
        <span class="c1"># return int(input(f&quot;enter an integer number between {self.lower} and {self.upper}: &quot;))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">test_is_number_in_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_to_check</span><span class="p">):</span>
        <span class="c1"># return self.lower &lt;= number_to_check &lt;= self.upper</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">test_is_number_positive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_to_check</span><span class="p">):</span>
        <span class="c1"># return number_to_check &gt;= 0</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">test_validate_int_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return self.users_guess</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">test_guess_the_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="c1"># example play</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">enter an integer number between 1 and 100: 44</span>
<span class="sd">Nnnaah, low&#39;s the way to gow</span>
<span class="sd">enter an integer number between 1 and 100: 33</span>
<span class="sd">Nnnaah, low&#39;s the way to gow</span>
<span class="sd">enter an integer number between 1 and 100: 11</span>
<span class="sd">Nnnaah, live life bigger bruh</span>
<span class="sd">enter an integer number between 1 and 100: 22</span>
<span class="sd">Nnnaah, live life bigger bruh</span>
<span class="sd">enter an integer number between 1 and 100: 2</span>
<span class="sd">Nnnaah, live life bigger bruh</span>
<span class="sd">enter an integer number between 1 and 100: 0.5</span>
<span class="sd">not an integer man, you playin&#39; me?</span>
<span class="sd">enter an integer number between 1 and 100: ..</span>
<span class="sd">not an integer man, you playin&#39; me?</span>
<span class="sd">enter an integer number between 1 and 100: 4</span>
<span class="sd">Nnnaah, live life bigger bruh</span>
<span class="sd">enter an integer number between 1 and 100: 11</span>
<span class="sd">Nnnaah, live life bigger bruh</span>
<span class="sd">enter an integer number between 1 and 100: 25</span>
<span class="sd">Bingooo, you guessed the number.. Woo000oot!?!</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="validation">
<h3>validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="non-regex-ip-validation">
<h4>non regex ip validation<a class="headerlink" href="#non-regex-ip-validation" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">contextlib</span>


<span class="k">def</span> <span class="nf">ui_ask_ip_address</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter your IP address: &quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">validate_range_int_list</span><span class="p">(</span><span class="n">int_list</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">number</span> <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">int_list</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">step</span><span class="p">)]</span>


<span class="k">def</span> <span class="nf">convert_to_int_list</span><span class="p">(</span><span class="n">list_given</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="n">list_with_integers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">list_with_integers</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">list_given</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;aha not all integers in your list -&gt; </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># exit(1) # prevents loop</span>
    <span class="k">return</span> <span class="n">list_with_integers</span>


<span class="k">def</span> <span class="nf">valid_ip_address</span><span class="p">(</span><span class="n">user_input</span><span class="p">):</span>
    <span class="n">required_length</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">host_address_octets</span> <span class="o">=</span> <span class="n">user_input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
    <span class="n">host_address_octets</span> <span class="o">=</span> <span class="n">convert_to_int_list</span><span class="p">(</span><span class="n">host_address_octets</span><span class="p">)</span>
    <span class="n">octets_list</span> <span class="o">=</span> <span class="n">validate_range_int_list</span><span class="p">(</span><span class="n">host_address_octets</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;something went wrong&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">octets_list</span><span class="p">)</span> <span class="o">==</span> <span class="n">required_length</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">host_address_octets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">input_from_user</span> <span class="o">=</span> <span class="n">ui_ask_ip_address</span><span class="p">()</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">valid_ip_address</span><span class="p">(</span><span class="n">input_from_user</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;not a valid ip :)&quot;</span><span class="p">)</span>
        <span class="n">input_from_user</span> <span class="o">=</span> <span class="n">ui_ask_ip_address</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;valid ip good job&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="unittest">
<h5>unittest<a class="headerlink" href="#unittest" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">playground</span> <span class="k">as</span> <span class="nn">play</span>
<span class="kn">from</span> <span class="nn">ddt</span> <span class="kn">import</span> <span class="n">ddt</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">unpack</span>


<span class="nd">@ddt</span>
<span class="k">class</span> <span class="nc">MyTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="nd">@data</span><span class="p">((</span><span class="s1">&#39;192.168.1.1&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;192.168.1.0&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;192.168.1.255&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
          <span class="p">(</span><span class="s1">&#39;192.168.255.1&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;192.168.2.255&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;0.1.2.3&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
    <span class="nd">@unpack</span>
    <span class="k">def</span> <span class="nf">test_valid_ip_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_sim</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;testing: </span><span class="si">{</span><span class="n">input_sim</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">play</span><span class="o">.</span><span class="n">valid_ip_address</span><span class="p">(</span><span class="n">input_sim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="regex">
<h2>regex<a class="headerlink" href="#regex" title="Permalink to this headline">¶</a></h2>
<div class="section" id="searching">
<h3>searching<a class="headerlink" href="#searching" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>re.match: returns first occurence matching pattern in a string as a <strong>match object</strong></p></li>
<li><p>re.search: returns a <strong>match object</strong> if there is a match <strong>anywhere</strong> in the string, unlike match</p></li>
<li><p>re.fullmatch: looks for match on an <strong>entire string</strong></p></li>
<li><p>re.findall: returns a <strong>list</strong> containing all matches, iterates over all lines</p></li>
<li><p>re.finditer: returns an <strong>iterator</strong> that yields regex matches from a string</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>match only works on the WHOLE string, use search to get a match within a string eg. find a number in xqsdf88mlkj</p>
</div>
</div>
<div class="section" id="substitution">
<h3>substitution<a class="headerlink" href="#substitution" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>re.sub: replaces 1 or many matches with a string and returns the result</p></li>
<li><p>re.subn: like sub but also returns info on <strong>number of substitutions</strong> made</p></li>
</ul>
<div class="section" id="substitution-by-function">
<h4>substitution by function<a class="headerlink" href="#substitution-by-function" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><dl class="simple">
<dt>if you specify a function, then <cite>re.sub()</cite> calls that function for each match</dt><dd><p>it passes each match object as an argument to the function</p>
</dd>
</dl>
</li>
</ul>
<p>In this example, f() gets called for each match.
As a result, re.sub() converts each alphanumeric portion of &lt;string&gt; to all uppercase and multiplies each numeric portion by 10.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>


<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">match_obj</span><span class="p">):</span>
    <span class="n">string_match</span> <span class="o">=</span> <span class="n">match_obj</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># The matching string</span>

    <span class="c1"># s.isdigit() returns True if all characters in s are digits</span>
    <span class="k">if</span> <span class="n">string_match</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">string_match</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">string_match</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>


<span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w+&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="s1">&#39;foo.10.bar.20.baz.30&#39;</span><span class="p">)</span>
<span class="s1">&#39;FOO.100.BAR.200.BAZ.300&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="limit-number-of-replacements">
<h4>limit number of replacements<a class="headerlink" href="#limit-number-of-replacements" title="Permalink to this headline">¶</a></h4>
<p>specify a posivive int for the optional <strong>count</strong> parameter</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w+&#39;</span><span class="p">,</span> <span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar.baz.qux&#39;</span><span class="p">)</span>
<span class="s1">&#39;xxx.xxx.xxx.xxx&#39;</span>
<span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w+&#39;</span><span class="p">,</span> <span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar.baz.qux&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="s1">&#39;xxx.xxx.baz.qux&#39;</span>

<span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w+&#39;</span><span class="p">,</span> <span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar.baz.qux&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;xxx.xxx.xxx.xxx&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w+&#39;</span><span class="p">,</span> <span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar.baz.qux&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;xxx.xxx.baz.qux&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">match_obj</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">match_obj</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

<span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w+&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="s1">&#39;foo.10.bar.20.baz.30&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;FOO.100.BAR.200.BAZ.300&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="utility-functions">
<h3>utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>re.split: splits a string into substrings using <strong>regex as delimiter</strong> and returns substrings as a list</p></li>
<li><p>re.escape: escapes characters in a regex</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># re.split(&lt;regex&gt;, &lt;string&gt;, maxsplit=0, flags=0)</span>


<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;\s*[,;/]\s*&#39;</span><span class="p">,</span> <span class="s1">&#39;foo,bar  ;  baz / qux&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">]</span>

<span class="c1"># with capturing groups = list includes the matching delimiter strings too</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;(\s*[,;/]\s*)&#39;</span><span class="p">,</span> <span class="s1">&#39;foo,bar  ;  baz / qux&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;  ;  &#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39; / &#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;foo,bar  ;  baz / qux&#39;</span>
<span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;(\s*[,;/]\s*)&#39;</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>

<span class="c1"># List of tokens and delimiters</span>
<span class="n">a</span>
<span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;  ;  &#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39; / &#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">]</span>

<span class="c1"># Enclose each token in &lt;&gt;&#39;s</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>

    <span class="c1"># This will be True for the tokens but not the delimiters</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s1">&gt;&#39;</span>


<span class="c1"># Put the tokens back together using the same delimiters</span>
<span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="s1">&#39;&lt;foo&gt;,&lt;bar&gt;  ;  &lt;baz&gt; / &lt;qux&gt;&#39;</span>
</pre></div>
</div>
<p>If you need to use groups but don’t want the delimiters included in the return list, then you can use noncapturing groups:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;foo,bar  ;  baz / qux&#39;</span>
<span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;(?:\s*[,;/]\s*)&#39;</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">]</span>

<span class="c1"># using maxsplit argument</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;foo, bar, baz, qux, quux, corge&#39;</span>

<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;,\s*&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;quux&#39;</span><span class="p">,</span> <span class="s1">&#39;corge&#39;</span><span class="p">]</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;,\s*&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;qux, quux, corge&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="re-escape">
<h3>re.escape<a class="headerlink" href="#re-escape" title="Permalink to this headline">¶</a></h3>
<p>the regex you’re passing in has a lot of special characters that you want the parser to take literally instead of as metacharacters. It saves you the trouble of putting in all the backslash characters manually:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="p">,</span> <span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="p">))</span>
<span class="kc">None</span>
<span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;foo\^bar\(baz\)\|qux&#39;</span><span class="p">,</span> <span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">_sre</span><span class="o">.</span><span class="n">SRE_Match</span> <span class="nb">object</span><span class="p">;</span> <span class="n">span</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="o">&gt;</span>

<span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;foo\^bar\(baz\)\|qux&#39;</span>
<span class="kc">True</span>
<span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="p">),</span> <span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">_sre</span><span class="o">.</span><span class="n">SRE_Match</span> <span class="nb">object</span><span class="p">;</span> <span class="n">span</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;foo^bar(baz)|qux&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="re-compile">
<h3>re.compile<a class="headerlink" href="#re-compile" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>re.compile: compiles regex and returns the corresponding regex object</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)&#39;</span><span class="p">,</span> <span class="s1">&#39;foo123bar&#39;</span><span class="p">)</span>
<span class="c1"># &lt;_sre.SRE_Match object; span=(3, 6), match=&#39;123&#39;&gt;</span>

<span class="n">re_obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)&#39;</span><span class="p">)</span>
<span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">re_obj</span><span class="p">,</span> <span class="s1">&#39;foo123bar&#39;</span><span class="p">)</span>
<span class="c1"># &lt;_sre.SRE_Match object; span=(3, 6), match=&#39;123&#39;&gt;</span>

<span class="n">re_obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;foo123bar&#39;</span><span class="p">)</span>
<span class="c1"># &lt;_sre.SRE_Match object; span=(3, 6), match=&#39;123&#39;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What good is precompiling? There are a couple of possible advantages.</p>
<ul class="simple">
<li><p>if you use a particular regex in your Python code frequently, then precompiling allows you to separate out the regex definition from its uses</p></li>
</ul>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">s4</span> <span class="o">=</span> <span class="s1">&#39;foo.bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo123bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz99&#39;</span><span class="p">,</span> <span class="s1">&#39;qux &amp; grault&#39;</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">s1</span><span class="p">)</span>
<span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
<span class="c1"># &lt;_sre.SRE_Match object; span=(3, 6), match=&#39;123&#39;&gt;</span>
<span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">s3</span><span class="p">)</span>
<span class="c1"># &lt;_sre.SRE_Match object; span=(3, 5), match=&#39;99&#39;&gt;</span>
<span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">s4</span><span class="p">)</span>

<span class="n">following</span> <span class="ow">is</span> <span class="n">more</span> <span class="n">modular</span> <span class="o">&amp;</span> <span class="n">maintainable</span>

<span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">s4</span> <span class="o">=</span> <span class="s1">&#39;foo.bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo123bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz99&#39;</span><span class="p">,</span> <span class="s1">&#39;qux &amp; grault&#39;</span>
<span class="n">re_obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;\d+&#39;</span><span class="p">)</span>

<span class="n">re_obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
<span class="c1"># &lt;_sre.SRE_Match object; span=(3, 6), match=&#39;123&#39;&gt;</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s3</span><span class="p">)</span>
<span class="c1"># &lt;_sre.SRE_Match object; span=(3, 5), match=&#39;99&#39;&gt;</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="regex-oject-attributes">
<h3>regex oject attributes<a class="headerlink" href="#regex-oject-attributes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>re_obj.flags: shows any flags that are in effect for the regex</p></li>
<li><p>re_obj.groups: the number of capturing groups in the regex</p></li>
<li><p>re_obj.groupindex: a dict mapping each symbolic group name defined by the <cite>(?P&lt;name&gt;)</cite> construct to corresponding group number</p></li>
<li><p>re_obj.pattern: regex pattern that produced this object</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">re_obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?m)(\w+),(\w+)&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">flags</span>
<span class="mi">42</span>
<span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="o">|</span><span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="o">|</span><span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span>
<span class="o">&lt;</span><span class="n">RegexFlag</span><span class="o">.</span><span class="n">UNICODE</span><span class="o">|</span><span class="n">MULTILINE</span><span class="o">|</span><span class="n">IGNORECASE</span><span class="p">:</span> <span class="mi">42</span><span class="o">&gt;</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">groups</span>
<span class="mi">2</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">pattern</span>
<span class="s1">&#39;(?m)(</span><span class="se">\\</span><span class="s1">w+),(</span><span class="se">\\</span><span class="s1">w+)&#39;</span>

<span class="n">re_obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?P&lt;w1&gt;),(?P&lt;w2&gt;)&#39;</span><span class="p">)</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">groupindex</span>
<span class="n">mappingproxy</span><span class="p">({</span><span class="s1">&#39;w1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;w2&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">groupindex</span><span class="p">[</span><span class="s1">&#39;w1&#39;</span><span class="p">]</span>
<span class="mi">1</span>
<span class="n">re_obj</span><span class="o">.</span><span class="n">groupindex</span><span class="p">[</span><span class="s1">&#39;w2&#39;</span><span class="p">]</span>
<span class="mi">2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that .flags includes any flags specified as arguments to re.compile(), any specified within the regex with the (?flags) metacharacter sequence, and any that are in effect by default</p>
</div>
</div>
<div class="section" id="match-object">
<h3>match object<a class="headerlink" href="#match-object" title="Permalink to this headline">¶</a></h3>
<div class="section" id="match-object-is-truthy">
<h4>match object is truthy<a class="headerlink" href="#match-object-is-truthy" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar.baz&#39;</span><span class="p">)</span>
<span class="n">m</span>
<span class="o">&lt;</span><span class="n">_sre</span><span class="o">.</span><span class="n">SRE_Match</span> <span class="nb">object</span><span class="p">;</span> <span class="n">span</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="o">&gt;</span>
<span class="nb">bool</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="kc">True</span>

<span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar.baz&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Found a match&#39;</span><span class="p">)</span>

<span class="n">Found</span> <span class="n">a</span> <span class="n">match</span>
</pre></div>
</div>
</div>
<div class="section" id="match-object-methods">
<h4>match object methods<a class="headerlink" href="#match-object-methods" title="Permalink to this headline">¶</a></h4>
<p>methods that are available for a match object match:</p>
<ul class="simple">
<li><p>match.group(): The specified captured group or groups from match</p></li>
<li><p>match.__getitem__(): A captured group from match</p></li>
<li><p>match.groups(): All the captured groups from match</p></li>
<li><p>match.groupdict(): A dictionary of named captured groups from match</p></li>
<li><p>match.expand(): The result of performing backreference substitutions from match</p></li>
<li><p>match.start(): The starting index of match</p></li>
<li><p>match.end(): The ending index of match</p></li>
<li><p>match.span(): Both the starting and ending indices of match as a tuple</p></li>
</ul>
</div>
<div class="section" id="match-object-attributes">
<h4>match object attributes<a class="headerlink" href="#match-object-attributes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>match.pos: The effective values of the pos &amp; endpos arguments for the match
match.endpos</p></li>
<li><p>match.lastindex: The index of the last captured group</p></li>
<li><p>match.lastgroup: The name of the last captured group</p></li>
<li><p>match.re: the compiled regex object for the match</p></li>
<li><p>match.string: the search string for the match</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">re_obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">re_obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;foo123bar&#39;</span><span class="p">)</span>
<span class="n">m</span>
<span class="o">&lt;</span><span class="n">_sre</span><span class="o">.</span><span class="n">SRE_Match</span> <span class="nb">object</span><span class="p">;</span> <span class="n">span</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="o">&gt;</span>
<span class="n">m</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">endpos</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="s1">&#39;foo123bar&#39;</span><span class="p">)</span>
<span class="n">m</span>
<span class="o">&lt;</span><span class="n">_sre</span><span class="o">.</span><span class="n">SRE_Match</span> <span class="nb">object</span><span class="p">;</span> <span class="n">span</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="o">&gt;</span>
<span class="n">m</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">endpos</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;foo123bar456baz&#39;</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?P&lt;n1&gt;\d+)\D*(?P&lt;n2&gt;\d+)&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span>
<span class="s1">&#39;n2&#39;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\w+),(\w+),(\w+)&#39;</span><span class="p">,</span> <span class="s1">&#39;foo,bar,baz&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">string</span>
<span class="s1">&#39;foo,bar,baz&#39;</span>

<span class="n">re_obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\w+),(\w+),(\w+)&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">re_obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;foo,bar,baz&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">string</span>
<span class="s1">&#39;foo,bar,baz&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="lookaround">
<h3>lookaround<a class="headerlink" href="#lookaround" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.regular-expressions.info/lookaround.html">http://www.regular-expressions.info/lookaround.html</a></p>
<p>Lookahead and lookbehind, collectively called “lookaround”, are zero-length assertions just like the start and end of line, and start and end of word anchors explained earlier in this tutorial. The difference is that lookaround actually matches characters, but then gives up the match, returning only the result: match or no match. That is why they are called “assertions”. They do not consume characters in the string, but only assert whether a match is possible or not. Lookaround allows you to create regular expressions that are impossible to create without them, or that would get very longwinded without them.</p>
<div class="section" id="positive-lookahead">
<h4>positive lookahead<a class="headerlink" href="#positive-lookahead" title="Permalink to this headline">¶</a></h4>
<p>plus followed by a -
+(?=-)</p>
</div>
<div class="section" id="negative-lookahead">
<h4>negative lookahead<a class="headerlink" href="#negative-lookahead" title="Permalink to this headline">¶</a></h4>
<p>plus not followed by a - (so end of the line)
+(?!-)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to store the match of the regex inside a lookahead, you have to put capturing parentheses around the regex inside the lookahead, like this: (?=(regex)). The other way around will not work, because the lookahead will already have discarded the regex match by the time the capturing group is to store its match</p>
</div>
</div>
</div>
<div class="section" id="lookbehind">
<h3>lookbehind<a class="headerlink" href="#lookbehind" title="Permalink to this headline">¶</a></h3>
<div class="section" id="positive-lookbehind">
<h4>positive lookbehind<a class="headerlink" href="#positive-lookbehind" title="Permalink to this headline">¶</a></h4>
<p>match a ‘+’ when preceeded by a ‘-‘
# starting from a plus, lookback to ensure there is a ‘-‘
(?&lt;=-)+</p>
</div>
<div class="section" id="negative-lookbehind">
<h4>negative lookbehind<a class="headerlink" href="#negative-lookbehind" title="Permalink to this headline">¶</a></h4>
<p>match a ‘+’ when NOT preceeded by a ‘-‘
# starting from a plus, lookback to ensure there is NO ‘-‘
(?&lt;=-)+</p>
</div>
</div>
</div>
<div class="section" id="scraping">
<h2>scraping<a class="headerlink" href="#scraping" title="Permalink to this headline">¶</a></h2>
<div class="section" id="beautiful-soup">
<h3>beautiful soup<a class="headerlink" href="#beautiful-soup" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></p>
<div class="section" id="setup-bs4">
<h4>setup bs4<a class="headerlink" href="#setup-bs4" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># !{sys.executable} -m pip install beautifulsoup4</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_doc</span><span class="p">,</span> <span class="s2">&quot;lxml&quot;</span><span class="p">)</span>
<span class="c1"># In my file (becode.org) by looking at this html script We can see that the main title is arranged in the h1 tag</span>

<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">):</span>
    <span class="c1"># We only retrieve the content ==&gt; .text</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># BeCode.org</span>
</pre></div>
</div>
</div>
<div class="section" id="find-html-elements">
<h4>find html elements<a class="headerlink" href="#find-html-elements" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-regular-expression">https://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-regular-expression</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;body&gt;&lt;div&gt;asdfasdf&lt;/div&gt;&lt;p&gt;&lt;a&gt;foo&lt;/a&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">)</span>
<span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;div&#39;</span><span class="p">])</span>
<span class="c1"># [&lt;div&gt;asdfasdf&lt;/div&gt;, &lt;a&gt;foo&lt;/a&gt;]</span>

<span class="c1"># using a regular expression to find tags that contain a or div:</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(a|div)&quot;</span><span class="p">))</span>

<span class="c1"># regex to search in attributes of tags</span>
<span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;href&#39;</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;crummy\.com/&#39;</span><span class="p">)})</span>

<span class="c1"># regex to find all titles</span>
<span class="n">find_titles</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(h\d)&quot;</span><span class="p">)</span>
<span class="n">titles</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">find_titles</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titles</span><span class="p">)</span>

<span class="n">store_titles</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span> <span class="p">:</span><span class="s2">&quot;meta-title meta-title-link&quot;</span><span class="p">}):</span>
    <span class="n">store_titles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;\d{4,7}.html&quot;</span><span class="p">))</span>
    <span class="c1"># return a list</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&lt;a class=&quot;meta-title meta-title-link&quot; href=&quot;/film/fichefilm_gen_cfilm=275354.html&quot; title=&quot;Chacun chez soi&quot;&gt;Chacun chez soi&lt;/a&gt;</span>
<span class="sd">&lt;a class=&quot;meta-title meta-title-link&quot; href=&quot;/film/fichefilm_gen_cfilm=272523.html&quot; title=&quot;Des hommes&quot;&gt;Des hommes&lt;/a&gt;</span>

<span class="sd">/film/fichefilm_gen_cfilm=275666.html</span>
<span class="sd">/film/fichefilm_gen_cfilm=277756.html</span>
<span class="sd">/film/fichefilm_gen_cfilm=44282.html</span>
<span class="sd">/film/fichefilm_gen_cfilm=274345.html</span>
<span class="sd">/film/fichefilm_gen_cfilm=281050.html</span>
<span class="sd">/film/fichefilm_gen_cfilm=268680.html</span>
<span class="sd">/series/ficheserie_gen_cserie=23474.html</span>
<span class="sd">/series/ficheserie_gen_cserie=26101.html</span>
<span class="sd">/series/ficheserie_gen_cserie=22429.html</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">get_titles</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;\d{4,7}.html&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="apply-regex-on-element-string">
<h4>apply regex on element string<a class="headerlink" href="#apply-regex-on-element-string" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">titles</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">title_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\d{4,7}\.html&quot;</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span> <span class="p">:</span><span class="s2">&quot;meta-title meta-title-link&quot;</span><span class="p">}):</span>
    <span class="c1"># results.append(elem.get(&#39;href&#39;))</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">title_pattern</span><span class="p">,</span> <span class="n">title</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">titles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
<span class="n">titles</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">[&#39;275354.html&#39;,</span>
<span class="sd"> &#39;272523.html&#39;,</span>
<span class="sd"> &#39;274710.html&#39;,</span>
<span class="sd"> &#39;261793.html&#39;,</span>
<span class="sd"> &#39;265425.html&#39;,</span>
<span class="sd"> &#39;24172.html&#39;,</span>
<span class="sd"> &#39;25512.html&#39;,</span>
<span class="sd"> &#39;25786.html&#39;,</span>
<span class="sd"> &#39;25515.html&#39;]&quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="section" id="slowly-get-url-page-content">
<h5>slowly get url page content<a class="headerlink" href="#slowly-get-url-page-content" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="n">title</span><span class="o">=</span><span class="p">[]</span>
<span class="n">synopsis</span><span class="o">=</span><span class="p">[]</span>

<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links_movie</span><span class="p">:</span>

    <span class="n">url</span><span class="o">=</span><span class="n">link</span>
    <span class="c1"># I slow down the frequency of requests to avoid being identified and therefore ban from the site</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">))</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">,</span><span class="s1">&#39;lxml&#39;</span><span class="p">)</span>


    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;titlebar-title titlebar-title-lg&quot;</span><span class="p">}):</span>
        <span class="n">title</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;content-txt&quot;</span><span class="p">}):</span>
        <span class="n">synopsis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

<span class="c1"># I check the length of the lists before creating the df</span>
<span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">synopsis</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">links_movie</span><span class="p">)</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">http://www.allocine.fr/film/fichefilm_gen_cfilm=275354.html 200</span>
<span class="sd">http://www.allocine.fr/film/fichefilm_gen_cfilm=272523.html 200</span>
<span class="sd">...</span>
<span class="sd">http://www.allocine.fr/film/fichefilm_gen_cfilm=281050.html 200</span>
<span class="sd">http://www.allocine.fr/film/fichefilm_gen_cfilm=268680.html 200</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="http-requests">
<h4>HTTP requests<a class="headerlink" href="#http-requests" title="Permalink to this headline">¶</a></h4>
<p><cite>command</cite> is the method to use, it specifies the type of request, it can have the values :</p>
<ul class="simple">
<li><p><cite>“GET”</cite> This is the most common way to request a resource. A GET request has no effect on the resource, it must be possible to repeat the request without effect.</p></li>
<li><p><cite>“HEAD”</cite> This method only asks for information about the resource (the header), without asking for the resource itself.</p></li>
<li><p><cite>“POST”</cite> This method must be used when a request modifies the resource.</p></li>
<li><p><cite>“OPTIONS”</cite> This method allows you to obtain the communication options of a resource or the server in general.</p></li>
<li><p><cite>“CONNECT”</cite> This method allows you to use a proxy as a communication tunnel.</p></li>
<li><p><cite>“TRACE”</cite> This method asks the server to return what it has received, in order to test and diagnose the connection.</p></li>
<li><p><cite>“PUT”</cite> This method allows you to add a resource to the server.</p></li>
<li><p><cite>“DELETE”</cite> This method allows you to delete a resource from the server.</p></li>
</ul>
<div class="section" id="store-html-in-var">
<h5>store html in var<a class="headerlink" href="#store-html-in-var" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="c1"># Url of website</span>
<span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://www.becode.org/about/&#39;</span>
<span class="c1"># I send my HTTP request with a &quot;GET&quot; to the site server to identify in the url</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="c1"># I display the requested url and the return of the server</span>
<span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="c1"># I ask beautifulSoup to keep in a soup variable the web page to scrape (url) an html script</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">,</span><span class="s1">&#39;lxml&#39;</span><span class="p">)</span>
<span class="n">soup</span>  <span class="c1"># prints all html code</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="selenium">
<h3>selenium<a class="headerlink" href="#selenium" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://selenium-python.readthedocs.io/installation.html#downloading-python-bindings-for-selenium/bin">https://selenium-python.readthedocs.io/installation.html#downloading-python-bindings-for-selenium/bin</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Linux: put your geckodriver in the equivalent path at home to /home/YOURNAME/.local/bin</p>
</div>
<div class="section" id="handy-libraries">
<h4>handy libraries<a class="headerlink" href="#handy-libraries" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># !{sys.executable} -m pip install tabulate</span>
<span class="kn">import</span> <span class="nn">bs4</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">lxml.html</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">gmtime</span><span class="p">,</span> <span class="n">strftime</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">tabulate</span> <span class="kn">import</span> <span class="n">tabulate</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">date</span><span class="o">=</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="scraping-training">
<h3>scraping training<a class="headerlink" href="#scraping-training" title="Permalink to this headline">¶</a></h3>
<div class="section" id="inquisitive-with-bs4-selenium">
<h4>inquisitive with bs4 &amp; selenium<a class="headerlink" href="#inquisitive-with-bs4-selenium" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver</span> <span class="kn">import</span> <span class="n">ActionChains</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.firefox.firefox_binary</span> <span class="kn">import</span> <span class="n">FirefoxBinary</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.remote.webelement</span> <span class="kn">import</span> <span class="n">WebElement</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">bs4</span>
<span class="kn">import</span> <span class="nn">shelve</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">browser_cookie3</span>

<span class="c1"># testing xpath -&gt; web console -&gt; $x(&quot;//a[@href=&#39;#ps-container&#39;]&quot;)</span>
<span class="c1"># python3 -m seleniumwire extractcert</span>
<span class="c1"># then manually import it under authorities</span>


<span class="k">def</span> <span class="nf">assert_level</span><span class="p">(</span><span class="n">level</span><span class="p">):</span>
    <span class="n">allowed_levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;beginner&quot;</span><span class="p">,</span> <span class="s2">&quot;intermediate&quot;</span><span class="p">,</span> <span class="s2">&quot;advanced&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">allowed_levels</span><span class="p">,</span> <span class="s2">&quot;allowed levels: &#39;beginner&#39;, &#39;intermediate&#39;, &#39;advanced&#39;, &#39;None (all levels)&#39;&quot;</span>
    <span class="k">return</span> <span class="n">level</span>


<span class="k">def</span> <span class="nf">assert_sort_on</span><span class="p">(</span><span class="n">sort_by</span><span class="p">):</span>
    <span class="n">allowed_sort_by</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;relevance&quot;</span><span class="p">,</span> <span class="s2">&quot;newest&quot;</span><span class="p">,</span> <span class="s2">&quot;popularity&quot;</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">sort_by</span> <span class="ow">in</span> <span class="n">allowed_sort_by</span><span class="p">,</span> <span class="s1">&#39;allowed sorts: &quot;relevance&quot;, &quot;newest&quot;, &quot;popularity&quot;&#39;</span>
    <span class="k">return</span> <span class="n">sort_by</span>


<span class="k">def</span> <span class="nf">assert_search_period</span><span class="p">(</span><span class="n">chosen_time_span</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;choose between 6M, 1y, 2y or None=&#39;all dates&#39;&quot;&quot;&quot;</span>
    <span class="n">allowed_choices</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;6M&quot;</span><span class="p">,</span> <span class="s2">&quot;1y&quot;</span><span class="p">,</span> <span class="s2">&quot;2y&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">chosen_time_span</span> <span class="ow">in</span> <span class="n">allowed_choices</span><span class="p">),</span> <span class="s2">&quot;allowed choices: 6M, 1y, 2y or None(all dates)&quot;</span>
    <span class="k">return</span> <span class="n">chosen_time_span</span>


<span class="k">def</span> <span class="nf">url_prep</span><span class="p">(</span><span class="n">txt</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote_plus</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ScrapeFirefox</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_page</span><span class="p">,</span> <span class="n">topics</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">home</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_page</span> <span class="o">=</span> <span class="n">start_page</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topics</span> <span class="o">=</span> <span class="n">topics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">urls_on_topic</span> <span class="o">=</span> <span class="p">{</span><span class="n">topic</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">topics</span><span class="p">}</span>  <span class="c1"># initialize dict with topics list</span>
        <span class="c1"># profile folder visible in &quot;about:profiles&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">FirefoxProfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">home</span> <span class="o">+</span> <span class="s1">&#39;/.mozilla/firefox/mwnbnmdi.default-release&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff_binary</span> <span class="o">=</span> <span class="n">FirefoxBinary</span><span class="p">(</span><span class="s1">&#39;/usr/bin/firefox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">DEFAULT_PREFERENCES</span><span class="p">[</span><span class="s1">&#39;frozen&#39;</span><span class="p">][</span><span class="s1">&#39;extensions.autoDisableScopes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># find all configuration items here: http://kb.mozillazine.org/Firefox_:_FAQs_:_About:config_Entries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">accept_untrusted_certs</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s1">&#39;extensions.enabledScopes&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="c1"># http://kb.mozillazine.org/Network.proxy.type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s2">&quot;network.proxy.type&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">download_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">home</span> <span class="o">+</span> <span class="s2">&quot;/cbts&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s2">&quot;browser.download.folderList&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># don&#39;t use default Downloads directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s2">&quot;browser.download.manager.showWhenStarting&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># turns of showing download progress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s1">&#39;browser.download.dir&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_location</span><span class="p">)</span>  <span class="c1"># sets the directory for downloads</span>
        <span class="c1"># automatically download the files of the selected mime-types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s1">&#39;browser.helperApps.neverAsk.saveToDisk&#39;</span><span class="p">,</span>
              <span class="s1">&#39;video/mp4,audio/mp4,video/webm,video/mp2t,audio/aac,application/x-mpegurl,application/vnd.apple.mpegurl&#39;</span><span class="p">)</span>
        <span class="c1"># self.profile.set_preference(&quot;browser.helperApps.alwaysAsk.force&quot;, False)</span>
        <span class="c1"># self.profile.set_preference(&quot;browser.download.panel.shown&quot;, False)</span>
        <span class="c1"># self.profile.set_preference(&quot;browser.download.manager.alertOnEXEOpen&quot;, False)</span>
        <span class="c1"># self.profile.set_preference(&quot;browser.download.manager.focusWhenStarting&quot;, False)</span>
        <span class="c1"># self.profile.set_preference(&quot;browser.download.manager.useWindow&quot;, False)</span>
        <span class="c1"># self.profile.set_preference(&quot;browser.download.manager.showAlertOnComplete&quot;, False)</span>
        <span class="c1"># self.profile.set_preference(&quot;browser.download.manager.closeWhenDone&quot;, True)  # Close the Download Manager when all downloads are complete</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff_options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">FirefoxOptions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff_options</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s2">&quot;extensions.lastAppBuildId&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;appID&gt; -1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">(</span><span class="n">firefox_profile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">firefox_binary</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ff_binary</span><span class="p">,</span>
                                        <span class="n">options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ff_options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">go_to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_page</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;my_topic&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">go_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">switch_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">css_id</span><span class="p">):</span>
        <span class="n">frame_to_use</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="n">css_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">frame_to_use</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

    <span class="k">def</span> <span class="nf">no_push_notifications</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch_frame</span><span class="p">(</span><span class="s2">&quot;webpush-onsite&quot;</span><span class="p">)</span>
        <span class="n">push_notifications</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//button[normalize-space()=&#39;No thanks&#39;]&quot;</span><span class="p">)</span>
        <span class="n">push_notifications</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">default_content</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">handle_notification_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">notifications_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_elements_by_id</span><span class="p">(</span><span class="s2">&quot;webpush-onsite&quot;</span><span class="p">)</span>  <span class="c1"># browse button/image</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">notifications_frame</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_el_available_id</span><span class="p">(</span><span class="s2">&quot;webpush-onsite&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_push_notifications</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_el_available_id</span><span class="p">(</span><span class="s2">&quot;prism-explore&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait_until_el_available_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">css_id</span><span class="p">):</span>
        <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">css_id</span><span class="p">)))</span>
        <span class="s2">&quot;avoid elem not detected errors&quot;</span>

    <span class="k">def</span> <span class="nf">wait_until_el_available_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">css_select</span><span class="p">):</span>
        <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span>
                                                                                                     <span class="n">css_select</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">wait_until_el_available_xpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">css_xpath</span><span class="p">):</span>
        <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span>
                                                                                                     <span class="n">css_xpath</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">get_pages_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">):</span>
        <span class="n">search_bar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//input[@id=&#39;prism-search-input&#39;]&quot;</span><span class="p">)</span>
        <span class="n">search_bar</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slow_type</span><span class="p">(</span><span class="n">search_bar</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="mf">0.122</span><span class="p">)</span>
        <span class="n">search_bar</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">RETURN</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">right_click_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">move_up</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">act</span> <span class="o">=</span> <span class="n">ActionChains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="p">)</span>
        <span class="n">act</span><span class="o">.</span><span class="n">context_click</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">up</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">move_up</span><span class="p">):</span>
            <span class="n">act</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ARROW_DOWN</span><span class="p">)</span>
        <span class="n">act</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">RETURN</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_no_of_pages_on_topic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_html</span><span class="p">):</span>
        <span class="n">xpath_no_pages</span> <span class="o">=</span> <span class="s2">&quot;//a[@href=&#39;#ps-container&#39;]&quot;</span>
        <span class="n">regex_course_names</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;(?:&lt;h3 class=</span><span class="se">\&quot;</span><span class="s2">.+?</span><span class="se">\&quot;</span><span class="s2">.*?100%;</span><span class="se">\&quot;</span><span class="s2">&gt;)(.*?)(?:&lt;/span&gt;&lt;span)&quot;</span>
        <span class="n">no_of_courses</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">regex_course_names</span><span class="p">,</span> <span class="n">current_html</span><span class="p">))</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">no_of_courses</span> <span class="o">&lt;=</span> <span class="mi">25</span><span class="p">:</span>
            <span class="n">no_pages_on_topic</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">no_pages_on_topic</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">no_pages_on_topic</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span><span class="n">xpath_no_pages</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">no_pages_on_topic</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="threading">
<h2>threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h2>
<div class="section" id="non-blocking">
<h3>non-blocking<a class="headerlink" href="#non-blocking" title="Permalink to this headline">¶</a></h3>
<div class="section" id="first-example">
<h4>first example<a class="headerlink" href="#first-example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
<span class="kn">import</span> <span class="nn">time</span>


<span class="k">class</span> <span class="nc">ThreadFunction</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: starting&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: finishing&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">thread</span> <span class="o">=</span> <span class="n">ThreadFunction</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Thread 0: starting</span>
<span class="sd">Thread 1: starting</span>
<span class="sd">Thread 2: starting</span>
<span class="sd">Thread 3: starting</span>
<span class="sd">Thread 4: starting</span>
<span class="sd">Thread 2: finishingThread 0: finishingThread 1: finishing</span>


<span class="sd">Thread 3: finishing</span>
<span class="sd">Thread 4: finishing</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>each iteration runs in parallel and is executed at the same time. So the final script will only last 2 seconds in total since the code is not blocking.</p>
<p>Parallel programming can be very convenient, but it also has its pitfalls. We will now look at some of them and the methods that exist to avoid them.</p>
</div>
</div>
<div class="section" id="thread-synchronization">
<h3>thread synchronization<a class="headerlink" href="#thread-synchronization" title="Permalink to this headline">¶</a></h3>
<p>Programming multiple instruction streams brings its share of difficulties. At first glance, it seems very convenient to have several parts of our code running at the same time. During a task that may take a long time to run (perhaps downloading information from a website) we can do something else, not just wait for the resource to be downloaded.</p>
<p>But development can be proportionately more complicated. You have to keep in mind that different instruction streams can be advanced to different points at a given time.</p>
<div class="section" id="example">
<h4>example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;threads.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="n">thread_1</span> <span class="o">=</span> <span class="n">MyThread</span><span class="p">(</span><span class="s2">&quot;My First thread! &quot;</span><span class="p">)</span>
<span class="n">thread_2</span> <span class="o">=</span> <span class="n">MyThread</span><span class="p">(</span><span class="s2">&quot;My Second thread! &quot;</span><span class="p">)</span>
<span class="n">thread_3</span> <span class="o">=</span> <span class="n">MyThread</span><span class="p">(</span><span class="s2">&quot;My third thread! &quot;</span><span class="p">)</span>
<span class="n">thread_4</span> <span class="o">=</span> <span class="n">MyThread</span><span class="p">(</span><span class="s2">&quot;My fourth thread! &quot;</span><span class="p">)</span>

<span class="n">thread_1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread_2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread_3</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread_4</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;threads.txt&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="c1"># My Second thread! My First thread! My third thread! My 4e thread!</span>
</pre></div>
</div>
</div>
<div class="section" id="lock">
<h4>lock<a class="headerlink" href="#lock" title="Permalink to this headline">¶</a></h4>
<p>There are several ways to “synchronize” our threads, i.e. to make some of the code only run if no one is using the shared resource. The simplest synchronization mechanism is the lock.</p>
<p>It is an object proposed by <cite>threading</cite> that is extremely simple to use: at the beginning of our instructions that use our shared resource, we tell the lock to block for the other threads. If another thread wants to use this resource, it must wait until it is released.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">RLock</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">SyncThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;synch_thread.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="n">thread_1</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 1 /&quot;</span><span class="p">)</span>
<span class="n">thread_2</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 2 /&quot;</span><span class="p">)</span>
<span class="n">thread_3</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 3 /&quot;</span><span class="p">)</span>
<span class="n">thread_4</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 4 /&quot;</span><span class="p">)</span>

<span class="n">thread_1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread_2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread_3</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread_4</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>We import <cite>RLock</cite> from the threading module</p></li>
<li><p>We create a lock that we put into our <cite>lock</cite> variable</p></li>
<li><p>In our <cite>run</cite> method, we lock part of our thread.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">RLock</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">SyncThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;sync_thread.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">thread_1</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 1 /&quot;</span><span class="p">)</span>
    <span class="n">thread_2</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 2 /&quot;</span><span class="p">)</span>
    <span class="n">thread_3</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 3 /&quot;</span><span class="p">)</span>
    <span class="n">thread_4</span> <span class="o">=</span> <span class="n">SyncThread</span><span class="p">(</span><span class="s2">&quot;Thread 4 /&quot;</span><span class="p">)</span>

    <span class="n">thread_1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread_2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread_3</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread_4</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sync_thread.txt&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="c1"># thread order will always be the same</span>
    <span class="c1"># Thread 1 /</span>
    <span class="c1"># Thread 2 /</span>
    <span class="c1"># Thread 3 /</span>
    <span class="c1"># Thread 4 /</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="parsing">
<h2>parsing<a class="headerlink" href="#parsing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="parsing-cli-options">
<h3>parsing cli options<a class="headerlink" href="#parsing-cli-options" title="Permalink to this headline">¶</a></h3>
<div class="section" id="code-with-cli-parsing">
<h4>code with cli parsing<a class="headerlink" href="#code-with-cli-parsing" title="Permalink to this headline">¶</a></h4>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>revise code</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">youtube_search</span> <span class="kn">import</span> <span class="n">YoutubeSearch</span>
<span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">ffmpeg</span>
<span class="kn">from</span> <span class="nn">optparse</span> <span class="kn">import</span> <span class="n">OptionParser</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">pp</span> <span class="o">=</span> <span class="n">pprint</span><span class="o">.</span><span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">home</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span>
<span class="n">music_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">home</span><span class="p">,</span> <span class="s2">&quot;Music&quot;</span><span class="p">)</span>
<span class="n">yt_dl_proc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">home</span><span class="p">,</span> <span class="s2">&quot;.local/bin/youtube-dl&quot;</span><span class="p">)</span>
<span class="n">converted_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">music_folder</span><span class="p">,</span> <span class="s2">&quot;converted&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">song</span><span class="p">,</span> <span class="n">wanted_format</span><span class="p">):</span>
    <span class="n">song_name</span> <span class="o">=</span> <span class="n">song</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">new_song_name</span> <span class="o">=</span> <span class="n">song_name</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">wanted_format</span>
    <span class="n">song_orig</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">music_folder</span><span class="p">,</span> <span class="n">song</span><span class="p">)</span>
    <span class="n">song_dest</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">converted_folder</span><span class="p">,</span> <span class="n">new_song_name</span><span class="p">)</span>
    <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">song_dest</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">converted_folder</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">converted_folder</span><span class="p">)</span>
    <span class="p">(</span>
        <span class="n">ffmpeg</span>
        <span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">song_orig</span><span class="p">)</span>
        <span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">song_dest</span><span class="p">,</span> <span class="n">acodec</span><span class="o">=</span><span class="n">wanted_format</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="s2">&quot;experimental&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">overwrite_output</span><span class="p">()</span>
        <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">capture_stdout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">strip_bad_chars</span><span class="p">(</span><span class="n">bad_string</span><span class="p">):</span>
    <span class="c1"># coding: utf8</span>
    <span class="n">bad_chars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="s1">&#39;!&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">character</span> <span class="ow">in</span> <span class="n">bad_chars</span><span class="p">:</span>
        <span class="n">bad_string</span> <span class="o">=</span> <span class="n">bad_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="c1"># remove weird non string.printable utf-8 characters</span>
    <span class="n">bad_string</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^\x00-\x7f]&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">bad_string</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bad_string</span>


<span class="k">def</span> <span class="nf">replace_unfriendly_chars</span><span class="p">(</span><span class="n">long_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1. strip youtube suffix</span>
<span class="sd">    2. replace spaces with underscores</span>
<span class="sd">    3. strip bad characters</span>
<span class="sd">    4. strip trailing chars</span>
<span class="sd">    5. strip repeating chars</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span><span class="n">strip_youtube_suffix</span><span class="p">,</span> <span class="n">replace_spaces_with_underscores</span><span class="p">,</span> <span class="n">strip_bad_chars</span><span class="p">,</span> <span class="n">strip_trailing_chars</span><span class="p">,</span>
                  <span class="n">strip_repeating_chars</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">operations</span><span class="p">:</span>
        <span class="n">long_string</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">long_string</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">long_string</span>


<span class="k">def</span> <span class="nf">strip_trailing_chars</span><span class="p">(</span><span class="n">long_string</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\W|_)+(\.\w</span><span class="si">{3}</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\2&#39;</span><span class="p">,</span> <span class="n">long_string</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">strip_repeating_chars</span><span class="p">(</span><span class="n">long_string</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\W|_){2,}&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="n">long_string</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">replace_spaces_with_underscores</span><span class="p">(</span><span class="n">long_string</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="n">long_string</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">strip_youtube_suffix</span><span class="p">(</span><span class="n">from_string</span><span class="p">,</span> <span class="n">length_suffix</span><span class="o">=</span><span class="mi">11</span><span class="p">):</span>
    <span class="n">youtube_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;(\W\w{&#39;</span> <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">length_suffix</span><span class="p">))</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;})(\.\w</span><span class="si">{3}</span><span class="s1">)&#39;</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">youtube_pattern</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\2&#39;</span><span class="p">,</span> <span class="n">from_string</span><span class="p">)</span>  <span class="c1"># replace group1, keep matched group2</span>


<span class="k">def</span> <span class="nf">loop_over_files_in</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">apply_this_function</span><span class="p">):</span>
    <span class="n">new_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="n">new_name</span> <span class="o">=</span> <span class="n">apply_this_function</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>  <span class="c1"># todo: check if function returns string</span>
        <span class="k">if</span> <span class="n">new_name</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">file</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">new_name</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">search_youtube</span><span class="p">(</span><span class="n">search_phrase</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">YoutubeSearch</span><span class="p">(</span><span class="n">search_phrase</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">results</span>


<span class="k">def</span> <span class="nf">convert_audio</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">format_to_convert</span><span class="p">,</span> <span class="n">wanted_format</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">format_to_convert</span><span class="p">):</span>
            <span class="n">file_location</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">file_location</span><span class="p">)</span>
            <span class="c1"># file_name = file.rsplit(&#39;.&#39;, 1)  # split only once</span>
            <span class="c1"># convert(file, this_format, to_that_format)</span>
            <span class="c1"># song = AudioSegment.from_file(file_location, current_format)               # song.export(file_location, wanted_format)</span>


<span class="k">def</span> <span class="nf">clean_audio_filenames</span><span class="p">():</span>
    <span class="n">loop_over_files_in</span><span class="p">(</span><span class="n">music_folder</span><span class="p">,</span> <span class="n">replace_unfriendly_chars</span><span class="p">)</span>


<span class="c1"># https://github.com/ytdl-org/youtube-dl/blob/master/README.md#readme</span>
<span class="k">def</span> <span class="nf">download_youtube_audio</span><span class="p">(</span><span class="n">youtube_id</span><span class="p">,</span> <span class="n">audio_format</span><span class="o">=</span><span class="s2">&quot;opus&quot;</span><span class="p">):</span>
    <span class="n">title_args</span> <span class="o">=</span> <span class="p">[</span><span class="n">yt_dl_proc</span><span class="p">,</span> <span class="s2">&quot;--get-title&quot;</span><span class="p">,</span> <span class="n">youtube_id</span><span class="p">]</span>
    <span class="n">yt_dl_args</span> <span class="o">=</span> <span class="p">[</span><span class="n">yt_dl_proc</span><span class="p">,</span> <span class="s2">&quot;-x&quot;</span><span class="p">,</span> <span class="s2">&quot;--audio-format&quot;</span><span class="p">,</span> <span class="n">audio_format</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%(title)s</span><span class="s2">.</span><span class="si">%(ext)s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">youtube_id</span><span class="p">]</span>
    <span class="c1"># Specify audio format: &quot;best&quot;, &quot;aac&quot;, &quot;flac&quot;, &quot;mp3&quot;, &quot;m4a&quot;, &quot;opus&quot;, &quot;vorbis&quot;, or &quot;wav&quot;; &quot;best&quot; by default; N</span>
    <span class="c1"># webm container on youtube has ogg audio = opus by default</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">music_folder</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="s2">&quot;downloading &quot;</span> <span class="o">+</span> <span class="n">youtube_id</span> <span class="o">+</span> <span class="s2">&quot; in &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">audio_format</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; format&quot;</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">yt_dl_args</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># returns cleaned song_title = filename  # .strip() removes trailing \n</span>
        <span class="n">song_title</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">title_args</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">replace_spaces_with_underscores</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">song_title</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">audio_format</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">proc_err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to run youtube-dl with error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">proc_err</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">check_youtube_id</span><span class="p">(</span><span class="n">yt_id</span><span class="p">):</span>
    <span class="n">id_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\w</span><span class="si">{11}</span><span class="s1">&#39;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">id_pattern</span><span class="p">,</span> <span class="n">yt_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">yt_id</span><span class="p">)</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;youtube id has to be exactly 11 alphanumeric characters&quot;</span><span class="p">)</span>

<span class="c1"># https://docs.python.org/3/library/optparse.html</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s2">&quot;usage: %prog [options] youtube_id&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">OptionParser</span><span class="p">()</span>
    <span class="c1"># parser.add_option(&quot;-i&quot;, &quot;--input&quot;, dest=&quot;input_format&quot;, help=&quot;audio format as input, eg: ogg&quot;, metavar=&quot;INPUT&quot;)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="s2">&quot;--out-format&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;output_format&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;opus&quot;</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify audio format: </span><span class="se">\&quot;</span><span class="s2">best</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">aac</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">flac</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">mp3</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">m4a</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
                           <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">opus</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">vorbis</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">wav</span><span class="se">\&quot;</span><span class="s2"> </span><span class="se">\&quot;</span><span class="s2">best</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
                      <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;OUTPUT&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;let&#39;s hear it!&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_false&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;hush little puppy :)&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="s2">&quot;options: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">options</span><span class="p">))</span>
    <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="s2">&quot;arguments: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
    <span class="n">youtube_id</span> <span class="o">=</span> <span class="s2">&quot;Wa9YSAdbKh8&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;youtube id argument required&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;only Youtube id required, don&#39;t specify additional arguments&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">check_youtube_id</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">youtube_id</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;not a valid youtube id given as argument, pls double check&quot;</span><span class="p">)</span>
    <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">search_youtube</span><span class="p">(</span><span class="s1">&#39;binaural music focus&#39;</span><span class="p">))</span>
    <span class="n">wanted_format</span> <span class="o">=</span> <span class="s1">&#39;mp3&#39;</span>
    <span class="n">song_downloaded</span> <span class="o">=</span> <span class="n">download_youtube_audio</span><span class="p">(</span><span class="n">youtube_id</span><span class="p">)</span>
    <span class="c1"># clean_audio_filenames()</span>
    <span class="c1"># time.sleep(10)</span>
    <span class="c1"># convert(song_downloaded, &quot;m4a&quot;)</span>
    <span class="n">test_song</span> <span class="o">=</span> <span class="s2">&quot;test_song.m4a&quot;</span>
    <span class="c1"># convert(test_song, &quot;m4a&quot;)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="techtalk/main.html" class="btn btn-neutral float-right" title="techtalks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="links.html" class="btn btn-neutral float-left" title="Links" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Patrick Brunswyck.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>