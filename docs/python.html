

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>python &mdash; Patrick&#39;s Docs alpha documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="GIT" href="git.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Patrick's Docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="links.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">GIT</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fundamentals">fundamentals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modularity">modularity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#main-function-cli-arguments">main function &amp; cli arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docstrings">docstrings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#objects">objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#function-default-values-for-arguments">function default values for arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#collections">collections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tuple">tuple</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string">string</a></li>
<li class="toctree-l4"><a class="reference internal" href="#range">range</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list">list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shallow-copies">shallow copies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-repetition">list repetition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#more-on-list">more on list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#growing-lists">growing lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reversing-and-sorting-lists">reversing and sorting lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dictionary">dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set">set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#collection-protocols">collection protocols</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#handling-exceptions">handling exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exception-and-control-flow">exception and control flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#handling-raised-exceptions">handling raised exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programmer-errors">programmer errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#re-raising-exceptions">re-raising exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exceptions-as-apis">exceptions as APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clean-up-actions">clean-up actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#platform-specific-code">platform-specific code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#comprehensions-iterables-and-generators">Comprehensions, iterables and generators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#list-comprehensions">list comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-comprehensions">set comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dictionary-comprehensions">dictionary comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filtering-predicates">filtering predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iteration-protocols">iteration protocols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generators">generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stateful-generators">stateful generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generator-comprehensions">generator comprehensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-itertools">using itertools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary-comprehensions-generators">summary comprehensions generators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#classes">classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#summary-classes">summary classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#files-and-resource-management">files and resource management</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Patrick's Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>python</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/python.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python">
<h1>python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h1>
<div class="section" id="fundamentals">
<h2>fundamentals<a class="headerlink" href="#fundamentals" title="Permalink to this headline">¶</a></h2>
<div class="section" id="modularity">
<h3>modularity<a class="headerlink" href="#modularity" title="Permalink to this headline">¶</a></h3>
<div class="section" id="main-function-cli-arguments">
<h4>main function &amp; cli arguments<a class="headerlink" href="#main-function-cli-arguments" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="c1"># the module is being executed directly not imported</span>
    <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># the 0th arg is the module/script filename</span>
</pre></div>
</div>
<p>more on command-line parsing module: <a class="reference external" href="https://docs.python.org/3/howto/argparse.html">https://docs.python.org/3/howto/argparse.html</a>
an alternative is docopt: <a class="reference external" href="https://github.com/docopt/docopt">https://github.com/docopt/docopt</a></p>
</div>
<div class="section" id="docstrings">
<h4>docstrings<a class="headerlink" href="#docstrings" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_funtion</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Print items one per line</span>

<span class="sd">    Args:</span>
<span class="sd">        An iterable series of printable items</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="module-docstrings">
<h5>module docstrings<a class="headerlink" href="#module-docstrings" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; retrieve and print items from a list</span>

<span class="sd">Usage:</span>

<span class="sd">    python3 list.py &lt;list&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">sys</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when you now call help on the module you’ll get a lot of information</p>
</div>
</div>
</div>
<div class="section" id="objects">
<h4>objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># id() returns a unique identifier for an object</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">300</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">4298473345</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1500</span>
<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">4298222345</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">4298473345</span> <span class="c1"># same as a</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="kc">True</span>
<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="function-default-values-for-arguments">
<h4>function default values for arguments<a class="headerlink" href="#function-default-values-for-arguments" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">banner</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">):</span> <span class="c1"># place after args without defaults</span>
 <span class="n">line</span> <span class="o">=</span> <span class="n">border</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
 <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
 <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
 <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="n">banner</span><span class="p">(</span><span class="s2">&quot;Norwegian Blue&quot;</span><span class="p">)</span>
<span class="n">banner</span><span class="p">(</span><span class="s2">&quot;Sun, Moon and Stars&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span>
<span class="n">banner</span><span class="p">(</span><span class="s2">&quot;Sun, Moon and Stars&quot;</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>
<span class="n">banner</span><span class="p">(</span><span class="n">border</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello from Earth&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>always use immutable objects like ints and strings as default values eg you dont want a function time to always show the time of first function call</p>
</div>
</div>
</div>
<div class="section" id="collections">
<h3>collections<a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h3>
<div class="section" id="tuple">
<h4>tuple<a class="headerlink" href="#tuple" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">k</span> <span class="o">=</span> <span class="p">(</span><span class="mi">391</span><span class="p">,)</span> <span class="c1"># use the trailing comma, otherwise it will be an int</span>

<span class="k">def</span> <span class="nf">minmax</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">items</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="c1"># tuples are useful for multiple return values</span>

<span class="n">minmax</span><span class="p">([</span><span class="mi">83</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">86</span><span class="p">])</span>

<span class="c1"># tuple unpacking allows us to destructure into named references</span>
<span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">minmax</span><span class="p">([</span><span class="mi">83</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">86</span><span class="p">])</span>
<span class="n">lower</span>
<span class="mi">31</span>
<span class="n">upper</span>
<span class="mi">86</span>
<span class="c1"># idiomatic python swap</span>
<span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;jelly&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;bean&#39;</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>
<span class="n">a</span>
<span class="s1">&#39;bean&#39;</span>
<span class="c1"># use the tuple() constructor to create tuples from other iterable objects</span>
<span class="nb">tuple</span><span class="p">([</span><span class="mi">561</span><span class="p">,</span> <span class="mi">1105</span><span class="p">,</span> <span class="mi">1219</span><span class="p">,</span> <span class="mi">2466</span><span class="p">])</span>
<span class="p">(</span><span class="mi">561</span><span class="p">,</span> <span class="mi">1105</span><span class="p">,</span> <span class="mi">1219</span><span class="p">,</span> <span class="mi">2466</span><span class="p">)</span>
<span class="nb">tuple</span><span class="p">(</span><span class="s2">&quot;Patrick&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="mi">5</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>
<span class="kc">True</span>
<span class="mi">4</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="string">
<h4>string<a class="headerlink" href="#string" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;New&quot;</span> <span class="o">+</span> <span class="s2">&quot;found&quot;</span> <span class="o">+</span> <span class="s2">&quot;land&quot;</span>
<span class="s1">&#39;Newfoundland&#39;</span>
<span class="c1"># use join</span>
<span class="n">colors</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;#45ff12&#39;</span><span class="p">,</span> <span class="s1">&#39;#2323fa&#39;</span><span class="p">,</span> <span class="s1">&#39;#1234a2&#39;</span><span class="p">,</span> <span class="s1">&#39;#4313ff&#39;</span><span class="p">])</span>
<span class="s1">&#39;#45ff12;#2323fa;#1234a2;#4313ff&#39;</span>
<span class="c1"># split them up again</span>
<span class="n">colors</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;#45ff12&#39;</span><span class="p">,</span> <span class="s1">&#39;#2323fa&#39;</span><span class="p">,</span> <span class="s1">&#39;#1234a2&#39;</span><span class="p">,</span> <span class="s1">&#39;#4313ff&#39;</span><span class="p">]</span>
<span class="c1"># using the empty string as a seperator to join</span>
<span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="s1">&#39;way&#39;</span><span class="p">,</span> <span class="s1">&#39;man&#39;</span><span class="p">])</span>
<span class="s1">&#39;highwayman&#39;</span>
<span class="c1"># partion() divides a string -&gt; prefix,seperator,suffix</span>
<span class="s2">&quot;unforgetable&quot;</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;forget&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;un&#39;</span><span class="p">,</span> <span class="s1">&#39;forget&#39;</span><span class="p">,</span> <span class="s1">&#39;able&#39;</span><span class="p">)</span>
<span class="c1"># usage with tuples</span>
<span class="n">departure</span><span class="p">,</span> <span class="n">seperator</span><span class="p">,</span> <span class="n">arrival</span> <span class="o">=</span> <span class="s2">&quot;London:Edinburgh&quot;</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
<span class="n">arrival</span>
<span class="n">Edinburgh</span>
<span class="c1"># underscore dummy value</span>
<span class="n">origin</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">destination</span> <span class="o">=</span> <span class="s2">&quot;Seattle-Boston&quot;</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="c1"># use format() to insert values into strings</span>
<span class="s2">&quot;The age of </span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;patrick&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
<span class="s2">&quot;The age of </span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2">. </span><span class="si">{0}</span><span class="s2">&#39;s birthday is on </span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;Patrick&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="s1">&#39;June 1&#39;</span><span class="p">)</span>
<span class="c1"># they can be ommitted when in the exact order and used only once</span>
<span class="s2">&quot;The age of </span><span class="si">{}</span><span class="s2"> is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;patrick&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
<span class="c1"># use named fields</span>
<span class="s2">&quot;Current position </span><span class="si">{latitude}</span><span class="s2"> </span><span class="si">{longitude}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;60N&quot;</span><span class="p">,</span>
                                                 <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;5E&quot;</span><span class="p">)</span>
<span class="s1">&#39;Current position 60N 5E&#39;</span>
<span class="c1"># access values through keys or indexes with []</span>
<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mf">65.2</span><span class="p">,</span> <span class="mf">23.1</span><span class="p">,</span> <span class="mf">82.2</span><span class="p">)</span>
<span class="s2">&quot;Galactic position x=</span><span class="si">{pos[0]}</span><span class="s2"> y={pos[1] z=</span><span class="si">{pos[2]}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">)</span>
<span class="s1">&#39;Galactic position x=65.2 y=23.1 z=82.2&#39;</span>
<span class="c1"># replacement field mini-language provides many value n alignment formatting options</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="s2">&quot;Math constants: pi=</span><span class="si">{m.pi:.3f}</span><span class="s2">, e=</span><span class="si">{m.e:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">math</span><span class="p">)</span>
<span class="s1">&#39;Math constants: pi=3.142, e=2.718&#39;</span>
<span class="n">help</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="range">
<h4>range<a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># stop is not included</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="c1"># with step argument</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="c1"># avoid range for iterating over lists</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="c1"># not</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c1"># prefer enumerate() for counters</span>
<span class="c1"># enumerate() yields (index, value) tuples</span>
<span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">333</span><span class="p">,</span> <span class="mi">8888</span><span class="p">,</span> <span class="mi">144444</span><span class="p">,</span> <span class="mi">2012011</span><span class="p">]</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">333</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8888</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">144444</span><span class="p">)</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2012011</span><span class="p">)</span>
<span class="c1"># improvement with tuple unpacking</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;i = </span><span class="si">{}</span><span class="s2">, v = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">333</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">8888</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">144444</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">2012011</span>
</pre></div>
</div>
</div>
<div class="section" id="list">
<h4>list<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># SHALLOW copying a list (contain same object references as the source list!!)</span>
<span class="n">copy_list</span> <span class="o">=</span> <span class="n">sequence</span><span class="p">[:]</span> <span class="c1"># full slice</span>
<span class="n">copy_list</span> <span class="o">=</span> <span class="n">other_list</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1"># use copy method</span>
<span class="n">copy_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">some_other_list</span><span class="p">)</span> <span class="c1"># use the list constructor</span>
</pre></div>
</div>
</div>
<div class="section" id="shallow-copies">
<h4>shallow copies<a class="headerlink" href="#shallow-copies" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span> <span class="c1"># create a shallow copy</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="c1"># create new list in a at 0</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># b still references to the old list object b4 a created a new one</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># just appending to the list in a also affects the list for b</span>
<span class="n">b</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="c1"># they both still refer to the same object</span>
</pre></div>
</div>
</div>
<div class="section" id="list-repetition">
<h4>list repetition<a class="headerlink" href="#list-repetition" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># repeat lists using the * operator</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">]</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">c</span> <span class="o">*</span> <span class="mi">4</span>
<span class="n">d</span>
<span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">37</span><span class="p">]</span> <span class="c1"># this method is often used to zero a list of fixed length</span>
<span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">constant</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">9</span> <span class="c1"># same principle as with list copying so beware, repetition = shallow</span>
<span class="c1"># repetition repeats the reference without copying the value</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">s</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
<span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="c1"># because all innerlists refer to same object they are all modified</span>
<span class="n">s</span>
<span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="section" id="more-on-list">
<h4>more on list<a class="headerlink" href="#more-on-list" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">w</span> <span class="o">=</span> <span class="s2">&quot;the quick brown fox jumps over the lazy dog&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;quick&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">,</span> <span class="s1">&#39;jumps&#39;</span><span class="p">,</span> <span class="s1">&#39;over&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;lazy&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">]</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;fox&#39;</span><span class="p">)</span>
<span class="n">i</span>
<span class="mi">3</span>
<span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="s1">&#39;fox&#39;</span>
<span class="n">w</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;unicorn&#39;</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="s1">&#39;unicorn&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span>
<span class="n">w</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;the&#39;</span><span class="p">)</span>
<span class="mi">2</span>
<span class="c1"># just test membership</span>
<span class="mi">37</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">53</span><span class="p">]</span>
<span class="kc">True</span>
<span class="mi">78</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">53</span><span class="p">]</span>
<span class="kc">True</span>
<span class="n">u</span> <span class="o">=</span> <span class="s2">&quot;jackdaws love my big sphinx of quartz&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="n">u</span>
<span class="p">[</span><span class="s1">&#39;jackdaws&#39;</span><span class="p">,</span> <span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;big&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;quartz&#39;</span><span class="p">]</span>
<span class="k">del</span> <span class="n">u</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;jackdaws&#39;</span><span class="p">,</span> <span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;quartz&#39;</span><span class="p">]</span>
<span class="c1"># remove elements by value rather than position</span>
<span class="n">u</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;jackdaws&#39;</span><span class="p">)</span>
<span class="n">u</span>
<span class="p">[</span><span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;quartz&#39;</span><span class="p">]</span>
<span class="c1"># the equivalent to remove using the index:</span>
<span class="k">del</span> <span class="n">u</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;quartz&#39;</span><span class="p">)]</span>
<span class="n">u</span>
<span class="p">[</span><span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;sphinx&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">]</span>
<span class="n">u</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;pyramid&#39;</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="nb">list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span>

<span class="c1"># insertion seq.insert(index, item)</span>
<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;I accidentally the whole universe&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">)</span>
<span class="n">a</span>
<span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;accidentally&#39;</span><span class="p">,</span> <span class="s1">&#39;destroyed&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;whole&#39;</span><span class="p">,</span> <span class="s1">&#39;universe&#39;</span><span class="p">]</span>
<span class="c1"># use join method on a space seperator</span>
<span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="s1">&#39;I accidentally destroyed the whole universe&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="growing-lists">
<h4>growing lists<a class="headerlink" href="#growing-lists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># concatenate lists</span>
<span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span>
<span class="n">k</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>
<span class="c1"># using assignment operator</span>
<span class="n">k</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="c1"># or use the extend method</span>
<span class="n">k</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">76</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">199</span><span class="p">])</span>
<span class="n">k</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">199</span><span class="p">]</span>
<span class="c1"># these techniques work with any iterable series on the righthand side</span>
</pre></div>
</div>
</div>
<div class="section" id="reversing-and-sorting-lists">
<h4>reversing and sorting lists<a class="headerlink" href="#reversing-and-sorting-lists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">1211</span><span class="p">,</span> <span class="mi">112111</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span>
<span class="go">[112111, 1211, 21, 11, 1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">149</span><span class="p">,</span> <span class="mi">3299</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">67</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">[5, 7, 13, 17, 29, 41, 67, 71, 149, 3299]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">[3299, 149, 71, 67, 41, 29, 17, 13, 7, 5]</span>
<span class="go"># key argument to sort() method accepts a function for producing a sort key from an item</span>
<span class="go"># e.g. sort words in order of length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;not perplexing do handwriting family where I illegibly know doctors&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span>
<span class="go">[&#39;not&#39;, &#39;perplexing&#39;, &#39;do&#39;, &#39;handwriting&#39;, &#39;family&#39;, &#39;where&#39;, &#39;I&#39;, &#39;illegibly&#39;, &#39;know&#39;, &#39;doctors&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span>
<span class="go">[&#39;I&#39;, &#39;do&#39;, &#39;not&#39;, &#39;know&#39;, &#39;where&#39;, &#39;family&#39;, &#39;doctors&#39;, &#39;illegibly&#39;, &#39;perplexing&#39;, &#39;handwriting&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
<span class="go">&#39;I do not know where family doctors illegibly perplexing handwriting&#39;</span>
<span class="go"># sorted() built-in function sorts any iterable series and returns a list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">[1, 2, 4, 9]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[4, 9, 2, 1]</span>
<span class="go"># reversed() built-in function reverses any iterable series</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span>
<span class="go">&lt;list_reverseiterator object at 0x7ffa18086e48&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="go">[0, 1, 3, 9]</span>
<span class="go"># reversed returns an iterator so you need to convert it to a list (explained later)</span>
<span class="go"># these two sort methods will work on any finite iterable source object</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary">
<h4>dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># key objects must be immutable! e.g. Str, numbers and tuples NOT lists!</span>
<span class="c1"># value objects can be mutable</span>
<span class="c1"># the order in dictionaries are random, don&#39;t rely on it</span>
<span class="c1"># dict() constructor accepts:</span>
<span class="c1"># iterable series of key-vlaue 2-tuples</span>
<span class="c1"># keyword arguments - requires keys are valid Python identifiers</span>
<span class="c1"># a mapping such as another dict</span>
<span class="n">names_and_ages</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">48</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Charlie&#39;</span><span class="p">,</span> <span class="mi">28</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Daniel&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">names_and_ages</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
<span class="p">{</span><span class="s1">&#39;Charlie&#39;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span> <span class="s1">&#39;Daniel&#39;</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="s1">&#39;Alice&#39;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">:</span> <span class="mi">48</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phonetic</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;alfa&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;bravo&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="s1">&#39;echo&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;foxtrot&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phonetic</span>
<span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;bravo&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;alfa&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;foxtrot&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s1">&#39;echo&#39;</span><span class="p">}</span>
<span class="c1"># copying dictionaries is also shallow</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">e</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># Extend a dictionary with update()</span>
<span class="n">f</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{key}</span><span class="s2"> = &gt; </span><span class="si">{value}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
<span class="c1"># if you want to iterate only over the values use values()</span>
<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># there is no efficient way to get the key corresponding to a value!!</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="c1"># iterable view onto keys - not often needed</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="c1"># adding to a dictionary and using prettyprint</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
<span class="o">...</span>      <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;H&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span>
<span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;H&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span>
<span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
 <span class="s1">&#39;Be&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
 <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
 <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
 <span class="s1">&#39;He&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
 <span class="s1">&#39;Li&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
 <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="set">
<h4>set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h4>
<p>set is an unordered collection of unique, immutable objects
looks like a dict but each item is a single object</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>empty {} create a dict so for empty set use the set() constructor</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="n">e</span>
<span class="nb">set</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">262144</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span> <span class="c1"># order is arbitrary</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">4096</span>
<span class="mi">64</span>
<span class="mi">2</span>
<span class="mi">65536</span>
<span class="mi">4</span>
<span class="mi">262144</span>
<span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="c1"># duplicates are discarded!</span>
<span class="c1"># so often used to remove duplicates - not order preserving</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">4096</span>
<span class="mi">64</span>
<span class="mi">2</span>
<span class="mi">65536</span>
<span class="mi">4</span>
<span class="mi">262144</span>
<span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span> <span class="ow">in</span> <span class="n">s</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">555</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="mi">2</span>
<span class="c1"># discard doesn&#39;t throw an error if item not present and so always succeeds</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">k</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># shallow copies</span>
<span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">n</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span>
<span class="p">{</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65536</span><span class="p">,</span> <span class="mi">262144</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>

<span class="c1"># set algebra showcase</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Joshua&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">can_smell_hidrogencyanide</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">taste_ptc</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span> <span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Lola&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Josjua&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ab_blood</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Lola&#39;</span><span class="p">}</span>
<span class="c1"># find people with blond hair, blue eyes or both -&gt; use union method</span>
<span class="c1"># is commutative</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Amelia&#39;</span><span class="p">,</span> <span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span> <span class="o">==</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># find people with blond hair AND blue eyes -&gt; use intersection method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Harry&#39;</span><span class="p">,</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span> <span class="s1">&#39;Amelia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span> <span class="o">==</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># find people with blond hair who don&#39;t have blue eyes -&gt; use difference method</span>
<span class="c1"># non-commutative because people who have blue eyes but not blond hair is not the same</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Mia&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span> <span class="o">==</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="kc">False</span>
<span class="c1"># exclusively blond hair OR blue_eyes but not both -&gt; symmetric_difference() method</span>
<span class="c1"># commutative</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Mia&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Joshua&#39;</span><span class="p">,</span> <span class="s1">&#39;Lily&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">blond_hair</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">blue_eyes</span><span class="p">)</span> <span class="o">==</span> <span class="n">blue_eyes</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># 3 predicates to tell us about the relationship between sets</span>
<span class="c1"># check is one set is a subset of a set -&gt; issubset() method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">can_smell_hidrogencyanide</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">blond_hair</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># test if people who can taste ptc can also taste hydrogencyanide -&gt; use issuperset() method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">taste_ptc</span><span class="o">.</span><span class="n">issuperset</span><span class="p">(</span><span class="n">can_smell_hidrogencyanide</span><span class="p">)</span>
<span class="kc">True</span>
<span class="c1"># test that sets have no members in common -&gt; isdisjoint() method</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a_blood</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">o_blood</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="collection-protocols">
<h4>collection protocols<a class="headerlink" href="#collection-protocols" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Protocol</p></th>
<th class="head"><p>Implementing Collections</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Container</p></td>
<td><p>str, list, range, tuple, set, bytes, dict</p></td>
</tr>
<tr class="row-odd"><td><p>Sized</p></td>
<td><p>str, list, range, tuple, set, bytes, dict</p></td>
</tr>
<tr class="row-even"><td><p>Iterable</p></td>
<td><p>str, list, range, tuple, set, bytes, dict</p></td>
</tr>
<tr class="row-odd"><td><p>Sequence</p></td>
<td><p>str, list, range, tuple, set, bytes</p></td>
</tr>
<tr class="row-even"><td><p>Mutable Sequence</p></td>
<td><p>list</p></td>
</tr>
<tr class="row-odd"><td><p>Mutable Set</p></td>
<td><p>set</p></td>
</tr>
<tr class="row-even"><td><p>Mutable Mapping</p></td>
<td><p>dict</p></td>
</tr>
</tbody>
</table>
<dl>
<dt>Protocols</dt><dd><ul class="simple">
<li><p>To implement a protocol, objects must support certain operations.</p></li>
<li><p>Most collections implement container , sized and iterable.</p></li>
<li><p>All except dict are sequences.</p></li>
</ul>
</dd>
<dt>Container Protocol</dt><dd><ul class="simple">
<li><p>Membership testing using in and not in</p></li>
</ul>
</dd>
<dt>Sized Protocol</dt><dd><ul class="simple">
<li><p>Determine number of elements with len(s)</p></li>
</ul>
</dd>
<dt>Iterable Protocol</dt><dd><ul>
<li><p>Can produce and iterator with iter(s)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
<p>Sequence Protocol</p>
<blockquote>
<div><ul class="simple">
<li><p>Retrieve elements by index
<cite>item = seq[index]</cite></p></li>
<li><p>Find items by value
<cite>index = seq.index(item)</cite></p></li>
<li><p>Count items
<cite>num = seq.count(item)</cite></p></li>
<li><p>Produce a reversed sequence
<cite>r = reversed(seq)</cite></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Collections Summary
- Tuples are immutable sequence types
- Literal syntax: optional parentheses around a comma separated list
- Single element tuples must use trailing comma</p></li>
<li><p>Tuple unpacking - return values and idiomatic swap
- Strings are immutable sequence types of Unicode codepoints
- String concatenation is most efficiently performed with join() on an empty separator
- The partition() method is a useful and elegant string parsing tool.
- The format() method provides a powerful way of replacing placeholders with values.</p></li>
<li><p>Ranges represent integer sequences with regular intervals
- Ranges are arithmetic progressions
- The enumerate() function is often a superior alternative to range()</p></li>
<li><p>Lists are heterogeneous mutable sequence types
- Negative indexes work backwards from the end.
- Slicing allows us to copy all or part of a list.
- The full slice is a common idiom for copying lists, although the copy() method and list() constructor are less obscure.
- List (and other collection) copies are shallow.
- List repetition is shallow.</p></li>
<li><p>Dictionaries map immutable keys to mutable values
- Iteration and membership testing is done with respect to the keys.
- Order is arbitrary
- The keys(), values() and items() methods provide views onto different aspects of a dictionary, allowing convenient iteration.</p></li>
<li><p>Sets store an unordered collection of unique elements
- Sets support powerful and expressive set algebra operations and predicates.</p></li>
<li><p>Protocols such as iterable, sequence and container characterise the collections.</p></li>
</ul>
</div>
</div>
<div class="section" id="handling-exceptions">
<h3>handling exceptions<a class="headerlink" href="#handling-exceptions" title="Permalink to this headline">¶</a></h3>
<p><strong>Raise</strong> an exception to interrupt program flow
<strong>Handle</strong> an exception to resume control
<strong>Unhandled exceptions</strong> will terminate the program
<strong>exception objects</strong> contain information about the exceptional event</p>
<div class="section" id="exception-and-control-flow">
<h4>exception and control flow<a class="headerlink" href="#exception-and-control-flow" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;A module for demonstrating exceptions.&#39;&#39;&#39;</span>

<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert to an integer.&#39;&#39;&#39;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># int contstructor will raise an exception upon entering a string</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="c1"># type of exception object</span>
<span class="c1"># ValueError: invalid literal for int() with base 10: &#39;somestring&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-raised-exceptions">
<h4>handling raised exceptions<a class="headerlink" href="#handling-raised-exceptions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span> <span class="c1"># try block contains code that can raise an exception</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># print(&quot;Conversion succeeded! x = &quot;, x) #  the print won&#39;t execute when the exception is raised</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span> <span class="c1"># except block performs error handling in the event an exception is raised</span>
        <span class="c1"># print(&quot;conversion failed!&quot;)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<p>Trying to convert a list with numbers will raise another exception
<cite>convert([4, 5, 6])</cite>
TypeError: int() argument must be a string, a bytes-like object or a number, not ‘list’</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the except statement excepts a tuple of exception types</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion succeeded! x =&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion failed!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div>
<div class="section" id="programmer-errors">
<h4>programmer errors<a class="headerlink" href="#programmer-errors" title="Permalink to this headline">¶</a></h4>
<p>IndentationError, SyntaxError and NameError are programmer errors and should be corrected during development</p>
<p>you can use pass when you have an empty except block</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<p>when you want to interrogate the exception object for more detail use as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion error: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="re-raising-exceptions">
<h4>re-raising exceptions<a class="headerlink" href="#re-raising-exceptions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a string to an integer.&#39;&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion error: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">raise</span> <span class="c1"># instead of returning an unpythonic error code emit the error msg and reraise the exception object</span>


<span class="k">def</span> <span class="nf">string_log</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">log</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="exceptions-as-apis">
<h4>exceptions as APIs<a class="headerlink" href="#exceptions-as-apis" title="Permalink to this headline">¶</a></h4>
<p>Callers need to know what exceptions to expect and when</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Compute square roots using the method of Heron of Alexandria.</span>

<span class="sd">    Args:</span>
<span class="sd">        x: The number for which the square root is to be computed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The square root of x.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If x is negative.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot compute square root of negative number </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="n">guess</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">guess</span> <span class="o">*</span> <span class="n">guess</span> <span class="o">!=</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">guess</span> <span class="o">=</span> <span class="p">(</span><span class="n">guess</span> <span class="o">+</span> <span class="n">x</span> <span class="o">/</span> <span class="n">guess</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">guess</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is never printed.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Program execution continues normally here.&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it’s usually not worth checking types, this can limit your functions unnecessarily</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it’s Easier to Ask Forgiveness than Permission (example 2)</p>
</div>
<p>example1</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">p</span> <span class="o">=</span> <span class="s1">&#39;/path/to/datafile.dat&#39;</span>
<span class="c1"># only check for existence, what if file is garbage, what if path refers to dir instead of file</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">process_file</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No such file as </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
</pre></div>
</div>
<p>example2</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="s1">&#39;/path/to/datafile.dat&#39;</span>

<span class="c1"># no checks in advance</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">process_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Could not process file because </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</pre></div>
</div>
<p>Error codes require interspersed, local handling
Error codes are silent by default
Exceptions allow centralized, non-local handling
Exceptions require explicit handling</p>
<p>so we work with exceptions in python</p>
</div>
<div class="section" id="clean-up-actions">
<h4>clean-up actions<a class="headerlink" href="#clean-up-actions" title="Permalink to this headline">¶</a></h4>
<p>try…finally lets you clean up whether an exception occurs or not</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">make_at</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">):</span>
    <span class="n">original_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span> <span class="c1"># if this fails then</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">original_path</span><span class="p">)</span> <span class="c1"># this won&#39;t happen</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>finally-block is executed no matter how the try-block exits</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">make_at</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">):</span>
    <span class="n">original_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">original_path</span><span class="p">)</span> <span class="c1"># runs even if OSError is thrown and handled</span>
</pre></div>
</div>
</div>
<div class="section" id="platform-specific-code">
<h4>platform-specific code<a class="headerlink" href="#platform-specific-code" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;keypress - A module for detecting a single keypress.&quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">msvcrt</span>

    <span class="k">def</span> <span class="nf">getkey</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Wait for a keypress and return a single character string.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">msvcrt</span><span class="o">.</span><span class="n">getch</span><span class="p">()</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span> <span class="c1"># when importing the windos module fails, the error is silenced explicitely, if this fails it will not be silenced</span>

    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="kn">import</span> <span class="nn">tty</span>
    <span class="kn">import</span> <span class="nn">termios</span>

    <span class="k">def</span> <span class="nf">getkey</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Wait for a keypress and return a single character string.&quot;&quot;&quot;</span>
        <span class="n">fd</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">fileno</span><span class="p">()</span>
        <span class="n">original_attributes</span> <span class="o">=</span> <span class="n">termios</span><span class="o">.</span><span class="n">tcgetattr</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tty</span><span class="o">.</span><span class="n">setraw</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">termios</span><span class="o">.</span><span class="n">tcsetattr</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">termios</span><span class="o">.</span><span class="n">TCSADRAIN</span><span class="p">,</span> <span class="n">original_attributes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ch</span>

    <span class="c1"># If either of the Unix-specific tty or termios are not found,</span>
    <span class="c1"># we allow the ImportError to propagate from here</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="comprehensions-iterables-and-generators">
<h3>Comprehensions, iterables and generators<a class="headerlink" href="#comprehensions-iterables-and-generators" title="Permalink to this headline">¶</a></h3>
<div class="section" id="list-comprehensions">
<h4>list comprehensions<a class="headerlink" href="#list-comprehensions" title="Permalink to this headline">¶</a></h4>
<p>[ expr(item) for item in iterable ]
for each item in the iterable object on the right evaluate the expression on the left</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;Why&#39;</span><span class="p">,</span> <span class="s1">&#39;sometimes&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;have&#39;</span><span class="p">,</span> <span class="s1">&#39;believed&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span> <span class="s1">&#39;many&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span> <span class="s1">&#39;six&#39;</span><span class="p">,</span> <span class="s1">&#39;possible&#39;</span><span class="p">,</span> <span class="s1">&#39;things&#39;</span><span class="p">,</span> <span class="s1">&#39;before&#39;</span><span class="p">,</span> <span class="s1">&#39;breakfast&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">factorial</span>
<span class="n">f</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">]</span>
<span class="n">f</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="c1">#&lt;class &#39;list&#39;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="set-comprehensions">
<h4>set comprehensions<a class="headerlink" href="#set-comprehensions" title="Permalink to this headline">¶</a></h4>
<p>{ expr(item) for item in iterable }</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary-comprehensions">
<h4>dictionary comprehensions<a class="headerlink" href="#dictionary-comprehensions" title="Permalink to this headline">¶</a></h4>
<p>{ key_expr:value_expr for item in iterable }</p>
<p>If we want both the keys and the values we should use the items() method and then use tuple unpacking country, capital</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">country_to_capital</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;United Kingdom&#39;</span><span class="p">:</span> <span class="s1">&#39;London&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Brazil&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazilia&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Morocco&#39;</span><span class="p">:</span> <span class="s1">&#39;Rabat&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Sweden&#39;</span><span class="p">:</span> <span class="s1">&#39;Stockholm&#39;</span><span class="p">}</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="n">capital_to_country</span> <span class="o">=</span> <span class="p">{</span> <span class="n">capital</span><span class="p">:</span> <span class="n">country</span> <span class="k">for</span> <span class="n">country</span><span class="p">,</span> <span class="n">capital</span> <span class="ow">in</span> <span class="n">country_to_capital</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<span class="n">pp</span><span class="p">(</span><span class="n">capital_to_country</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;Brazilia&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span>
 <span class="s1">&#39;London&#39;</span><span class="p">:</span> <span class="s1">&#39;United Kingdom&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Rabat&#39;</span><span class="p">:</span> <span class="s1">&#39;Morocco&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Stockholm&#39;</span><span class="p">:</span> <span class="s1">&#39;Sweden&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>duplicates: later keys overwrite earlier keys</p>
</div>
<p>e.g. only key  that begins with first letter x[0] store that word, duplicates will be gone</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hi&quot;</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;foxtrot&quot;</span><span class="p">,</span> <span class="s2">&quot;hotel&quot;</span><span class="p">]</span>
<span class="p">{</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">words</span> <span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="s1">&#39;hotel&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;foxtrot&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering-predicates">
<h4>filtering predicates<a class="headerlink" href="#filtering-predicates" title="Permalink to this headline">¶</a></h4>
<p>there is an optional filtering clause</p>
<p>[ expr(item) for item in iterable if predicate(item) ]</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">97</span><span class="p">]</span>

<span class="c1"># numbers with only 3 divisors</span>

<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="n">prime_square_divisors</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">:(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
<span class="n">pp</span><span class="p">(</span><span class="n">prime_square_divisors</span><span class="p">)</span>
<span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
 <span class="mi">9</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
 <span class="mi">25</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>
 <span class="mi">49</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">49</span><span class="p">),</span>
 <span class="mi">121</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">121</span><span class="p">),</span>
 <span class="mi">169</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">169</span><span class="p">),</span>
 <span class="mi">289</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">289</span><span class="p">),</span>
 <span class="mi">361</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">361</span><span class="p">),</span>
 <span class="mi">529</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">529</span><span class="p">),</span>
 <span class="mi">841</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">841</span><span class="p">),</span>
 <span class="mi">961</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">961</span><span class="p">),</span>
 <span class="mi">1369</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">1369</span><span class="p">),</span>
 <span class="mi">1681</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">1681</span><span class="p">),</span>
 <span class="mi">1849</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">1849</span><span class="p">),</span>
 <span class="mi">2209</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">2209</span><span class="p">),</span>
 <span class="mi">2809</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">2809</span><span class="p">),</span>
 <span class="mi">3481</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">3481</span><span class="p">),</span>
 <span class="mi">3721</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">3721</span><span class="p">),</span>
 <span class="mi">4489</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">4489</span><span class="p">),</span>
 <span class="mi">5041</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">5041</span><span class="p">),</span>
 <span class="mi">5329</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">5329</span><span class="p">),</span>
 <span class="mi">6241</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">6241</span><span class="p">),</span>
 <span class="mi">6889</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">6889</span><span class="p">),</span>
 <span class="mi">7921</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">7921</span><span class="p">),</span>
 <span class="mi">9409</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">9409</span><span class="p">)}</span>
</pre></div>
</div>
</div>
<div class="section" id="iteration-protocols">
<h4>iteration protocols<a class="headerlink" href="#iteration-protocols" title="Permalink to this headline">¶</a></h4>
<p><strong>iterable protocol</strong>
iterable objects can be passed to the built-in <cite>iter()</cite> function to get an iterator</p>
<p>iterator = iter(iterable)
<strong>iterator protocol</strong>
Iterator objects can be passed to the built-in <cite>next()</cite> function to fetch the next item.
item = next(iterator)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="s1">&#39;Autumn&#39;</span><span class="p">,</span> <span class="s1">&#39;Winter&#39;</span><span class="p">]</span>
<span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Spring&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Summer&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Autumn&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="s1">&#39;Winter&#39;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="c1">#  StopIteration</span>


<span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;iterable is empty&quot;</span><span class="p">)</span>

<span class="n">first</span><span class="p">([</span><span class="s2">&quot;1st&quot;</span><span class="p">,</span> <span class="s2">&quot;2nd&quot;</span><span class="p">,</span> <span class="s2">&quot;3rd&quot;</span><span class="p">])</span>
<span class="s1">&#39;1st&#39;</span>
<span class="n">first</span><span class="p">([</span><span class="s2">&quot;1st&quot;</span><span class="p">,</span> <span class="s2">&quot;2nd&quot;</span><span class="p">,</span> <span class="s2">&quot;3rd&quot;</span><span class="p">])</span>
<span class="s1">&#39;1st&#39;</span>
<span class="n">first</span><span class="p">(</span><span class="nb">set</span><span class="p">())</span>
<span class="c1">#Traceback (most recent call last):</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 4, in first</span>
<span class="c1">#StopIteration</span>
<span class="c1">#</span>
<span class="c1">#During handling of the above exception, another exception occurred:</span>
<span class="c1">#</span>
<span class="c1">#Traceback (most recent call last):</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="c1">#  File &quot;&lt;stdin&gt;&quot;, line 6, in first</span>
<span class="c1">#ValueError: iterable is empty</span>
</pre></div>
</div>
</div>
<div class="section" id="generators">
<h4>generators<a class="headerlink" href="#generators" title="Permalink to this headline">¶</a></h4>
<dl class="simple">
<dt>specify iterable sequences</dt><dd><ul class="simple">
<li><p>all generators are iterators</p></li>
</ul>
</dd>
<dt>are lazily evaluated</dt><dd><ul class="simple">
<li><p>they only computate the next value on demand</p></li>
</ul>
</dd>
<dt>can model infinite sequences</dt><dd><ul class="simple">
<li><p>such as data streams from a sensor with no definite end</p></li>
</ul>
</dd>
<dt>are composable into pipelines</dt><dd><ul class="simple">
<li><p>for natural stream processing</p></li>
</ul>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen123</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="k">yield</span> <span class="mi">3</span>
    <span class="c1"># return</span>
    <span class="c1"># implicit return at the end</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">gen123</span><span class="p">()</span>
<span class="n">g</span>
<span class="c1"># &lt;generator object gen123 at 0x7f3f662e8fc0&gt;</span>
<span class="c1"># pass the generator to the function</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">1</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">2</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">3</span>
<span class="c1"># now StopIteration exception</span>
<span class="c1">#</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="c1">#   StopIteration</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">gen123</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="c1"># remember each call to function creates a new generator object</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">gen123</span><span class="p">()</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">gen123</span><span class="p">()</span>
<span class="n">h</span>
<span class="c1">#generator object gen123 at 0x7f3f66302048&gt;</span>
<span class="n">i</span>
<span class="c1">#generator object gen123 at 0x7f3f663020a0&gt;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen246</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;about to yield 2&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;about to yield 4&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">4</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;about to yield 6&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">6</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">gen246</span><span class="p">()</span> <span class="c1"># generator = created and returned but non of the code has yet been executed</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="s2">&quot;about to yield 2&quot;</span>
<span class="mi">2</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="c1"># generator resumes at the point we left off</span>
<span class="s2">&quot;about to yield 4&quot;</span>
<span class="mi">2</span>
<span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="s2">&quot;about to yield 6&quot;</span>
<span class="mi">6</span>
</pre></div>
</div>
</div>
<div class="section" id="stateful-generators">
<h4>stateful generators<a class="headerlink" href="#stateful-generators" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Generators resume execution</p></li>
<li><p>Can maintain state in local variables</p></li>
<li><p>Complex control flow</p></li>
<li><p>Lazy evaluation</p></li>
</ul>
<p>take generator</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">take</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Take items from the front of an iterable.</span>

<span class="sd">    Args:</span>
<span class="sd">        count: maximum number of items to retrieve</span>
<span class="sd">        iterable: the source series</span>

<span class="sd">    Yields:</span>
<span class="sd">         at most &#39;count&#39; items from &#39;iterable&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="n">count</span><span class="p">:</span>
            <span class="k">return</span> <span class="c1"># end sequence when we reach specified count</span>
            <span class="c1"># return raises StopIteration which is caught internally by the for loop in run_take()</span>
        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># how many items have been yielded so far</span>
        <span class="k">yield</span> <span class="n">item</span> <span class="c1"># contains a generator bc it has at least one yield statement</span>


<span class="k">def</span> <span class="nf">run_take</span><span class="p">():</span> <span class="c1"># generators are lazy and only generate values on request</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>  <span class="c1"># take(count, iterable) # return raises StopIteration which is caught by</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
        <span class="n">run_take</span><span class="p">()</span>
</pre></div>
</div>
<p>distinct generator</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2nd generator</span>
<span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return unique items by eliminating duplicates</span>

<span class="sd">    Args:</span>
<span class="sd">        iterable: source series</span>

<span class="sd">    Yields:</span>
<span class="sd">        Unique elements in order from &#39;iterable&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">continue</span> <span class="c1"># finishes current iteration of the loop an begins next iteration immediately!</span>
            <span class="c1"># execution will be transferred back to the for statement to begin next iteration</span>
        <span class="k">yield</span> <span class="n">item</span>
        <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="c1"># next call from for loop in run_distinct() will resume here with remembered</span>
        <span class="c1"># item 5 just yielded</span>
        <span class="c1"># and then moves up to beginning of for loop again where item is reassigned to second value 7</span>

<span class="k">def</span> <span class="nf">run_distinct</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">distinct</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">run_distinct</span><span class="p">()</span>
</pre></div>
</div>
<p>both combined in pipeline</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">take</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="n">count</span><span class="p">:</span>
            <span class="k">return</span> <span class="c1"># end sequence when we reach specified count</span>
            <span class="c1"># return raises StopIteration which is caught internally by the for loop in run_take()</span>
        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># how many items have been yielded so far</span>
        <span class="k">yield</span> <span class="n">item</span> <span class="c1"># contains a generator bc it has at least one yield statement</span>


<span class="k">def</span> <span class="nf">run_take</span><span class="p">():</span> <span class="c1"># generators are lazy and only generate values on request</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>  <span class="c1"># take(count, iterable) # return raises StopIteration which is caught by</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c1"># 2nd generator</span>
<span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">continue</span> <span class="c1"># finishes current iteration of the loop an begins next iteration immediately!</span>
            <span class="c1"># execution will be transferred back to the for statement to begin next iteration</span>
        <span class="k">yield</span> <span class="n">item</span>
        <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="c1"># next call from for loop in run_distinct() will resume here with first item 5</span>
        <span class="c1"># and then moves up to beginning of for loop again with second item 7</span>

<span class="k">def</span> <span class="nf">run_distinct</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">distinct</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">run_pipeline</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">distinct</span><span class="p">(</span><span class="n">items</span><span class="p">)):</span> <span class="c1"># distinct must run first to produce the iterator object argument for take</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">run_pipeline</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="laziness-and-infinite">
<h5>laziness and infinite<a class="headerlink" href="#laziness-and-infinite" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Just in Time Computation</p></li>
<li><p>Infinite (or large) sequences
• sensor readings
• mathematical series
• massive files</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lucas</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span> <span class="c1"># infinite while loop</span>
        <span class="k">yield</span> <span class="n">b</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lucas</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># this will run forever until you pc runs out of memory but demonstrates nicely</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generator-comprehensions">
<h4>generator comprehensions<a class="headerlink" href="#generator-comprehensions" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>similar syntax to list comprehensions</p></li>
<li><p>create a generator object</p></li>
<li><p>concise</p></li>
<li><p>lazy evaluation</p></li>
</ul>
<p>(expr(item) for item in iterable)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">million_squares</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000001</span><span class="p">))</span> <span class="c1"># creates a generator object</span>
<span class="nb">list</span><span class="p">(</span><span class="n">million_squares</span><span class="p">)</span> <span class="c1"># force evaluation of the generator by using it to create a list</span>
<span class="nb">list</span><span class="p">(</span><span class="n">million_squares</span><span class="p">)</span>
<span class="p">[]</span> <span class="c1"># repeating it = empty, generators are single use objects!</span>
<span class="c1"># each time we call a generator function, we create a generator object</span>
<span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000001</span><span class="p">))</span> <span class="c1"># sum of first 10mil squares, using a list comprehencsion would take 400MB!</span>
<span class="mi">333333833333500000</span>

<span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000001</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">17</span><span class="p">)</span> <span class="c1"># with optional if condition</span>
<span class="mi">313726019609411764</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>we didn’t have to use extra parentheses to put a generator comprehension wihtin sum(), this improves readability</p>
</div>
</div>
<div class="section" id="using-itertools">
<h4>using itertools<a class="headerlink" href="#using-itertools" title="Permalink to this headline">¶</a></h4>
<p>list of iteration tools in python: <a class="reference external" href="https://docs.python.org/3/library/itertools.html">https://docs.python.org/3/library/itertools.html</a></p>
<p>using islice and count</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span><span class="p">,</span> <span class="n">count</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>


<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># do this thousand_primes = islice(all_primes, 1000) but how to generate all primes</span>
<span class="c1"># ranges must always be finite, we need an open ended version of range and that is what count() does</span>
<span class="c1"># thousand_primes = islice((x for x in count() if is_prime(x)), 1000) # with islice() like with lists</span>

<span class="nb">sum</span><span class="p">(</span><span class="n">islice</span><span class="p">((</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">count</span><span class="p">()</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="mi">1000</span><span class="p">))</span>
<span class="mi">3682913</span>
</pre></div>
</div>
<p>using any(or) and all(and) for iterable series of bool values</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">any</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="kc">True</span>
<span class="nb">all</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="kc">False</span>

<span class="c1"># Are there any prime numbers between 1328 and 1361?</span>
<span class="nb">any</span><span class="p">(</span><span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1328</span><span class="p">,</span> <span class="mi">1361</span><span class="p">))</span>
<span class="kc">False</span>

<span class="c1"># title() converts first character to uppercase</span>
<span class="c1"># check if all city names have capital letters</span>
<span class="nb">all</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;London&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;Sydney&#39;</span><span class="p">])</span>
<span class="kc">True</span>

<span class="c1"># syncronize iterations over 2 iterable series</span>
<span class="c1"># eg two  series of temperature data</span>
<span class="n">sunday</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="n">monday</span> <span class="o">=</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>
<span class="c1"># bind them in pairs of corresponding readings</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
<span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
<span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
<span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
<span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>

<span class="c1"># zip yields tuples when iterated</span>
<span class="c1"># we can take advantage of this with tuple unpacking in the for loop</span>
<span class="k">for</span> <span class="n">sun</span><span class="p">,</span> <span class="n">mon</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;average =&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">sun</span> <span class="o">+</span> <span class="n">mon</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">average</span> <span class="o">=</span> <span class="mf">12.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">14.0</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">14.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">14.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">16.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">20.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">21.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">22.0</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">22.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">21.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">19.5</span>
<span class="n">average</span> <span class="o">=</span> <span class="mf">17.5</span>

<span class="n">tuesday</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>

<span class="k">for</span> <span class="n">temps</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">,</span> <span class="n">tuesday</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;min=</span><span class="si">{:4.1f}</span><span class="s2">, max=</span><span class="si">{:4.1f}</span><span class="s2">, average=</span><span class="si">{:4.1f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">temps</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">temps</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">temps</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">temps</span><span class="p">)))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">min= 2.0, max=13.0, average= 9.0</span>
<span class="sd">min= 2.0, max=14.0, average=10.0</span>
<span class="sd">min= 3.0, max=15.0, average=10.7</span>
<span class="sd">min= 7.0, max=15.0, average=12.0</span>
<span class="sd">min= 9.0, max=17.0, average=14.0</span>
<span class="sd">min=10.0, max=21.0, average=17.0</span>
<span class="sd">min= 9.0, max=22.0, average=17.3</span>
<span class="sd">min= 8.0, max=22.0, average=17.3</span>
<span class="sd">min= 8.0, max=23.0, average=17.7</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># now we want one long temperature series for sunday monday and thuesday</span>
<span class="c1"># we can then lazily concatenate iterables using itertools chain</span>
<span class="c1"># this is different from simply concatenating 3 lists into a new list</span>
<span class="c1"># we have no memory impact of data duplication</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="n">temperatures</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">,</span> <span class="n">tuesday</span><span class="p">)</span>

<span class="nb">all</span><span class="p">(</span><span class="n">t</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">temperatures</span><span class="p">)</span>
<span class="n">temperatures</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">sunday</span><span class="p">,</span> <span class="n">monday</span><span class="p">,</span> <span class="n">tuesday</span><span class="p">)</span>
<span class="kc">True</span>

<span class="c1"># following shows generator functions, generator expressions, predicate functions and for loops</span>
<span class="k">def</span> <span class="nf">lucas</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span> <span class="c1"># infinite while loop</span>
        <span class="k">yield</span> <span class="n">b</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">lucas</span><span class="p">()</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">7</span>
<span class="mi">11</span>
<span class="mi">29</span>
<span class="mi">47</span>
<span class="mi">199</span>
<span class="mi">521</span>
<span class="mi">2207</span>
<span class="mi">3571</span>
<span class="mi">9349</span>
<span class="mi">3010349</span>
<span class="mi">54018521</span>
<span class="mi">370248451</span>
<span class="mi">6643838879</span>
<span class="mi">119218851371</span>
<span class="mi">5600748293801</span>
<span class="mi">688846502588399</span>
<span class="mi">32361122672259149</span>


<span class="sd">&quot;&quot;&quot; itertools.chain(*iterables)</span>
<span class="sd">Make an iterator that returns elements from the first iterable until it is exhausted, then proceeds to the next iterable, until all of the iterables are exhausted. Used for treating consecutive sequences as a single sequence &quot;&quot;&quot;</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.python.org/3/library/itertools.html#itertools.chain">https://docs.python.org/3/library/itertools.html#itertools.chain</a></p>
</div>
<div class="section" id="summary-comprehensions-generators">
<h4>summary comprehensions generators<a class="headerlink" href="#summary-comprehensions-generators" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Comprehensions
- Comprehensions are a concise syntax for describing lists, sets and dictionaries.
- Comprehensions operate on an iterable source object and apply an optional predicate filter and a mandatory expression, both of which are usually in terms of the current item.
- Iterables are objects over which we can iterate item by item.
- We retrieve an iterator from an iterable object using the built-in iter() function.
- Iterators produce items one-by-one-from the underlying iterable series each time they are passed to the built-in next() function</p></li>
<li><p>Generators
- Generator functions allow us to describe series using imperative code.
- Generator functions contain at least one use of the yield keyword.
- Generators are iterators. When advanced with next() the generator starts or resumes execution up to and including the next yield.
- Each call to a generator function creates a new generator object.
- Generators can maintain explicit state in local variables between iterations.
- Generators are lazy, and so can model infinite series of data.
- Generator expressions have a similar syntactic form to list comprehensions and allow for a more declarative and concise way of creating generator objects.</p></li>
</ul>
<p>list of iteration tools in python: <a class="reference external" href="https://docs.python.org/3/library/itertools.html">https://docs.python.org/3/library/itertools.html</a></p>
</div>
</div>
<div class="section" id="classes">
<h3>classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>self: the first argument to all instance methods
__init__() instance method for initializing new objects</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>__init__() is an initializer, not a constructor, self is similar to this. __init__() is to configure an object that already exists by the time it is called</p>
</div>
<p>why self._number?</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>avoid name clash with number()</p></li>
<li><p>implementation details of objects start with _</p></li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>using objects of different types through a common interface = polymorphism</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Model for aircraft flights.&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">Flight</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A flight with a particular passenger aircraft.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">aircraft</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">isalpha</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No airline code in &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">isupper</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid airline code &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span> <span class="o">&lt;=</span> <span class="mi">9999</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid route number &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span> <span class="o">=</span> <span class="n">aircraft</span>

        <span class="n">rows</span><span class="p">,</span> <span class="n">seats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span> <span class="p">{</span><span class="n">letter</span><span class="p">:</span><span class="kc">None</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">seats</span><span class="p">}</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">rows</span> <span class="p">]</span>

    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span>

    <span class="k">def</span> <span class="nf">airline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">aircraft_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">allocate_seat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">passenger</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allocate a seat to a passenger.</span>

<span class="sd">        Args:</span>
<span class="sd">            seat: A seat designator such as &#39;12C&#39; or &#39;21F&#39;.</span>
<span class="sd">            passenger: The passenger name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the seat is unavailable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rows</span><span class="p">,</span> <span class="n">seat_letters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>

        <span class="n">letter</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">letter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seat_letters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat letter </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">letter</span><span class="p">))</span>

        <span class="n">row_text</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row_text</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat row </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_text</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid row number </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Seat </span><span class="si">{}</span><span class="s2"> is already occupied.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">seat</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="o">=</span> <span class="n">passenger</span>

    <span class="k">def</span> <span class="nf">_parse_seat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse a seat designator into a valid row and letter.</span>

<span class="sd">        Args:</span>
<span class="sd">            seat: A seat designator such as 12F</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple containing an integer and a string for row and seat.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">row_numbers</span><span class="p">,</span> <span class="n">seat_letters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>

        <span class="n">letter</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">letter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seat_letters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat letter </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">letter</span><span class="p">))</span>

        <span class="n">row_text</span> <span class="o">=</span> <span class="n">seat</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row_text</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid seat row </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_text</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">row_numbers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid row number </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">row</span><span class="p">,</span> <span class="n">letter</span>

    <span class="k">def</span> <span class="nf">allocate_seat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">passenger</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allocate a seat to a passenger.</span>

<span class="sd">        Args:</span>
<span class="sd">            seat: A seat designator such as &#39;12C&#39; or &#39;21F&#39;.</span>
<span class="sd">            passenger: The passenger name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the seat is unavailable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">row</span><span class="p">,</span> <span class="n">letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_seat</span><span class="p">(</span><span class="n">seat</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Seat </span><span class="si">{}</span><span class="s2"> already occupied&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">seat</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span> <span class="o">=</span> <span class="n">passenger</span>

    <span class="k">def</span> <span class="nf">relocate_passenger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_seat</span><span class="p">,</span> <span class="n">to_seat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Relocate a passenger to a different seat.</span>

<span class="sd">        Args:</span>
<span class="sd">            from_seat: The existing seat designator for the</span>
<span class="sd">                       passenger to be moved.</span>

<span class="sd">            to_seat: The new seat designator.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">from_row</span><span class="p">,</span> <span class="n">from_letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_seat</span><span class="p">(</span><span class="n">from_seat</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">from_row</span><span class="p">][</span><span class="n">from_letter</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No passenger to relocate in seat </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">from_seat</span><span class="p">))</span>

        <span class="n">to_row</span><span class="p">,</span> <span class="n">to_letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_seat</span><span class="p">(</span><span class="n">to_seat</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">to_row</span><span class="p">][</span><span class="n">to_letter</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Seat </span><span class="si">{}</span><span class="s2"> already occupied&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">to_seat</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">to_row</span><span class="p">][</span><span class="n">to_letter</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">from_row</span><span class="p">][</span><span class="n">from_letter</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">from_row</span><span class="p">][</span><span class="n">from_letter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">num_available_seats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_boarding_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card_printer</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">passenger</span><span class="p">,</span> <span class="n">seat</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_passenger_seats</span><span class="p">()):</span>
            <span class="n">card_printer</span><span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">aircraft_model</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_passenger_seats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterable series of passenger seating allocations.&quot;&quot;&quot;</span>
        <span class="n">row_numbers</span><span class="p">,</span> <span class="n">seat_letters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aircraft</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">row_numbers</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">seat_letters</span><span class="p">:</span>
                <span class="n">passenger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seating</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">letter</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">passenger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">letter</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Aircraft</span><span class="p">:</span>
      <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registration</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_registration</span> <span class="o">=</span> <span class="n">registration</span>

      <span class="k">def</span> <span class="nf">registration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registration</span>

      <span class="k">def</span> <span class="nf">num_seats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="n">rows</span><span class="p">,</span> <span class="n">row_seats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seating_plan</span><span class="p">()</span>
          <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">row_seats</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">AirbusA319</span><span class="p">(</span><span class="n">Aircraft</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="k">return</span> <span class="s2">&quot;Airbus A319&quot;</span>

      <span class="k">def</span> <span class="nf">seating_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
          <span class="k">return</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span> <span class="s2">&quot;ABCDEF&quot;</span>


<span class="k">class</span> <span class="nc">Boeing777</span><span class="p">(</span><span class="n">Aircraft</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Boeing 777&quot;</span>

    <span class="k">def</span> <span class="nf">seating_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># For simplicity&#39;s sake, we ignore complex</span>
        <span class="c1"># seating arrangement for first-class</span>
        <span class="k">return</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">56</span><span class="p">),</span> <span class="s2">&quot;ABCDEGHJK&quot;</span>


<span class="k">def</span> <span class="nf">make_flights</span><span class="p">():</span>
      <span class="n">f</span> <span class="o">=</span> <span class="n">Flight</span><span class="p">(</span><span class="s2">&quot;BA758&quot;</span><span class="p">,</span> <span class="n">AirbusA319</span><span class="p">(</span><span class="s2">&quot;G-EUPT&quot;</span><span class="p">))</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;12A&#39;</span><span class="p">,</span> <span class="s1">&#39;Guido van Rossum&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;15F&#39;</span><span class="p">,</span> <span class="s1">&#39;Bjarne Stroustrup&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;15E&#39;</span><span class="p">,</span> <span class="s1">&#39;Anders Hejlsberg&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;1C&#39;</span><span class="p">,</span> <span class="s1">&#39;John McCarthy&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;1D&#39;</span><span class="p">,</span> <span class="s1">&#39;Richard Hickey&#39;</span><span class="p">)</span>

      <span class="n">g</span> <span class="o">=</span> <span class="n">Flight</span><span class="p">(</span><span class="s2">&quot;AF72&quot;</span><span class="p">,</span> <span class="n">Boeing777</span><span class="p">(</span><span class="s2">&quot;F-GSPS&quot;</span><span class="p">))</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;55K&#39;</span><span class="p">,</span> <span class="s1">&#39;Larry Wall&#39;</span><span class="p">)</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;33G&#39;</span><span class="p">,</span> <span class="s1">&#39;Yukihiro Matsumoto&#39;</span><span class="p">)</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;4B&#39;</span><span class="p">,</span> <span class="s1">&#39;Brian Kernighan&#39;</span><span class="p">)</span>
      <span class="n">g</span><span class="o">.</span><span class="n">allocate_seat</span><span class="p">(</span><span class="s1">&#39;4A&#39;</span><span class="p">,</span> <span class="s1">&#39;Dennis Ritchie&#39;</span><span class="p">)</span>

      <span class="k">return</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span>


<span class="k">def</span> <span class="nf">console_card_printer</span><span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">flight_number</span><span class="p">,</span> <span class="n">aircraft</span><span class="p">):</span>
      <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;| Name: </span><span class="si">{0}</span><span class="s2">&quot;</span>     \
               <span class="s2">&quot;  Flight: </span><span class="si">{1}</span><span class="s2">&quot;</span>   \
               <span class="s2">&quot;  Seat: </span><span class="si">{2}</span><span class="s2">&quot;</span>     \
               <span class="s2">&quot;  Aircraft: </span><span class="si">{3}</span><span class="s2">&quot;</span> \
               <span class="s2">&quot; |&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">passenger</span><span class="p">,</span> <span class="n">flight_number</span><span class="p">,</span> <span class="n">seat</span><span class="p">,</span> <span class="n">aircraft</span><span class="p">)</span>
      <span class="n">banner</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span>
      <span class="n">border</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span>
      <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">banner</span><span class="p">,</span> <span class="n">border</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">border</span><span class="p">,</span> <span class="n">banner</span><span class="p">]</span>
      <span class="n">card</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="summary-classes">
<h4>summary classes<a class="headerlink" href="#summary-classes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>All types in Python have a ‘class’</p></li>
<li><p>Classes define the structure and behavior of an object</p></li>
<li><p>Class is determined when object is created
- normally fixed for the lifetime</p></li>
<li><p>Classes are the key support for Object-Oriented Programming in Python</p></li>
<li><p>Classes defined using the class keyword followed by CamelCase name</p></li>
<li><p>Class instances created by calling the class as if it were a function</p></li>
<li><p>Instance methods are functions defined inside the class
- Should accept an object instance called self as the first parameter</p></li>
<li><p>Methods are called using instance.method()
- Syntactic sugar for passing self instance to method</p></li>
<li><p>The optional __init__() method initialized new instances
- If present, the constructor calls __init__()
- __init__() is not the constructor</p></li>
<li><p>Arguments passed to the constructor are forwarded to the initializer</p></li>
<li><p>Instance attributes are created simply by assigning to them</p></li>
<li><p>Implementation details are denoted by a leading underscore
- There are no public, protected or private access modifiers in Python</p></li>
<li><p>Accessing implementation details can be very useful
- Especially during development and debugging</p></li>
<li><p>Class invariants should be established in the initializer
- If the invariants can’t be established raise exceptions to signal failure</p></li>
<li><p>Methods can have docstrings, just like regular functions</p></li>
<li><p>Classes can have docstrings</p></li>
<li><p>Even within an object method calls must be preceded with self</p></li>
<li><p>You can have as many classes and functions in a module as you wish
- Related classes and global functions are usually grouped together this way</p></li>
<li><p>Polymorphism in Python is achieved through duck typing</p></li>
<li><p>Polymorphism in Python does not use shared base classes or interfaces</p></li>
<li><p>Class inheritance is primarily useful for sharing implementation</p></li>
<li><p>All methods are inherited, including special methods like the initializer</p></li>
<li><p>Strings support slicing, because they implement the sequence protocol</p></li>
<li><p>Following the Law of Demeter can reduce coupling</p></li>
<li><p>We can nest comprehensions</p></li>
<li><p>It can sometimes be useful to discard the current item in a comprehension</p></li>
<li><p>When dealing with one-based collections it’s often easier just to waste one</p></li>
<li><p>list entry.</p></li>
<li><p>Don’t feel compelled to use classes when a simple function will suffice</p></li>
<li><p>Comprehensions or generator expression can be split over multiple lines</p></li>
<li><p>Statements can be split over multiple lines using backslash
- Use this feature sparingly and only when it improves readability</p></li>
<li><p>Use “Ask! Don’t tell.” to avoid tight coupling between objects</p></li>
</ul>
</div>
</div>
<div class="section" id="files-and-resource-management">
<h3>files and resource management<a class="headerlink" href="#files-and-resource-management" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>open(file, mode, encoding)</dt><dd><p>file: path to file (required)
mode: read/write/append, binary/text
encoding: text encoding</p>
</dd>
</dl>
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#open">https://docs.python.org/3/library/functions.html#open</a></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Character</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘r’</p></td>
<td><p>open for reading (default)</p></td>
</tr>
<tr class="row-odd"><td><p>‘w’</p></td>
<td><p>open for writing, truncating the file first</p></td>
</tr>
<tr class="row-even"><td><p>‘x’</p></td>
<td><p>open for exclusive creation, failing if the file already exists</p></td>
</tr>
<tr class="row-odd"><td><p>‘a’</p></td>
<td><p>open for writing, appending to the end of the file if it exists</p></td>
</tr>
<tr class="row-even"><td><p>‘b’</p></td>
<td><p>binary mode</p></td>
</tr>
<tr class="row-odd"><td><p>‘t’</p></td>
<td><p>text mode (default)</p></td>
</tr>
<tr class="row-even"><td><p>‘+’</p></td>
<td><p>open a disk file for updating (reading and writing)</p></td>
</tr>
<tr class="row-odd"><td><p>‘U’</p></td>
<td><p>universal newlines mode (deprecated)</p></td>
</tr>
</tbody>
</table>
<p>write() returns the number of codepoints, not the number of characters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rt&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="git.html" class="btn btn-neutral float-left" title="GIT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Patrick Brunswyck.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>